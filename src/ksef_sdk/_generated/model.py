# generated by datamodel-codegen:
#   filename:  openapi.json
#   timestamp: 2026-02-05T20:07:59+00:00

from __future__ import annotations

from datetime import date
from typing import Annotated, Literal


from pydantic import (
    AnyUrl,
    AwareDatetime,
    Base64Str,
    BaseModel,
    ConfigDict,
    Field,
    RootModel,
)


class Ip4Address(RootModel[str]):
    root: Annotated[
        str, Field(pattern="^((25[0-5]|(2[0-4]|1\\d|[1-9]|)\\d)\\.?\\b){4}$")
    ]


class Ip4Range(RootModel[str]):
    root: Annotated[
        str,
        Field(
            pattern="^((25[0-5]|(2[0-4]|1\\d|[1-9]|)\\d)\\.?\\b){4}-((25[0-5]|(2[0-4]|1\\d|[1-9]|)\\d)\\.?\\b){4}$"
        ),
    ]


class Ip4Mask(RootModel[str]):
    root: Annotated[
        str,
        Field(
            pattern="^((25[0-5]|(2[0-4]|1\\d|[1-9]|)\\d)\\.?\\b){4}\\/(0|[1-9]|1[0-9]|2[0-9]|3[0-2])$"
        ),
    ]


class AllowedIps(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    ip4Addresses: Annotated[
        list[Ip4Address] | None,
        Field(
            description="Lista adresów IPv4 w notacji dziesiętnej kropkowanej, np. `192.168.0.10`."
        ),
    ] = None
    ip4Ranges: Annotated[
        list[Ip4Range] | None,
        Field(
            description="Lista adresów IPv4 podana w formie zakresu początek–koniec, oddzielonego pojedynczym myślnikiem, np. `10.0.0.1–10.0.0.254`."
        ),
    ] = None
    ip4Masks: Annotated[
        list[Ip4Mask] | None,
        Field(description="Lista adresów IPv4 w notacji CIDR, np. `172.16.0.0/16`."),
    ] = None


class AuthorizationPolicy(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    allowedIps: Annotated[
        AllowedIps | None, Field(description="Lista dozwolonych adresów IP.")
    ] = None


class BatchSessionEffectiveContextLimits(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    maxInvoiceSizeInMB: Annotated[
        int, Field(description="Maksymalny rozmiar faktury w MB.", ge=0)
    ]
    maxInvoiceWithAttachmentSizeInMB: Annotated[
        int, Field(description="Maksymalny rozmiar faktury z załącznikiem w MB.", ge=0)
    ]
    maxInvoices: Annotated[
        int,
        Field(
            description="Maksymalna ilość faktur które można przesłać w pojedynczej sesji.",
            ge=0,
        ),
    ]


class CertificateEffectiveSubjectLimits(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    maxCertificates: int | None = None


class CertificateEnrollmentDataResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    commonName: Annotated[str, Field(description="Nazwa powszechna.")]
    countryName: Annotated[str, Field(description="Kraj, kod ISO 3166.")]
    givenName: Annotated[str | None, Field(description="Imię.")] = None
    surname: Annotated[str | None, Field(description="Nazwisko.")] = None
    serialNumber: Annotated[
        str | None, Field(description="Numer seryjny podmiotu.")
    ] = None
    uniqueIdentifier: Annotated[
        str | None, Field(description="Unikalny identyfikator.")
    ] = None
    organizationName: Annotated[str | None, Field(description="Nazwa organizacji.")] = (
        None
    )
    organizationIdentifier: Annotated[
        str | None, Field(description="Identyfikator organizacji.")
    ] = None


class CertificateLimit(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    remaining: Annotated[int, Field(description="Pozostała wartość limitu.")]
    limit: Annotated[
        int, Field(description="Maksymalna liczba zasobów dozwolona w ramach limitu.")
    ]


class CertificateLimitsResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    canRequest: Annotated[
        bool,
        Field(
            description="Flaga informująca czy uwierzytelniony podmiot może złożyć nowy wniosek o certyfikat."
        ),
    ]
    enrollment: Annotated[
        CertificateLimit,
        Field(
            description="Informacje o limitach związanych z liczbą możliwych do złożenia wniosków certyfikacyjnych."
        ),
    ]
    certificate: Annotated[
        CertificateLimit,
        Field(
            description="Informacje o limitach dotyczących liczby aktywnych certyfikatów wydanych dla danego podmiotu."
        ),
    ]


class CheckAttachmentPermissionStatusResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    isAttachmentAllowed: Annotated[
        bool | None,
        Field(
            description="Informacja czy Podmiot ma obecnie możliwość dodawania Załączników do Faktur"
        ),
    ] = None
    revokedDate: Annotated[
        AwareDatetime | None,
        Field(
            description="Data i czas zakończenia możliwość dodawania przez Podmiot Załączników do Faktur.\nBrak podanej daty oznacza bezterminową możliwość dodawania Załączników do Faktur"
        ),
    ] = None


class CommonSessionStatus(
    RootModel[Literal["InProgress", "Succeeded", "Failed", "Cancelled"]]
):
    root: Annotated[
        Literal["InProgress", "Succeeded", "Failed", "Cancelled"],
        Field(
            description="| Wartość | Opis |\n| --- | --- |\n| InProgress | Sesja aktywna. |\n| Succeeded | Sesja przetworzona poprawnie.            W trakcie przetwarzania sesji nie wystąpiły żadne błędy, ale część faktur nadal mogła zostać odrzucona. |\n| Failed | Sesja nie przetworzona z powodu błędów.            Na etapie rozpoczynania lub kończenia sesji wystąpiły błędy, które nie pozwoliły na jej poprawne przetworzenie. |\n| Cancelled | Sesja anulowania.            Został przekroczony czas na wysyłkę w sesji wsadowej, lub nie przesłano żadnych faktur w sesji interaktywnej. |\n"
        ),
    ]


class EffectiveApiRateLimitValues(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    perSecond: Annotated[int, Field(description="Limit na sekundę.")]
    perMinute: Annotated[int, Field(description="Limit na minutę.")]
    perHour: Annotated[int, Field(description="Limit na godzinę.")]


class EffectiveApiRateLimits(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    onlineSession: Annotated[
        EffectiveApiRateLimitValues,
        Field(description="Limity dla otwierania/zamykania sesji interaktywnych."),
    ]
    batchSession: Annotated[
        EffectiveApiRateLimitValues,
        Field(description="Limity dla otwierania/zamykania sesji wsadowych."),
    ]
    invoiceSend: Annotated[
        EffectiveApiRateLimitValues, Field(description="Limity dla wysyłki faktur.")
    ]
    invoiceStatus: Annotated[
        EffectiveApiRateLimitValues,
        Field(description="Limity dla pobierania statusu faktury z sesji."),
    ]
    sessionList: Annotated[
        EffectiveApiRateLimitValues,
        Field(description="Limity dla pobierania listy sesji."),
    ]
    sessionInvoiceList: Annotated[
        EffectiveApiRateLimitValues,
        Field(description="Limity dla pobierania listy faktur w sesji."),
    ]
    sessionMisc: Annotated[
        EffectiveApiRateLimitValues,
        Field(description="Limity dla pozostałych operacji w ramach sesji."),
    ]
    invoiceMetadata: Annotated[
        EffectiveApiRateLimitValues,
        Field(description="Limity dla pobierania metadanych faktur."),
    ]
    invoiceExport: Annotated[
        EffectiveApiRateLimitValues,
        Field(description="Limity dla eksportu paczki faktur."),
    ]
    invoiceExportStatus: Annotated[
        EffectiveApiRateLimitValues,
        Field(description="Limity dla pobierana statusu eksportu paczki faktur."),
    ]
    invoiceDownload: Annotated[
        EffectiveApiRateLimitValues,
        Field(description="Limity dla pobierania faktur po numerze KSeF."),
    ]
    other: Annotated[
        EffectiveApiRateLimitValues,
        Field(description="Limity dla pozostałych operacji API."),
    ]


class EncryptionInfo(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    encryptedSymmetricKey: Annotated[
        Base64Str,
        Field(
            description="Klucz symetryczny o długości 32 bajtów, zaszyfrowany algorytmem RSA (Padding: OAEP z SHA-256), zakodowany w formacie Base64.\n\n[Klucz publiczny Ministerstwa Finansów](/docs/v2/index.html#tag/Certyfikaty-klucza-publicznego)"
        ),
    ]
    initializationVector: Annotated[
        Base64Str,
        Field(
            description="Wektor inicjalizujący (IV) o długości 16 bajtów, używany do szyfrowania symetrycznego, zakodowany w formacie Base64."
        ),
    ]


class EnrollmentEffectiveSubjectLimits(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    maxEnrollments: int | None = None


class EntityByFingerprintDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    fullName: Annotated[str, Field(description="Pełna nazwa podmiotu.", max_length=100)]
    address: Annotated[str, Field(description="Adres podmiotu.", max_length=512)]


class EntityDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    fullName: Annotated[
        str, Field(description="Pełna nazwa podmiotu.", max_length=90, min_length=5)
    ]


class EuEntityDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    fullName: Annotated[str, Field(description="Pełna nazwa podmiotu.", max_length=100)]
    address: Annotated[str, Field(description="Adres podmiotu.", max_length=512)]


class EuEntityPermissionsQueryRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    vatUeIdentifier: Annotated[
        str | None,
        Field(
            description="Wartość identyfikatora (numeru identyfikacyjnego VAT) podmiotu unijnego (exact match).",
            pattern="^(ATU\\d{8}|BE[01]{1}\\d{9}|BG\\d{9,10}|CY\\d{8}[A-Z]|CZ\\d{8,10}|DE\\d{9}|DK\\d{8}|EE\\d{9}|EL\\d{9}|ES([A-Z]\\d{8}|\\d{8}[A-Z]|[A-Z]\\d{7}[A-Z])|FI\\d{8}|FR[A-Z0-9]{2}\\d{9}|HR\\d{11}|HU\\d{8}|IE(\\d{7}[A-Z]{2}|\\d[A-Z0-9+*]\\d{5}[A-Z])|IT\\d{11}|LT(\\d{9}|\\d{12})|LU\\d{8}|LV\\d{11}|MT\\d{8}|NL[A-Z0-9+*]{12}|PT\\d{9}|RO\\d{2,10}|SE\\d{12}|SI\\d{8}|SK\\d{10}|XI((\\d{9}|\\d{12})|(GD|HA)\\d{3}))$",
        ),
    ] = None
    authorizedFingerprintIdentifier: Annotated[
        str | None,
        Field(
            description="Odcisk palca certyfikatu kwalifikowanego uprawnionego (contains)."
        ),
    ] = None
    permissionTypes: Annotated[
        list[Literal["VatUeManage", "InvoiceWrite", "InvoiceRead", "Introspection"]]
        | None,
        Field(description="Lista rodzajów wyszukiwanych uprawnień."),
    ] = None


class ExceptionDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    exceptionCode: int | None = None
    exceptionDescription: str | None = None
    details: list[str] | None = None


class FormCode(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    systemCode: Annotated[str, Field(description="Kod systemowy")]
    schemaVersion: Annotated[str, Field(description="Wersja schematu")]
    value: Annotated[str, Field(description="Wartość")]


class IdDocument(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        str, Field(description="Rodzaj dokumentu tożsamości.", max_length=20)
    ]
    number: Annotated[
        str, Field(description="Seria i numer dokumentu tożsamości.", max_length=20)
    ]
    country: Annotated[
        str,
        Field(
            description="Kraj wydania dokumentu tożsamości. Musi być zgodny z ISO 3166-1 alpha-2 (np. PL, DE, US) oraz zawierać dokładnie 2 wielkie litery.",
            max_length=2,
            min_length=2,
        ),
    ]


class InternalId(RootModel[str]):
    root: Annotated[
        str,
        Field(
            description="Identyfikator wewnętrzny, składający się z numeru NIP i 5 cyfr.",
            max_length=16,
            min_length=16,
            pattern="^[1-9]((\\d[1-9])|([1-9]\\d))\\d{7}-\\d{5}$",
        ),
    ]


class InvoiceMetadataBuyerIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "VatUe", "Other", "None"],
        Field(
            description="Typ identyfikatora nabywcy.\n| Wartość | Opis |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| VatUe | Identyfikator VAT UE podmiotu unijnego |\n| Other | Inny identyfikator |\n| None | Brak identyfikatora nabywcy |\n"
        ),
    ]
    value: Annotated[
        str | None, Field(description="Wartość identyfikatora nabywcy.", max_length=50)
    ] = None


class InvoiceQueryAmount(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Literal["Brutto", "Netto", "Vat"]
    from_: Annotated[float | None, Field(alias="from")] = None
    to: float | None = None


class InvoiceQueryBuyerIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "VatUe", "Other", "None"],
        Field(
            description="Typ identyfikatora nabywcy.\n| Wartość | Opis |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| VatUe | Identyfikator VAT UE podmiotu unijnego |\n| Other | Inny identyfikator |\n| None | Brak identyfikatora nabywcy |\n"
        ),
    ]
    value: Annotated[
        str | None,
        Field(
            description="Wartość identyfikatora nabywcy (exact match).", max_length=50
        ),
    ] = None


class InvoiceStatusInfo(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    code: Annotated[int, Field(description="Kod statusu faktury")]
    description: Annotated[str, Field(description="Opis statusu", min_length=1)]
    details: Annotated[
        list[str] | None, Field(description="Dodatkowe szczegóły statusu")
    ] = None
    extensions: Annotated[
        dict[str, str] | None,
        Field(
            description="Zbiór dodatkowych informacji związanych ze statusem faktury, zapisanych jako pary klucz–wartość.\nUmożliwia rozszerzenie modelu o dane specyficzne dla danego przypadku."
        ),
    ] = None


class NipVatUe(RootModel[str]):
    root: Annotated[
        str,
        Field(
            description="Identyfikator złożony, czyli dwuczłonowy identyfikator składający się z nr NIP podmiotu polskiego oraz numeru VAT UE podmiotu unijnego.",
            pattern="^[1-9]((\\d[1-9])|([1-9]\\d))\\d{7}-(ATU\\d{8}|BE[01]{1}\\d{9}|BG\\d{9,10}|CY\\d{8}[A-Z]|CZ\\d{8,10}|DE\\d{9}|DK\\d{8}|EE\\d{9}|EL\\d{9}|ES([A-Z]\\d{8}|\\d{8}[A-Z]|[A-Z]\\d{7}[A-Z])|FI\\d{8}|FR[A-Z0-9]{2}\\d{9}|HR\\d{11}|HU\\d{8}|IE(\\d{7}[A-Z]{2}|\\d[A-Z0-9+*]\\d{5}[A-Z])|IT\\d{11}|LT(\\d{9}|\\d{12})|LU\\d{8}|LV\\d{11}|MT\\d{8}|NL[A-Z0-9+*]{12}|PT\\d{9}|RO\\d{2,10}|SE\\d{12}|SI\\d{8}|SK\\d{10}|XI((\\d{9}|\\d{12})|(GD|HA)\\d{3}))$",
        ),
    ]


class OnlineSessionEffectiveContextLimits(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    maxInvoiceSizeInMB: Annotated[
        int, Field(description="Maksymalny rozmiar faktury w MB.", ge=0)
    ]
    maxInvoiceWithAttachmentSizeInMB: Annotated[
        int, Field(description="Maksymalny rozmiar faktury z załącznikiem w MB.", ge=0)
    ]
    maxInvoices: Annotated[
        int,
        Field(
            description="Maksymalna ilość faktur które można przesłać w pojedynczej sesji.",
            ge=0,
        ),
    ]


class OpenOnlineSessionRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    formCode: Annotated[
        FormCode,
        Field(
            description="Schemat faktur wysyłanych w ramach sesji.\n\nObsługiwane schematy:\n| SystemCode | SchemaVersion | Value |\n| --- | --- | --- |\n| [FA (3)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/FA/schemat_FA(3)_v1-0E.xsd) | 1-0E | FA |\n| [PEF (3)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/PEF/Schemat_PEF(3)_v2-1.xsd) | 2-1 | PEF |\n| [PEF_KOR (3)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/PEF/Schemat_PEF_KOR(3)_v2-1.xsd) | 2-1 | PEF |\n"
        ),
    ]
    encryption: Annotated[
        EncryptionInfo,
        Field(
            description="Symetryczny klucz szyfrujący pliki XML, zaszyfrowany kluczem publicznym Ministerstwa Finansów."
        ),
    ]


class PartUploadRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    ordinalNumber: Annotated[
        int, Field(description="Numer sekwencyjny części pliku paczki.", ge=1)
    ]
    method: Annotated[
        str,
        Field(
            description="Metoda HTTP, której należy użyć przy wysyłce części pliku paczki."
        ),
    ]
    url: Annotated[
        AnyUrl, Field(description="Adres pod który należy wysłać część pliku paczki.")
    ]
    headers: Annotated[
        dict[str, str],
        Field(
            description="Nagłówki, których należy użyć przy wysyłce części pliku paczki."
        ),
    ]


class PeppolProvider(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    id: Annotated[
        str,
        Field(
            description="Identyfikator dostawcy usług Peppol.",
            max_length=9,
            min_length=9,
            pattern="^P[A-Z]{2}[0-9]{6}$",
        ),
    ]
    name: Annotated[
        str, Field(description="Nazwa dostawcy usług Peppol.", max_length=256)
    ]
    dateCreated: Annotated[
        AwareDatetime,
        Field(description="Data rejestracji dostawcy usług Peppol w systemie."),
    ]


class PermissionsEuEntityDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    fullName: Annotated[
        str, Field(description="Pełna nazwa podmiotu unijnego.", max_length=100)
    ]
    address: Annotated[
        str, Field(description="Adres podmiotu unijnego.", max_length=512)
    ]


class PermissionsSubjectEntityByFingerprintDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectDetailsType: Annotated[
        Literal["EntityByFingerprint"],
        Field(
            description="Typ danych podmiotu uprawnionego.\n| Wartość | Opis |\n| --- | --- |\n| EntityByFingerprint | Podmiot identyfikowany odciskiem palca pieczęci kwalifikowanej. |\n"
        ),
    ]
    fullName: Annotated[str, Field(description="Pełna nazwa podmiotu.", max_length=100)]
    address: Annotated[
        str | None, Field(description="Adres podmiotu.", max_length=512)
    ] = None


class PermissionsSubjectEntityByIdentifierDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectDetailsType: Annotated[
        Literal["EntityByIdentifier"],
        Field(
            description="Typ danych podmiotu uprawnionego.\n| Wartość | Opis |\n| --- | --- |\n| EntityByIdentifier | Podmiot identyfikowany numerem NIP. |\n"
        ),
    ]
    fullName: Annotated[str, Field(description="Pełna nazwa podmiotu.", max_length=100)]


class PermissionsSubjectEntityDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectDetailsType: Annotated[
        Literal["EntityByIdentifier", "EntityByFingerprint"],
        Field(
            description="Typ danych podmiotu uprawnionego.\n| Wartość | Opis |\n| --- | --- |\n| EntityByIdentifier | Podmiot identyfikowany numerem NIP. |\n| EntityByFingerprint | Podmiot identyfikowany odciskiem palca pieczęci kwalifikowanej. |\n"
        ),
    ]
    fullName: Annotated[str, Field(description="Pełna nazwa podmiotu.", max_length=100)]
    address: Annotated[
        str | None, Field(description="Adres podmiotu.", max_length=512)
    ] = None


class PersonByFingerprintWithoutIdentifierDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    firstName: Annotated[
        str, Field(description="Imię osoby fizycznej.", max_length=30, min_length=2)
    ]
    lastName: Annotated[
        str, Field(description="Nazwisko osoby fizycznej.", max_length=81, min_length=2)
    ]
    birthDate: Annotated[date, Field(description="Data urodzenia osoby fizycznej.")]
    idDocument: Annotated[
        IdDocument, Field(description="Dane dokumentu tożsamości osoby fizycznej.")
    ]


class PersonDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    firstName: Annotated[
        str, Field(description="Imię osoby fizycznej.", max_length=30, min_length=2)
    ]
    lastName: Annotated[
        str, Field(description="Nazwisko osoby fizycznej.", max_length=81, min_length=2)
    ]


class Pesel(RootModel[str]):
    root: Annotated[
        str,
        Field(
            description="11 cyfrowy numer PESEL.",
            max_length=11,
            min_length=11,
            pattern="^\\d{2}(?:0[1-9]|1[0-2]|2[1-9]|3[0-2]|4[1-9]|5[0-2]|6[1-9]|7[0-2]|8[1-9]|9[0-2])\\d{7}$",
        ),
    ]


class QueryCertificatesRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    certificateSerialNumber: Annotated[
        str | None,
        Field(
            description="Numer seryjny certyfikatu. Wyszukiwanie odbywa się na zasadzie dokładnego dopasowania (exact match)."
        ),
    ] = None
    name: Annotated[
        str | None,
        Field(
            description="Nazwa własna certyfikatu. Wyszukiwanie jest częściowe, czyli zwracane są certyfikaty, których nazwa zawiera podany ciąg znaków (contains)."
        ),
    ] = None
    type: Annotated[
        Literal["Authentication", "Offline"] | None,
        Field(
            description="Typ certyfikatu KSeF.\n| Wartość | Opis |\n| --- | --- |\n| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |\n| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |\n"
        ),
    ] = None
    status: Annotated[
        Literal["Active", "Blocked", "Revoked", "Expired"] | None,
        Field(
            description="Status certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Active | Certyfikat jest aktywny i może zostać użyty do uwierzytelnienia lub realizacji operacji w trybie offline (w zależności od typu certyfikatu). |\n| Blocked | Certyfikat został zablokowany i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline.            Status przejściowy do czasu zakończenia procesu unieważniania. |\n| Revoked | Certyfikat został unieważniony i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n| Expired | Certyfikat wygasł i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n"
        ),
    ] = None
    expiresAfter: Annotated[
        AwareDatetime | None,
        Field(description="Filtruje certyfikaty, które wygasają po podanej dacie."),
    ] = None


class QueryPeppolProvidersResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    peppolProviders: Annotated[
        list[PeppolProvider], Field(description="Lista dostawców usług Peppol.")
    ]
    hasMore: Annotated[
        bool,
        Field(description="Flaga informująca o dostępności kolejnej strony wyników."),
    ]


class RetrieveCertificatesListItem(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    certificate: Annotated[
        Base64Str,
        Field(description="Certyfikat w formacie DER, zakodowany w formacie Base64."),
    ]
    certificateName: Annotated[str, Field(description="Nazwa własna certyfikatu.")]
    certificateSerialNumber: Annotated[
        str, Field(description="Numer seryjny certyfikatu.")
    ]
    certificateType: Annotated[
        Literal["Authentication", "Offline"],
        Field(
            description="Typ certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |\n| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |\n"
        ),
    ]


class RetrieveCertificatesRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    certificateSerialNumbers: Annotated[
        list[str],
        Field(
            description="Numery seryjne certyfikatów do pobrania.",
            max_length=10,
            min_length=1,
        ),
    ]


class RetrieveCertificatesResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    certificates: Annotated[
        list[RetrieveCertificatesListItem], Field(description="Pobrane certyfikaty.")
    ]


class RetryAfter(RootModel[int]):
    root: Annotated[
        int,
        Field(
            description="Liczba sekund po których można ponowić żądanie.", examples=[30]
        ),
    ]


class RevokeCertificateRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    revocationReason: Annotated[
        Literal["Unspecified", "Superseded", "KeyCompromise"] | None,
        Field(
            description="Powód unieważnienia certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Unspecified | Nieokreślony. |\n| Superseded | Certyfikat został zastąpiony przez inny. |\n| KeyCompromise | Klucz prywatny powiązany z certyfikatem został skompromitowany. |\n"
        ),
    ] = None


class SendInvoiceResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    referenceNumber: Annotated[
        str,
        Field(description="Numer referencyjny faktury.", max_length=36, min_length=36),
    ]


class SessionType(RootModel[Literal["Online", "Batch"]]):
    root: Annotated[
        Literal["Online", "Batch"],
        Field(
            description="| Wartość | Opis |\n| --- | --- |\n| Online | Wysyłka interaktywna (pojedyncze faktury). |\n| Batch | Wysyłka wsadowa (paczka faktur). |\n"
        ),
    ]


class SortOrder(RootModel[Literal["Asc", "Desc"]]):
    root: Annotated[
        Literal["Asc", "Desc"],
        Field(
            description="| Wartość | Opis |\n| --- | --- |\n| Asc | Sortowanie rosnąco. |\n| Desc | Sortowanie malejąco. |\n"
        ),
    ]


class StatusInfo(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    code: Annotated[int, Field(description="Kod statusu")]
    description: Annotated[str, Field(description="Opis statusu", min_length=1)]
    details: Annotated[
        list[str] | None, Field(description="Dodatkowe szczegóły statusu")
    ] = None


class TokenAuthorIdentifierTypeIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "Pesel", "Fingerprint"],
        Field(
            description="Typ identyfikatora.\n| Wartość | Opis |\n| --- | --- |\n| Nip | NIP. |\n| Pesel | PESEL. |\n| Fingerprint | Odcisk palca certyfikatu. |\n"
        ),
    ]
    value: Annotated[str, Field(description="Wartość identyfikatora.")]


class TokenContextIdentifierTypeIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "InternalId", "NipVatUe", "PeppolId"],
        Field(
            description="Typ identyfikatora.\n| Wartość | Opis |\n| --- | --- |\n| Nip | NIP. |\n| InternalId | Identyfikator wewnętrzny. |\n| NipVatUe | Dwuczłonowy identyfikator składający się z numeru NIP i numeru VAT-UE: `{nip}-{vat_ue}`. |\n| PeppolId | Identyfikator dostawcy usług Peppol. |\n"
        ),
    ]
    value: Annotated[str, Field(description="Wartość identyfikatora.")]


class TokenInfo(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    token: Annotated[str, Field(description="Token w formacie JWT.")]
    validUntil: Annotated[AwareDatetime, Field(description="Data ważności tokena.")]


class TokenStatusResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    referenceNumber: Annotated[
        str,
        Field(
            description="Numer referencyjny tokena KSeF.", max_length=36, min_length=36
        ),
    ]
    authorIdentifier: Annotated[
        TokenAuthorIdentifierTypeIdentifier,
        Field(description="Identyfikator osoby która wygenerowała token."),
    ]
    contextIdentifier: Annotated[
        TokenContextIdentifierTypeIdentifier,
        Field(
            description="Identyfikator kontekstu, w którym został wygenerowany token i do którego daje dostęp."
        ),
    ]
    description: Annotated[
        str, Field(description="Opis tokena.", max_length=256, min_length=5)
    ]
    requestedPermissions: Annotated[
        list[
            Literal[
                "InvoiceRead",
                "InvoiceWrite",
                "CredentialsRead",
                "CredentialsManage",
                "SubunitManage",
                "EnforcementOperations",
            ]
        ],
        Field(description="Uprawnienia przypisane tokenowi."),
    ]
    dateCreated: Annotated[
        AwareDatetime, Field(description="Data i czas utworzenia tokena.")
    ]
    lastUseDate: Annotated[
        AwareDatetime | None, Field(description="Data ostatniego użycia tokena.")
    ] = None
    status: Annotated[
        Literal["Pending", "Active", "Revoking", "Revoked", "Failed"],
        Field(
            description="Status tokena.\n| Wartość | Opis |\n| --- | --- |\n| Pending | Token został utworzony ale jest jeszcze w trakcie aktywacji i nadawania uprawnień. Nie może być jeszcze wykorzystywany do uwierzytelniania. |\n| Active | Token jest aktywny i może być wykorzystywany do uwierzytelniania. |\n| Revoking | Token jest w trakcie unieważniania. Nie może już być wykorzystywany do uwierzytelniania. |\n| Revoked | Token został unieważniony i nie może być wykorzystywany do uwierzytelniania. |\n| Failed | Nie udało się aktywować tokena. Należy wygenerować nowy token, obecny nie może być wykorzystywany do uwierzytelniania. |\n"
        ),
    ]
    statusDetails: Annotated[
        list[str] | None,
        Field(
            description="Dodatkowe informacje na temat statusu, zwracane w przypadku błędów."
        ),
    ] = None


class Status(BaseModel):
    code: Annotated[
        int,
        Field(
            description="Kod statusu HTTP odpowiadający błędowi. Zawsze ma wartość 429."
        ),
    ]
    description: Annotated[
        str, Field(description="Opis błędu zgodny z nazwą statusu HTTP.")
    ]
    details: Annotated[
        list[str],
        Field(
            description="Lista szczegółowych informacji opisujących przyczynę przekroczenia limitu żądań oraz wskazówki dotyczące ponowienia żądania."
        ),
    ]


class TooManyRequestsResponse(BaseModel):
    status: Annotated[
        Status,
        Field(
            description="Informacje o błędzie związanym z przekroczeniem limitu żądań."
        ),
    ]


class UpoPageResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    referenceNumber: Annotated[
        str,
        Field(
            description="Numer referencyjny strony UPO.", max_length=36, min_length=36
        ),
    ]
    downloadUrl: Annotated[
        AnyUrl,
        Field(
            description="Adres do pobrania strony UPO. Link generowany jest przy każdym odpytaniu o status. \nDostęp odbywa się metodą `HTTP GET` i <b>nie należy</b> wysyłać tokenu dostępowego. \nLink nie podlega limitom API i wygasa po określonym czasie w `DownloadUrlExpirationDate`.\n\nOdpowiedź HTTP zawiera dodatkowe nagłówki:\n- `x-ms-meta-hash` – skrót SHA-256 dokumentu UPO, zakodowany w formacie Base64."
        ),
    ]
    downloadUrlExpirationDate: Annotated[
        AwareDatetime,
        Field(
            description="Data i godzina wygaśnięcia adresu. Po tej dacie link `DownloadUrl` nie będzie już aktywny."
        ),
    ]


class UpoResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    pages: Annotated[list[UpoPageResponse], Field(description="Lista stron UPO.")]


class AuthenticationChallengeResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    challenge: Annotated[
        str, Field(description="Unikalny challenge.", max_length=36, min_length=36)
    ]
    timestamp: Annotated[
        AwareDatetime, Field(description="Czas wygenerowania challenge-a.")
    ]
    timestampMs: Annotated[
        int,
        Field(
            description="Czas wygenerowania challenge-a w milisekundach od 1 stycznia 1970 roku (Unix timestamp)."
        ),
    ]


class AuthenticationContextIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "InternalId", "NipVatUe", "PeppolId"],
        Field(description="Typ identyfikatora"),
    ]
    value: Annotated[str, Field(description="Wartość identyfikatora")]


class AuthenticationInitResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    referenceNumber: Annotated[
        str,
        Field(
            description="Numer referencyjny sesji uwierzytelnienia.",
            max_length=36,
            min_length=36,
        ),
    ]
    authenticationToken: Annotated[
        TokenInfo, Field(description="Token operacji uwierzytelnienia.")
    ]


class AuthenticationListItem(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    startDate: Annotated[
        AwareDatetime, Field(description="Data rozpoczęcia operacji uwierzytelnienia.")
    ]
    authenticationMethod: Annotated[
        Literal[
            "Token",
            "TrustedProfile",
            "InternalCertificate",
            "QualifiedSignature",
            "QualifiedSeal",
            "PersonalSignature",
            "PeppolSignature",
        ],
        Field(
            description="Metoda uwierzytelnienia.\n| Wartość | Opis |\n| --- | --- |\n| Token | Token KSeF. |\n| TrustedProfile | Profil Zaufany. |\n| InternalCertificate | Certyfikat KSeF. |\n| QualifiedSignature | Podpis kwalifikowany. |\n| QualifiedSeal | Pieczęć kwalifikowana. |\n| PersonalSignature | Podpis osobisty. |\n| PeppolSignature | Podpis dostawcy usług Peppol. |\n"
        ),
    ]
    status: Annotated[
        StatusInfo,
        Field(
            description="Informacje o aktualnym statusie.\n| Code | Description | Details |\n| --- | --- | --- |\n| 100 | Uwierzytelnianie w toku | - |\n| 200 | Uwierzytelnianie zakończone sukcesem | - |\n| 415 | Uwierzytelnianie zakończone niepowodzeniem | Brak przypisanych uprawnień |\n| 425 | Uwierzytelnienie unieważnione  | Uwierzytelnienie i powiązane refresh tokeny zostały unieważnione przez użytkownika |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Nieprawidłowe wyzwanie autoryzacyjne |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Nieprawidłowy token |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Nieprawidłowy czas tokena |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Token unieważniony |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Token nieaktywny |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Nieważny certyfikat |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Błąd weryfikacji łańcucha certyfikatów |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Niezaufany łańcuch certyfikatów |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Certyfikat odwołany |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Niepoprawny certyfikat |\n| 470 | Uwierzytelnianie zakończone niepowodzeniem | Próba wykorzystania metod autoryzacyjnych osoby zmarłej |\n| 480 | Uwierzytelnienie zablokowane | Podejrzenie incydentu bezpieczeństwa. Skontaktuj się z Ministerstwem Finansów przez formularz zgłoszeniowy. |\n| 500 | Nieznany błąd | - |\n| 550 | Operacja została anulowana przez system | Przetwarzanie zostało przerwane z przyczyn wewnętrznych systemu. Spróbuj ponownie |"
        ),
    ]
    isTokenRedeemed: Annotated[
        bool | None,
        Field(
            description="Czy został już wydany refresh token powiązany z danym uwierzytelnieniem."
        ),
    ] = None
    lastTokenRefreshDate: Annotated[
        AwareDatetime | None, Field(description="Data ostatniego odświeżenia tokena.")
    ] = None
    refreshTokenValidUntil: Annotated[
        AwareDatetime | None,
        Field(
            description="Termin ważności refresh tokena (o ile nie zostanie wcześniej unieważniony)."
        ),
    ] = None
    referenceNumber: Annotated[
        str,
        Field(
            description="Numer referencyjny sesji uwierzytelnienia.",
            max_length=36,
            min_length=36,
        ),
    ]
    isCurrent: Annotated[
        bool | None,
        Field(description="Czy sesja jest powiązana z aktualnie używanym tokenem."),
    ] = None


class AuthenticationListResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    continuationToken: Annotated[
        str | None,
        Field(
            description="Token służący do pobrania kolejnej strony wyników. Jeśli jest pusty, to nie ma kolejnych stron."
        ),
    ] = None
    items: Annotated[
        list[AuthenticationListItem], Field(description="Lista sesji uwierzytelniania.")
    ]


class AuthenticationOperationStatusResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    startDate: Annotated[
        AwareDatetime, Field(description="Data rozpoczęcia operacji uwierzytelnienia.")
    ]
    authenticationMethod: Annotated[
        Literal[
            "Token",
            "TrustedProfile",
            "InternalCertificate",
            "QualifiedSignature",
            "QualifiedSeal",
            "PersonalSignature",
            "PeppolSignature",
        ],
        Field(
            description="Metoda uwierzytelnienia.\n| Wartość | Opis |\n| --- | --- |\n| Token | Token KSeF. |\n| TrustedProfile | Profil Zaufany. |\n| InternalCertificate | Certyfikat KSeF. |\n| QualifiedSignature | Podpis kwalifikowany. |\n| QualifiedSeal | Pieczęć kwalifikowana. |\n| PersonalSignature | Podpis osobisty. |\n| PeppolSignature | Podpis dostawcy usług Peppol. |\n"
        ),
    ]
    status: Annotated[
        StatusInfo,
        Field(
            description="Informacje o aktualnym statusie.\n| Code | Description | Details |\n| --- | --- | --- |\n| 100 | Uwierzytelnianie w toku | - |\n| 200 | Uwierzytelnianie zakończone sukcesem | - |\n| 415 | Uwierzytelnianie zakończone niepowodzeniem | Brak przypisanych uprawnień |\n| 425 | Uwierzytelnienie unieważnione  | Uwierzytelnienie i powiązane refresh tokeny zostały unieważnione przez użytkownika |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Nieprawidłowe wyzwanie autoryzacyjne |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Nieprawidłowy token |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Nieprawidłowy czas tokena |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Token unieważniony |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Token nieaktywny |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Nieważny certyfikat |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Błąd weryfikacji łańcucha certyfikatów |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Niezaufany łańcuch certyfikatów |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Certyfikat odwołany |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Niepoprawny certyfikat |\n| 470 | Uwierzytelnianie zakończone niepowodzeniem | Próba wykorzystania metod autoryzacyjnych osoby zmarłej |\n| 480 | Uwierzytelnienie zablokowane | Podejrzenie incydentu bezpieczeństwa. Skontaktuj się z Ministerstwem Finansów przez formularz zgłoszeniowy. |\n| 500 | Nieznany błąd | - |\n| 550 | Operacja została anulowana przez system | Przetwarzanie zostało przerwane z przyczyn wewnętrznych systemu. Spróbuj ponownie |"
        ),
    ]
    isTokenRedeemed: Annotated[
        bool | None,
        Field(
            description="Czy został już wydany refresh token powiązany z danym uwierzytelnieniem."
        ),
    ] = None
    lastTokenRefreshDate: Annotated[
        AwareDatetime | None, Field(description="Data ostatniego odświeżenia tokena.")
    ] = None
    refreshTokenValidUntil: Annotated[
        AwareDatetime | None,
        Field(
            description="Termin ważności refresh tokena (o ile nie zostanie wcześniej unieważniony)."
        ),
    ] = None


class AuthenticationTokenRefreshResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    accessToken: Annotated[
        TokenInfo,
        Field(
            description="Token dostępu, którego należy używać w wywołaniach chronionych zasobów API."
        ),
    ]


class AuthenticationTokensResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    accessToken: Annotated[TokenInfo, Field(description="Token dostępu.")]
    refreshToken: Annotated[
        TokenInfo,
        Field(
            description="Token umożliwiający odświeżenie tokenu dostępu.\n> Więcej informacji:\n> - [Odświeżanie tokena](https://github.com/CIRFMF/ksef-docs/blob/main/uwierzytelnianie.md#5-od%C5%9Bwie%C5%BCenie-tokena-dost%C4%99powego-accesstoken)"
        ),
    ]


class BatchFilePartInfo(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    ordinalNumber: Annotated[
        int, Field(description="Numer sekwencyjny części pliku paczki.", ge=1)
    ]
    fileSize: Annotated[
        int,
        Field(description="Rozmiar zaszyfrowanej części pliku paczki w bajtach.", ge=1),
    ]
    fileHash: Annotated[
        Base64Str,
        Field(
            description="Skrót SHA256 zaszyfrowanej części pliku paczki, zakodowany w formacie Base64.",
            max_length=44,
            min_length=44,
        ),
    ]


class CertificateEnrollmentStatusResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    requestDate: Annotated[
        AwareDatetime, Field(description="Data złożenia wniosku certyfikacyjnego.")
    ]
    status: Annotated[
        StatusInfo,
        Field(
            description="Informacje o aktualnym statusie.\n| Code | Description | Details |\n| --- | --- | --- |\n| 100 | Wniosek przyjęty do realizacji | - |\n| 200 | Wniosek obsłużony (certyfikat wygenerowany) | - |\n| 400 | Wniosek odrzucony | Klucz publiczny został już certyfikowany przez inny podmiot. |\n| 400 | Wniosek odrzucony | Osiągnięto dopuszczalny limit posiadanych certyfikatów. |\n| 500 | Nieznany błąd | - |\n| 550 | Operacja została anulowana przez system | Przetwarzanie zostało przerwane z przyczyn wewnętrznych systemu. Spróbuj ponownie |"
        ),
    ]
    certificateSerialNumber: Annotated[
        str | None,
        Field(
            description="Numer seryjny wygenerowanego certyfikatu (w formacie szesnastkowym). \nZwracany w przypadku prawidłowego przeprocesowania wniosku certyfikacyjnego."
        ),
    ] = None


class CertificateSubjectIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "Pesel", "Fingerprint"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=64, min_length=10)
    ]


class EffectiveContextLimits(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    onlineSession: Annotated[
        OnlineSessionEffectiveContextLimits,
        Field(description="Limity dla sesji interaktywnych."),
    ]
    batchSession: Annotated[
        BatchSessionEffectiveContextLimits,
        Field(description="Limity dla sesji wsadowych."),
    ]


class EffectiveSubjectLimits(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    enrollment: EnrollmentEffectiveSubjectLimits | None = None
    certificate: CertificateEffectiveSubjectLimits | None = None


class EnrollCertificateRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    certificateName: Annotated[
        str,
        Field(
            description="Nazwa własna certyfikatu.",
            max_length=100,
            min_length=5,
            pattern="^[a-zA-Z0-9_\\-\\ ąćęłńóśźżĄĆĘŁŃÓŚŹŻ]+$",
        ),
    ]
    certificateType: Annotated[
        Literal["Authentication", "Offline"],
        Field(
            description="Typ certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |\n| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |\n"
        ),
    ]
    csr: Annotated[
        Base64Str,
        Field(
            description="Wniosek certyfikacyjny PKCS#10 (CSR) w formacie DER, zakodowany w formacie Base64."
        ),
    ]
    validFrom: Annotated[
        AwareDatetime | None,
        Field(
            description="Data rozpoczęcia ważności certyfikatu.\nJeśli nie zostanie podana, certyfikat będzie ważny od momentu jego wystawienia."
        ),
    ] = None


class EnrollCertificateResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    referenceNumber: Annotated[
        str,
        Field(
            description="Numer referencyjny wniosku certyfikacyjnego.",
            max_length=36,
            min_length=36,
        ),
    ]
    timestamp: Annotated[
        AwareDatetime, Field(description="Data złożenia wniosku certyfikacyjnego.")
    ]


class EntityAuthorizationPermissionsSubjectIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "PeppolId"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=10, min_length=9)
    ]


class EntityAuthorizationsAuthorIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "Pesel", "Fingerprint"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=64, min_length=10)
    ]


class EntityAuthorizationsAuthorizedEntityIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "PeppolId"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=10, min_length=9)
    ]


class EntityAuthorizationsAuthorizingEntityIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[Literal["Nip"], Field(description="Typ identyfikatora.")]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=10, min_length=10)
    ]


class EntityPermission(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["InvoiceWrite", "InvoiceRead"], Field(description="Rodzaj uprawnienia.")
    ]
    canDelegate: Annotated[
        bool | None,
        Field(
            description="Flaga pozwalająca na pośrednie przekazywanie danego uprawnienia"
        ),
    ] = None


class EntityPermissionsSubjectIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[Literal["Nip"], Field(description="Typ identyfikatora.")]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=10, min_length=10)
    ]


class EntityPermissionsSubordinateEntityIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[Literal["Nip"], Field(description="Typ identyfikatora.")]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=10, min_length=10)
    ]


class EntityRolesParentEntityIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[Literal["Nip"], Field(description="Typ identyfikatora.")]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=10, min_length=10)
    ]


class EuEntityAdministrationPermissionsContextIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[Literal["NipVatUe"], Field(description="Typ identyfikatora.")]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=25, min_length=15)
    ]


class EuEntityAdministrationPermissionsSubjectIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[Literal["Fingerprint"], Field(description="Typ identyfikatora.")]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=64, min_length=64)
    ]


class EuEntityPermissionsAuthorIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "Pesel", "Fingerprint"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=64, min_length=10)
    ]


class EuEntityPermissionsSubjectIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[Literal["Fingerprint"], Field(description="Typ identyfikatora.")]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=64, min_length=64)
    ]


class ExceptionInfo(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    exceptionDetailList: list[ExceptionDetails] | None = None
    referenceNumber: Annotated[
        str | None,
        Field(description="Numer referencyjny.", max_length=36, min_length=36),
    ] = None
    serviceCode: str | None = None
    serviceCtx: str | None = None
    serviceName: str | None = None
    timestamp: AwareDatetime | None = None


class ExceptionResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    exception: ExceptionInfo | None = None


class ExportInvoicesResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    referenceNumber: Annotated[
        str,
        Field(
            description="Numer referencyjny eksportu faktur.",
            max_length=36,
            min_length=36,
        ),
    ]


class GenerateTokenRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    permissions: Annotated[
        list[
            Literal[
                "InvoiceRead",
                "InvoiceWrite",
                "CredentialsRead",
                "CredentialsManage",
                "SubunitManage",
                "EnforcementOperations",
            ]
        ],
        Field(description="Uprawnienia przypisane tokenowi."),
    ]
    description: Annotated[
        str, Field(description="Opis tokena.", max_length=256, min_length=5)
    ]


class GenerateTokenResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    referenceNumber: Annotated[
        str,
        Field(
            description="Numer referencyjny tokena KSeF.", max_length=36, min_length=36
        ),
    ]
    token: Annotated[str, Field(description="Token KSeF.", max_length=160)]


class IndirectPermissionsSubjectIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "Pesel", "Fingerprint"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=64, min_length=10)
    ]


class IndirectPermissionsTargetIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "AllPartners", "InternalId"],
        Field(description="Typ identyfikatora."),
    ]
    value: Annotated[
        str | None,
        Field(
            description="Wartość identyfikatora. W przypadku typu AllPartners należy pozostawić puste. W pozostałych przypadkach pole jest wymagane.",
            max_length=16,
            min_length=10,
        ),
    ] = None


class InitTokenAuthenticationRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    challenge: Annotated[
        str,
        Field(
            description="Wygenerowany wcześniej challenge.",
            max_length=36,
            min_length=36,
        ),
    ]
    contextIdentifier: Annotated[
        AuthenticationContextIdentifier,
        Field(
            description="Identyfikator kontekstu do którego następuje uwierzytelnienie."
        ),
    ]
    encryptedToken: Annotated[
        Base64Str,
        Field(
            description="Zaszyfrowany token wraz z timestampem z challenge'a, w postaci `token|timestamp`, zakodowany w formacie Base64."
        ),
    ]
    authorizationPolicy: Annotated[
        AuthorizationPolicy | None,
        Field(
            description="Polityka autoryzacji żądań przy każdym użyciu tokena dostępu."
        ),
    ] = None


class InvoiceMetadataAuthorizedSubject(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    nip: Annotated[
        str,
        Field(
            description="Nip podmiotu upoważnionego",
            max_length=10,
            min_length=10,
            pattern="^[1-9]((\\d[1-9])|([1-9]\\d))\\d{7}$",
        ),
    ]
    name: Annotated[
        str | None, Field(description="Nazwa podmiotu upoważnionego.", max_length=512)
    ] = None
    role: Annotated[
        int,
        Field(
            description="Rola podmiotu upoważnionego.\n| Wartość | Opis |\n| ---- | --- |\n| 1 | Organ egzekucyjny - w przypadku, o którym mowa w art. 106c pkt 1 ustawy |\n| 2 | Komornik sądowy - w przypadku, o którym mowa w art. 106c pkt 2 ustawy |\n| 3 | Przedstawiciel podatkowy - w przypadku gdy na fakturze występują dane przedstawiciela podatkowego, o którym mowa w art. 18a - 18d ustawy |"
        ),
    ]


class InvoiceMetadataBuyer(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    identifier: Annotated[
        InvoiceMetadataBuyerIdentifier,
        Field(
            description="Identyfikator nabywcy.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| VatUe | Identyfikator VAT UE podmiotu unijnego |\n| Other | Inny identyfikator|\n| None  | Brak identyfikatora nabywcy |"
        ),
    ]
    name: Annotated[str | None, Field(description="Nazwa nabywcy.", max_length=512)] = (
        None
    )


class InvoiceMetadataSeller(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    nip: Annotated[
        str,
        Field(
            description="Nip sprzedawcy.",
            max_length=10,
            min_length=10,
            pattern="^[1-9]((\\d[1-9])|([1-9]\\d))\\d{7}$",
        ),
    ]
    name: Annotated[
        str | None, Field(description="Nazwa sprzedawcy.", max_length=512)
    ] = None


class InvoiceMetadataThirdSubjectIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "InternalId", "VatUe", "Other", "None"],
        Field(
            description="Typ identyfikatora podmiotu trzeciego.\n| Wartość | Opis |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| InternalId | Identyfikator wewnętrzny, składający się z numeru NIP i 5 cyfr. |\n| VatUe | Identyfikator VAT UE podmiotu unijnego |\n| Other | Inny identyfikator |\n| None | Brak identyfikatora podmiotu trzeciego |\n"
        ),
    ]
    value: Annotated[
        str | None,
        Field(description="Wartość identyfikatora podmiotu trzeciego.", max_length=50),
    ] = None


class InvoicePackagePart(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    ordinalNumber: Annotated[
        int, Field(description="Numer sekwencyjny pliku części paczki.", ge=1)
    ]
    partName: Annotated[
        str, Field(description="Nazwa pliku części paczki.", max_length=100)
    ]
    method: Annotated[
        str, Field(description="Metoda HTTP, której należy użyć przy pobieraniu pliku.")
    ]
    url: Annotated[
        AnyUrl,
        Field(
            description="Adres URL, pod który należy wysłać żądanie pobrania części paczki.\nLink jest generowany dynamicznie w momencie odpytania o status operacji eksportu.\nNie podlega limitom API i nie wymaga przesyłania tokenu dostępowego przy pobraniu.\n\nOdpowiedź HTTP zawiera dodatkowe nagłówki:\n- `x-ms-meta-hash` – zaszyfrowanej części paczki, zakodowany w formacie Base64."
        ),
    ]
    partSize: Annotated[
        int, Field(description="Rozmiar części paczki w bajtach.", ge=1)
    ]
    partHash: Annotated[
        Base64Str,
        Field(
            description="Skrót SHA256 pliku części paczki, zakodowany w formacie Base64.",
            max_length=44,
            min_length=44,
        ),
    ]
    encryptedPartSize: Annotated[
        int, Field(description="Rozmiar zaszyfrowanej części paczki w bajtach.", ge=1)
    ]
    encryptedPartHash: Annotated[
        Base64Str,
        Field(
            description="Skrót SHA256 zaszyfrowanej części paczki, zakodowany w formacie Base64.",
            max_length=44,
            min_length=44,
        ),
    ]
    expirationDate: Annotated[
        AwareDatetime,
        Field(
            description="Data i godzina wygaśnięcia linku umożliwiającego pobranie części paczki.\nPo upływie tego momentu link przestaje być aktywny."
        ),
    ]


class InvoiceQueryDateRange(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    dateType: Annotated[
        Literal["Issue", "Invoicing", "PermanentStorage"],
        Field(
            description="Typ daty, według której ma być zastosowany zakres.\n| Wartość | Opis |\n| --- | --- |\n| Issue | Data wystawienia faktury. |\n| Invoicing | Data przyjęcia faktury w systemie KSeF (do dalszego przetwarzania). |\n| PermanentStorage | Data trwałego zapisu faktury w repozytorium systemu KSeF. |\n"
        ),
    ]
    from_: Annotated[
        AwareDatetime,
        Field(
            alias="from",
            description="Data początkowa zakresu w formacie ISO-8601 np. 2026-01-03T13:45:00+00:00.",
        ),
    ]
    to: Annotated[
        AwareDatetime | None,
        Field(
            description="Data końcowa zakresu w formacie ISO-8601. Jeśli nie zostanie podana, przyjmowana jest bieżąca data i czas w UTC."
        ),
    ] = None
    restrictToPermanentStorageHwmDate: Annotated[
        bool | None,
        Field(
            description="Określa, czy system ma ograniczyć filtrowanie (zakres dateRange.to) do wartości `PermanentStorageHwmDate`.\n\n* Dotyczy wyłącznie zapytań z `dateType = PermanentStorage`,  \n* Gdy `true`, system ogranicza filtrowanie tak, aby wartość `dateRange.to` nie przekraczała wartości `PermanentStorageHwmDate`,  \n* Gdy `null` lub `false`, filtrowanie może wykraczać poza `PermanentStorageHwmDate`."
        ),
    ] = None


class InvoiceQueryFilters(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectType: Annotated[
        Literal["Subject1", "Subject2", "Subject3", "SubjectAuthorized"],
        Field(
            description="Typ podmiotu, którego dotyczą kryteria filtrowania metadanych faktur.\nOkreśla kontekst, w jakim przeszukiwane są dane.\n| Wartość | Opis |\n| --- | --- |\n| Subject1 | Podmiot 1 - sprzedawca |\n| Subject2 | Podmiot 2 - nabywca |\n| Subject3 | Podmiot 3 |\n| SubjectAuthorized | Podmiot upoważniony |\n"
        ),
    ]
    dateRange: Annotated[
        InvoiceQueryDateRange,
        Field(
            description="Typ i zakres dat, według którego filtrowane są faktury.\nMaksymalny dozwolony okres wynosi 3 miesiące w strefie UTC lub w strefie Europe/Warsaw (WAW).\n            \nFormat daty:\n * Daty muszą być przekazane w formacie ISO 8601, np. `yyyy-MM-ddTHH:mm:ss`.\n * Dopuszczalne są następujące warianty:\n   - z sufiksem `Z` (czas UTC),\n   - z jawnym offsetem, np. `+01:00`, `+03:00`,\n   - bez offsetu (interpretowane jako czas lokalny strefy Europe/Warsaw).\n   \nZasady interpretacji dat:\n * Daty z sufiksem `Z` są traktowane jako czas UTC.\n * Daty bez jawnie podanego offsetu są interpretowane jako czas lokalny strefy Europe/Warsaw (WAW).\n * Daty z jawnym offsetem (`+01:00`, `+08:00` itd.) są przeliczane z uwzględnieniem offsetu, a następnie walidowane w strefie UTC lub w strefie Europe/Warsaw (WAW)."
        ),
    ]
    ksefNumber: Annotated[
        str | None,
        Field(
            description="Numer KSeF faktury (exact match).",
            max_length=36,
            min_length=35,
            pattern="^([1-9](\\d[1-9]|[1-9]\\d)\\d{7})-(20[2-9][0-9]|2[1-9]\\d{2}|[3-9]\\d{3})(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])-([0-9A-F]{6})-?([0-9A-F]{6})-([0-9A-F]{2})$",
        ),
    ] = None
    invoiceNumber: Annotated[
        str | None,
        Field(
            description="Numer faktury nadany przez wystawcę (exact match).",
            max_length=256,
        ),
    ] = None
    amount: Annotated[
        InvoiceQueryAmount | None,
        Field(description="Filtr kwotowy – brutto, netto lub VAT (z wartością)."),
    ] = None
    sellerNip: Annotated[
        str | None,
        Field(
            description="Nip sprzedawcy (exact match).",
            max_length=10,
            min_length=10,
            pattern="^[1-9]((\\d[1-9])|([1-9]\\d))\\d{7}$",
        ),
    ] = None
    buyerIdentifier: Annotated[
        InvoiceQueryBuyerIdentifier | None,
        Field(
            description="Identyfikator nabywcy.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| VatUe | Identyfikator VAT UE podmiotu unijnego. |\n| Other | Inny identyfikator|\n| None  | Brak identyfikatora nabywcy |"
        ),
    ] = None
    currencyCodes: Annotated[
        list[
            Literal[
                "AED",
                "AFN",
                "ALL",
                "AMD",
                "ANG",
                "AOA",
                "ARS",
                "AUD",
                "AWG",
                "AZN",
                "BAM",
                "BBD",
                "BDT",
                "BGN",
                "BHD",
                "BIF",
                "BMD",
                "BND",
                "BOB",
                "BOV",
                "BRL",
                "BSD",
                "BTN",
                "BWP",
                "BYN",
                "BZD",
                "CAD",
                "CDF",
                "CHE",
                "CHF",
                "CHW",
                "CLF",
                "CLP",
                "CNY",
                "COP",
                "COU",
                "CRC",
                "CUC",
                "CUP",
                "CVE",
                "CZK",
                "DJF",
                "DKK",
                "DOP",
                "DZD",
                "EGP",
                "ERN",
                "ETB",
                "EUR",
                "FJD",
                "FKP",
                "GBP",
                "GEL",
                "GGP",
                "GHS",
                "GIP",
                "GMD",
                "GNF",
                "GTQ",
                "GYD",
                "HKD",
                "HNL",
                "HRK",
                "HTG",
                "HUF",
                "IDR",
                "ILS",
                "IMP",
                "INR",
                "IQD",
                "IRR",
                "ISK",
                "JEP",
                "JMD",
                "JOD",
                "JPY",
                "KES",
                "KGS",
                "KHR",
                "KMF",
                "KPW",
                "KRW",
                "KWD",
                "KYD",
                "KZT",
                "LAK",
                "LBP",
                "LKR",
                "LRD",
                "LSL",
                "LYD",
                "MAD",
                "MDL",
                "MGA",
                "MKD",
                "MMK",
                "MNT",
                "MOP",
                "MRU",
                "MUR",
                "MVR",
                "MWK",
                "MXN",
                "MXV",
                "MYR",
                "MZN",
                "NAD",
                "NGN",
                "NIO",
                "NOK",
                "NPR",
                "NZD",
                "OMR",
                "PAB",
                "PEN",
                "PGK",
                "PHP",
                "PKR",
                "PLN",
                "PYG",
                "QAR",
                "RON",
                "RSD",
                "RUB",
                "RWF",
                "SAR",
                "SBD",
                "SCR",
                "SDG",
                "SEK",
                "SGD",
                "SHP",
                "SLL",
                "SOS",
                "SRD",
                "SSP",
                "STN",
                "SVC",
                "SYP",
                "SZL",
                "THB",
                "TJS",
                "TMT",
                "TND",
                "TOP",
                "TRY",
                "TTD",
                "TWD",
                "TZS",
                "UAH",
                "UGX",
                "USD",
                "USN",
                "UYI",
                "UYU",
                "UYW",
                "UZS",
                "VES",
                "VND",
                "VUV",
                "WST",
                "XAF",
                "XAG",
                "XAU",
                "XBA",
                "XBB",
                "XBC",
                "XBD",
                "XCD",
                "XCG",
                "XDR",
                "XOF",
                "XPD",
                "XPF",
                "XPT",
                "XSU",
                "XUA",
                "XXX",
                "YER",
                "ZAR",
                "ZMW",
                "ZWL",
            ]
        ]
        | None,
        Field(description="Kody walut."),
    ] = None
    invoicingMode: Annotated[
        Literal["Online", "Offline"] | None,
        Field(description="Tryb wystawienia faktury: online lub offline."),
    ] = None
    isSelfInvoicing: Annotated[
        bool | None,
        Field(description="Czy faktura została wystawiona w trybie samofakturowania."),
    ] = None
    formType: Annotated[
        Literal["FA", "PEF", "RR"] | None,
        Field(
            description="Typ dokumentu.\n| Wartość | Opis |\n| --- | --- |\n| FA | Faktura VAT |\n| PEF | Faktura PEF |\n| RR | Faktura RR |\n"
        ),
    ] = None
    invoiceTypes: Annotated[
        list[
            Literal[
                "Vat",
                "Zal",
                "Kor",
                "Roz",
                "Upr",
                "KorZal",
                "KorRoz",
                "VatPef",
                "VatPefSp",
                "KorPef",
                "VatRr",
                "KorVatRr",
            ]
        ]
        | None,
        Field(
            description="Rodzaje faktur.\n| Wartość | Opis |\n| --- | --- |\n| Vat | (FA) Podstawowa |\n| Zal | (FA) Zaliczkowa |\n| Kor | (FA) Korygująca |\n| Roz | (FA) Rozliczeniowa |\n| Upr | (FA) Uproszczona |\n| KorZal | (FA) Korygująca fakturę zaliczkową |\n| KorRoz | (FA) Korygująca fakturę rozliczeniową |\n| VatPef | (PEF) Podstawowa |\n| VatPefSp | (PEF) Specjalizowana |\n| KorPef | (PEF) Korygująca |\n| VatRr | (RR) Podstawowa |\n| KorVatRr | (RR) Korygująca |\n"
        ),
    ] = None
    hasAttachment: Annotated[
        bool | None, Field(description="Czy faktura ma załącznik.")
    ] = None


class OpenBatchSessionResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    referenceNumber: Annotated[
        str,
        Field(description="Numer referencyjny sesji.", max_length=36, min_length=36),
    ]
    partUploadRequests: Annotated[
        list[PartUploadRequest],
        Field(
            description="Dane wymagane do poprawnego przesłania poszczególnych części pliku paczki faktur.\n\nKażdą część pliku paczki zadeklarowaną w <b>fileParts</b> należy przesłać zgodnie z odpowiadającym jej obiektem w <b>partUploadRequests</b>.\nŁącznikiem pomiędzy deklaracją a instrukcją wysyłki jest pole <b>ordinalNumber</b>.\n\nDla każdej części należy:\n* zastosować metodę HTTP wskazaną w <b>method</b>,\n* ustawić adres z <b>url</b>,\n* dołączyć nagłówki z <b>headers</b>,\n* dołączyć treść części pliku w korpusie żądania.\n\n`Uwaga: nie należy dodawać do nagłówków token dostępu (accessToken).`\n \nKażdą część przesyła się oddzielnym żądaniem HTTP.Zwracane kody odpowiedzi:\n * <b>201</b> – poprawne przyjęcie pliku,\n * <b>400</b> – błędne dane,\n * <b>401</b> – nieprawidłowe uwierzytelnienie,\n * <b>403</b> – brak uprawnień do zapisu (np.upłynął czas na zapis)."
        ),
    ]


class OpenOnlineSessionResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    referenceNumber: Annotated[
        str,
        Field(description="Numer referencyjny sesji.", max_length=36, min_length=36),
    ]
    validUntil: Annotated[
        AwareDatetime,
        Field(
            description="Termin ważności sesji. Po jego upływie sesja zostanie automatycznie zamknięta."
        ),
    ]


class PermissionsOperationResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    referenceNumber: Annotated[
        str,
        Field(
            description="Numer referencyjny operacji nadania lub odbierania uprawnień.",
            max_length=36,
            min_length=36,
        ),
    ]


class PermissionsOperationStatusResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    status: Annotated[
        StatusInfo,
        Field(
            description="Informacje o aktualnym statusie.\n| Code | Description | Details |\n| --- | --- | --- |\n| 100 | Operacja przyjęta do realizacji | - |\n| 200 | Operacja zakończona sukcesem | - |\n| 400 | Operacja zakończona niepowodzeniem | - |\n| 410 | Podane identyfikatory są niezgodne lub pozostają w niewłaściwej relacji | - |\n| 420 | Użyte poświadczenia nie mają uprawnień do wykonania tej operacji | - |\n| 430 | Kontekst identyfikatora nie odpowiada wymaganej roli lub uprawnieniom | - |\n| 440 | Operacja niedozwolona dla wskazanych powiązań identyfikatorów | - |\n| 450 | Operacja niedozwolona dla wskazanego identyfikatora lub jego typu | - |\n| 500 | Nieznany błąd | - |\n| 550 | Operacja została anulowana przez system | Przetwarzanie zostało przerwane z przyczyn wewnętrznych systemu. Spróbuj ponownie później. |"
        ),
    ]


class PersonIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[Literal["Pesel", "Nip"], Field(description="Typ identyfikatora.")]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=11, min_length=10)
    ]


class PersonPermissionsAuthorIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "Pesel", "Fingerprint", "System"],
        Field(description="Typ identyfikatora."),
    ]
    value: Annotated[
        str | None,
        Field(
            description="Wartość identyfikatora. W przypadku typu System należy pozostawić puste. W pozostałych przypadkach pole jest wymagane.",
            max_length=64,
            min_length=10,
        ),
    ] = None


class PersonPermissionsAuthorizedIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "Pesel", "Fingerprint"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=64, min_length=10)
    ]


class PersonPermissionsContextIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "InternalId"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=16, min_length=10)
    ]


class PersonPermissionsSubjectIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "Pesel", "Fingerprint"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=64, min_length=10)
    ]


class PersonPermissionsTargetIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "AllPartners", "InternalId"],
        Field(description="Typ identyfikatora."),
    ]
    value: Annotated[
        str | None,
        Field(
            description="Wartość identyfikatora. W przypadku typu AllPartners należy pozostawić puste. W pozostałych przypadkach pole jest wymagane.",
            max_length=16,
            min_length=10,
        ),
    ] = None


class PersonalPermissionsAuthorizedIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "Pesel", "Fingerprint"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=64, min_length=10)
    ]


class PersonalPermissionsContextIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "InternalId"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=16, min_length=10)
    ]


class PersonalPermissionsTargetIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "AllPartners", "InternalId"],
        Field(description="Typ identyfikatora."),
    ]
    value: Annotated[
        str | None,
        Field(
            description="Wartość identyfikatora. W przypadku typu AllPartners należy pozostawić puste. W pozostałych przypadkach pole jest wymagane.",
            max_length=16,
            min_length=10,
        ),
    ] = None


class PublicKeyCertificate(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    certificate: Annotated[
        Base64Str,
        Field(
            description="Certyfikat klucza publicznego w formacie DER, zakodowany w formacie Base64."
        ),
    ]
    validFrom: Annotated[
        AwareDatetime, Field(description="Data początku obowiązywania certyfikatu.")
    ]
    validTo: Annotated[
        AwareDatetime, Field(description="Data końca obowiązywania certyfikatu.")
    ]
    usage: Annotated[
        list[Literal["KsefTokenEncryption", "SymmetricKeyEncryption"]],
        Field(
            description="Operacje do których może być używany certyfikat.\n| Wartość | Opis |\n| --- | --- |\n| KsefTokenEncryption | Szyfrowanie tokenów KSeF przesyłanych w trakcie procesu uwierzytelniania. |\n| SymmetricKeyEncryption | Szyfrowanie klucza symetrycznego wykorzystywanego do szyfrowania przesyłanych faktur. |\n"
        ),
    ]


class QueryTokensResponseItem(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    referenceNumber: Annotated[
        str,
        Field(
            description="Numer referencyjny tokena KSeF.", max_length=36, min_length=36
        ),
    ]
    authorIdentifier: Annotated[
        TokenAuthorIdentifierTypeIdentifier,
        Field(description="Identyfikator osoby która wygenerowała token."),
    ]
    contextIdentifier: Annotated[
        TokenContextIdentifierTypeIdentifier,
        Field(
            description="Identyfikator kontekstu, w którym został wygenerowany token i do którego daje dostęp."
        ),
    ]
    description: Annotated[
        str, Field(description="Opis tokena.", max_length=256, min_length=5)
    ]
    requestedPermissions: Annotated[
        list[
            Literal[
                "InvoiceRead",
                "InvoiceWrite",
                "CredentialsRead",
                "CredentialsManage",
                "SubunitManage",
                "EnforcementOperations",
            ]
        ],
        Field(description="Uprawnienia przypisane tokenowi."),
    ]
    dateCreated: Annotated[
        AwareDatetime, Field(description="Data i czas utworzenia tokena.")
    ]
    lastUseDate: Annotated[
        AwareDatetime | None, Field(description="Data ostatniego użycia tokena.")
    ] = None
    status: Annotated[
        Literal["Pending", "Active", "Revoking", "Revoked", "Failed"],
        Field(
            description="Status tokena.\n| Wartość | Opis |\n| --- | --- |\n| Pending | Token został utworzony ale jest jeszcze w trakcie aktywacji i nadawania uprawnień. Nie może być jeszcze wykorzystywany do uwierzytelniania. |\n| Active | Token jest aktywny i może być wykorzystywany do uwierzytelniania. |\n| Revoking | Token jest w trakcie unieważniania. Nie może już być wykorzystywany do uwierzytelniania. |\n| Revoked | Token został unieważniony i nie może być wykorzystywany do uwierzytelniania. |\n| Failed | Nie udało się aktywować tokena. Należy wygenerować nowy token, obecny nie może być wykorzystywany do uwierzytelniania. |\n"
        ),
    ]
    statusDetails: Annotated[
        list[str] | None,
        Field(
            description="Dodatkowe informacje na temat statusu, zwracane w przypadku błędów."
        ),
    ] = None


class SendInvoiceRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    invoiceHash: Annotated[
        Base64Str,
        Field(
            description="Skrót SHA256 oryginalnej faktury, zakodowany w formacie Base64.",
            max_length=44,
            min_length=44,
        ),
    ]
    invoiceSize: Annotated[
        int,
        Field(
            description="Rozmiar oryginalnej faktury w bajtach. Maksymalny rozmiar zależy od limitów ustawionych dla uwierzytelnionego kontekstu.",
            ge=1,
        ),
    ]
    encryptedInvoiceHash: Annotated[
        Base64Str,
        Field(
            description="Skrót SHA256 zaszyfrowanej faktury, zakodowany w formacie Base64.",
            max_length=44,
            min_length=44,
        ),
    ]
    encryptedInvoiceSize: Annotated[
        int, Field(description="Rozmiar zaszyfrowanej faktury w bajtach.", ge=1)
    ]
    encryptedInvoiceContent: Annotated[
        Base64Str,
        Field(
            description="Faktura zaszyfrowana algorytmem AES-256-CBC z dopełnianiem PKCS#7 (kluczem przekazanym przy otwarciu sesji), zakodowana w formacie Base64."
        ),
    ]
    offlineMode: Annotated[
        bool | None,
        Field(
            description='Określa, czy podatnik deklaruje tryb fakturowania "offline" dla przesyłanego dokumentu.'
        ),
    ] = False
    hashOfCorrectedInvoice: Annotated[
        Base64Str | None,
        Field(
            description="Skrót SHA256 korygowanej faktury, zakodowany w formacie Base64. Wymagany przy wysyłaniu korekty technicznej faktury.",
            max_length=44,
            min_length=44,
        ),
    ] = None


class SessionInvoiceStatusResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    ordinalNumber: Annotated[
        int, Field(description="Numer sekwencyjny faktury w ramach sesji.", ge=1)
    ]
    invoiceNumber: Annotated[
        str | None, Field(description="Numer faktury.", max_length=256)
    ] = None
    ksefNumber: Annotated[
        str | None,
        Field(
            description="Numer KSeF.",
            max_length=36,
            min_length=35,
            pattern="^([1-9](\\d[1-9]|[1-9]\\d)\\d{7})-(20[2-9][0-9]|2[1-9]\\d{2}|[3-9]\\d{3})(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])-([0-9A-F]{6})-?([0-9A-F]{6})-([0-9A-F]{2})$",
        ),
    ] = None
    referenceNumber: Annotated[
        str,
        Field(description="Numer referencyjny faktury.", max_length=36, min_length=36),
    ]
    invoiceHash: Annotated[
        Base64Str,
        Field(
            description="Skrót SHA256 faktury, zakodowany w formacie Base64.",
            max_length=44,
            min_length=44,
        ),
    ]
    invoiceFileName: Annotated[
        str | None,
        Field(
            description="Nazwa pliku faktury (zwracana dla faktur wysyłanych wsadowo).",
            max_length=128,
        ),
    ] = None
    acquisitionDate: Annotated[
        AwareDatetime | None, Field(description="Data nadania numeru KSeF.")
    ] = None
    invoicingDate: Annotated[
        AwareDatetime,
        Field(
            description="Data przyjęcia faktury w systemie KSeF (do dalszego przetwarzania)."
        ),
    ]
    permanentStorageDate: Annotated[
        AwareDatetime | None,
        Field(
            description="Data trwałego zapisu faktury w repozytorium KSeF. Wartość uzupełniana asynchronicznie w momencie trwałego zapisu; zawsze późniejsza niż <b>acquisitionDate</b>. Podczas sprawdzania statusu może być jeszcze niedostępna."
        ),
    ] = None
    upoDownloadUrl: Annotated[
        AnyUrl | None,
        Field(
            description="Adres do pobrania UPO. Link generowany jest przy każdym odpytaniu o status. \nDostęp odbywa się metodą `HTTP GET` i <b>nie należy</b> wysyłać tokenu dostępowego. \nLink nie podlega limitom API i wygasa po określonym czasie w `UpoDownloadUrlExpirationDate`.\n\nOdpowiedź HTTP zawiera dodatkowe nagłówki:\n- `x-ms-meta-hash` – skrót SHA-256 dokumentu UPO, zakodowany w formacie Base64."
        ),
    ] = None
    upoDownloadUrlExpirationDate: Annotated[
        AwareDatetime | None,
        Field(
            description="Data i godzina wygaśnięcia adresu. Po tej dacie link `UpoDownloadUrl` nie będzie już aktywny."
        ),
    ] = None
    invoicingMode: Annotated[
        Literal["Online", "Offline"] | None,
        Field(description="Tryb fakturowania (online/offline)."),
    ] = None
    status: Annotated[
        InvoiceStatusInfo,
        Field(
            description="Status faktury.\n\n| Code | Description | Details | Extensions |\n| --- | --- | --- | ---|\n| 100 | Faktura przyjęta do dalszego przetwarzania | - | - |\n| 150 | Trwa przetwarzanie | - | - |\n| 200 | Sukces | - | - |\n| 405 | Przetwarzanie anulowane z powodu błędu sesji | - | - |\n| 410 | Nieprawidłowy zakres uprawnień | - |  - |\n| 415 | Brak możliwości wysyłania faktury z załącznikiem | - | - |\n| 430 | Błąd weryfikacji pliku faktury | - | -  |\n| 435 | Błąd odszyfrowania pliku | - | - |\n| 440 | Duplikat faktury | - | 'originalSessionReferenceNumber', 'originalKsefNumber'|\n| 450 | Błąd weryfikacji semantyki dokumentu faktury | - | - |\n| 500 | Nieznany błąd ({statusCode}) | - | - |\n| 550 | Operacja została anulowana przez system | Przetwarzanie zostało przerwane z przyczyn wewnętrznych systemu. Spróbuj ponownie |- |"
        ),
    ]


class SessionInvoicesResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    continuationToken: Annotated[
        str | None,
        Field(
            description="Token służący do pobrania kolejnej strony wyników. Jeśli jest pusty, to nie ma kolejnych stron."
        ),
    ] = None
    invoices: Annotated[
        list[SessionInvoiceStatusResponse], Field(description="Lista pobranych faktur.")
    ]


class SessionStatusResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    status: Annotated[
        StatusInfo,
        Field(
            description="Informacje o aktualnym statusie.\n            \nSesja wsadowa:\n| Code | Description | Details |\n| --- | --- | --- |\n| 100 | Sesja wsadowa rozpoczęta | - |\n| 150 | Trwa przetwarzanie | - |\n| 200 | Sesja wsadowa przetworzona pomyślnie | - |\n| 405 | Błąd weryfikacji poprawności dostarczonych elementów paczki | - |\n| 415 | Błąd odszyfrowania dostarczonego klucza | - |\n| 420 | Przekroczony limit faktur w sesji | - |\n| 430 | Błąd dekompresji pierwotnego archiwum | - |\n| 435 | Błąd odszyfrowania zaszyfrowanych części archiwum | - |\n| 440 | Sesja anulowana | Przekroczono czas wysyłki |\n| 440 | Sesja anulowana | Nie przesłano faktur |\n| 445 | Błąd weryfikacji, brak poprawnych faktur | - |\n| 500 | Nieznany błąd ({statusCode}) | - |\n\nSesja interaktywna:\n| Code | Description | Details |\n| --- | --- | --- |\n| 100 | Sesja interaktywna otwarta | - |\n| 170 | Sesja interaktywna zamknięta | - |\n| 200 | Sesja interaktywna przetworzona pomyślnie | - |\n| 415 | Błąd odszyfrowania dostarczonego klucza | - |\n| 440 | Sesja anulowana | Nie przesłano faktur |\n| 445 | Błąd weryfikacji, brak poprawnych faktur | - |\n| * | description missing | - |"
        ),
    ]
    dateCreated: Annotated[AwareDatetime, Field(description="Data utworzenia sesji.")]
    dateUpdated: Annotated[
        AwareDatetime, Field(description="Data ostatniej aktywności w ramach sesji.")
    ]
    validUntil: Annotated[
        AwareDatetime | None,
        Field(
            description="Termin ważności sesji. Po jego upływie sesja zostanie automatycznie zamknięta."
        ),
    ] = None
    upo: Annotated[
        UpoResponse | None,
        Field(
            description="Informacja o UPO sesyjnym, zwracana gdy sesja została zamknięta i UPO zostało wygenerowane."
        ),
    ] = None
    invoiceCount: Annotated[
        int | None, Field(description="Liczba przyjętych faktur w ramach sesji.", ge=0)
    ] = None
    successfulInvoiceCount: Annotated[
        int | None,
        Field(
            description="Liczba faktur przeprocesowanych w ramach sesji z sukcesem .",
            ge=0,
        ),
    ] = None
    failedInvoiceCount: Annotated[
        int | None,
        Field(
            description="Liczba faktur przeprocesowanych w ramach sesji z błędem.", ge=0
        ),
    ] = None


class SessionsQueryResponseItem(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    referenceNumber: Annotated[
        str,
        Field(description="Numer referencyjny sesji.", max_length=36, min_length=36),
    ]
    status: Annotated[StatusInfo, Field(description="Status sesji.")]
    dateCreated: Annotated[AwareDatetime, Field(description="Data utworzenia sesji.")]
    dateUpdated: Annotated[
        AwareDatetime, Field(description="Data ostatniej aktywności w ramach sesji.")
    ]
    validUntil: Annotated[
        AwareDatetime | None,
        Field(
            description="Termin ważności sesji. Po jego upływie sesja interaktywna zostanie automatycznie zamknięta."
        ),
    ] = None
    totalInvoiceCount: Annotated[
        int,
        Field(
            description="Łączna liczba faktur (uwzględnia również te w trakcie przetwarzania).",
            ge=0,
        ),
    ]
    successfulInvoiceCount: Annotated[
        int, Field(description="Liczba poprawnie przetworzonych faktur.", ge=0)
    ]
    failedInvoiceCount: Annotated[
        int, Field(description="Liczba błędnie przetworzonych faktur.", ge=0)
    ]


class SubordinateEntityRolesQueryRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subordinateEntityIdentifier: Annotated[
        EntityPermissionsSubordinateEntityIdentifier | None,
        Field(
            description="Identyfikator podmiotu podrzędnego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |"
        ),
    ] = None


class SubordinateRoleSubordinateEntityIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[Literal["Nip"], Field(description="Typ identyfikatora.")]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=10, min_length=10)
    ]


class SubunitPermissionsAuthorIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "Pesel", "Fingerprint"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=64, min_length=10)
    ]


class SubunitPermissionsAuthorizedIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "Pesel", "Fingerprint"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=64, min_length=10)
    ]


class SubunitPermissionsContextIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["InternalId", "Nip"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=16, min_length=10)
    ]


class SubunitPermissionsSubjectIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["Nip", "Pesel", "Fingerprint"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=64, min_length=10)
    ]


class SubunitPermissionsSubunitIdentifier(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    type: Annotated[
        Literal["InternalId", "Nip"], Field(description="Typ identyfikatora.")
    ]
    value: Annotated[
        str, Field(description="Wartość identyfikatora.", max_length=16, min_length=10)
    ]


class BatchFileInfo(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    fileSize: Annotated[
        int,
        Field(
            description="Rozmiar pliku paczki w bajtach. Maksymalny rozmiar paczki to 5GB.",
            ge=1,
            le=5000000000,
        ),
    ]
    fileHash: Annotated[
        Base64Str,
        Field(
            description="Skrót SHA256 pliku paczki, zakodowany w formacie Base64.",
            max_length=44,
            min_length=44,
        ),
    ]
    fileParts: Annotated[
        list[BatchFilePartInfo],
        Field(
            description="Informacje o częściach pliku paczki. Maksymalna liczba części to 50. Maksymalny dozwolony rozmiar części przed zaszyfrowaniem to 100MB.",
            max_length=50,
            min_length=1,
        ),
    ]


class CertificateListItem(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    certificateSerialNumber: Annotated[
        str, Field(description="Numer seryjny certyfikatu (w formacie szesnastkowym).")
    ]
    name: Annotated[str, Field(description="Nazwa własna certyfikatu.", max_length=100)]
    type: Annotated[
        Literal["Authentication", "Offline"],
        Field(
            description="Typ certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |\n| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |\n"
        ),
    ]
    commonName: Annotated[
        str,
        Field(
            description="Nazwa powszechna (CN) podmiotu, dla którego wystawiono certyfikat."
        ),
    ]
    status: Annotated[
        Literal["Active", "Blocked", "Revoked", "Expired"],
        Field(
            description="Status certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Active | Certyfikat jest aktywny i może zostać użyty do uwierzytelnienia lub realizacji operacji w trybie offline (w zależności od typu certyfikatu). |\n| Blocked | Certyfikat został zablokowany i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline.            Status przejściowy do czasu zakończenia procesu unieważniania. |\n| Revoked | Certyfikat został unieważniony i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n| Expired | Certyfikat wygasł i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n"
        ),
    ]
    subjectIdentifier: Annotated[
        CertificateSubjectIdentifier,
        Field(description="Identyfikator podmiotu, dla którego wystawiono certyfikat."),
    ]
    validFrom: Annotated[
        AwareDatetime, Field(description="Data rozpoczęcia ważności certyfikatu.")
    ]
    validTo: Annotated[
        AwareDatetime, Field(description="Data wygaśnięcia certyfikatu.")
    ]
    lastUseDate: Annotated[
        AwareDatetime | None, Field(description="Data ostatniego użycia certyfikatu.")
    ] = None
    requestDate: Annotated[
        AwareDatetime, Field(description="Data złożenia wniosku certyfikacyjnego.")
    ]


class EntityAuthorizationGrant(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    id: Annotated[
        str,
        Field(description="Identyfikator uprawnienia.", max_length=36, min_length=36),
    ]
    authorIdentifier: Annotated[
        EntityAuthorizationsAuthorIdentifier | None,
        Field(
            description="Identyfikator osoby nadającej uprawnienie.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |"
        ),
    ] = None
    authorizedEntityIdentifier: Annotated[
        EntityAuthorizationsAuthorizedEntityIdentifier,
        Field(
            description="Identyfikator podmiotu uprawnionego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| PeppolId | Identyfikator dostawcy usług Peppol |"
        ),
    ]
    authorizingEntityIdentifier: Annotated[
        EntityAuthorizationsAuthorizingEntityIdentifier,
        Field(
            description="Identyfikator podmiotu uprawniającego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |"
        ),
    ]
    authorizationScope: Annotated[
        Literal["SelfInvoicing", "TaxRepresentative", "RRInvoicing", "PefInvoicing"],
        Field(description="Rodzaj uprawnienia."),
    ]
    description: Annotated[
        str, Field(description="Opis uprawnienia.", max_length=256, min_length=5)
    ]
    subjectEntityDetails: Annotated[
        PermissionsSubjectEntityByIdentifierDetails | None,
        Field(description="Dane podmiotu uprawnionego."),
    ] = None
    startDate: Annotated[
        AwareDatetime, Field(description="Data rozpoczęcia obowiązywania uprawnienia.")
    ]


class EntityAuthorizationPermissionsGrantRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectIdentifier: Annotated[
        EntityAuthorizationPermissionsSubjectIdentifier,
        Field(
            description="Identyfikator podmiotu uprawnianego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| PeppolId | Identyfikator dostawcy usług Peppol |"
        ),
    ]
    permission: Annotated[
        Literal["SelfInvoicing", "RRInvoicing", "TaxRepresentative", "PefInvoicing"],
        Field(description="Rodzaj uprawnienia."),
    ]
    description: Annotated[
        str, Field(description="Opis uprawnienia", max_length=256, min_length=5)
    ]
    subjectDetails: Annotated[
        EntityDetails,
        Field(description="Dane podmiotu, któremu nadawane są uprawnienia."),
    ]


class EntityAuthorizationPermissionsQueryRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    authorizingIdentifier: Annotated[
        EntityAuthorizationsAuthorizingEntityIdentifier | None,
        Field(
            description="Identyfikator podmiotu uprawniającego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |"
        ),
    ] = None
    authorizedIdentifier: Annotated[
        EntityAuthorizationsAuthorizedEntityIdentifier | None,
        Field(
            description="Identyfikator podmiotu uprawnionego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| PeppolId | Identyfikator dostawcy usług Peppol |"
        ),
    ] = None
    queryType: Annotated[
        Literal["Granted", "Received"],
        Field(
            description="Typ zapytania.\n| Type | Value |\n| --- | --- |\n| Granted | Uprawnienia nadane innym podmiotom |\n| Received | Uprawnienia otrzymane od innych podmiotów |"
        ),
    ]
    permissionTypes: Annotated[
        list[
            Literal["SelfInvoicing", "TaxRepresentative", "RRInvoicing", "PefInvoicing"]
        ]
        | None,
        Field(description="Lista rodzajów wyszukiwanych uprawnień."),
    ] = None


class EntityPermissionsGrantRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectIdentifier: Annotated[
        EntityPermissionsSubjectIdentifier,
        Field(
            description="Identyfikator podmiotu.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |"
        ),
    ]
    permissions: Annotated[
        list[EntityPermission],
        Field(
            description="Lista nadawanych uprawnień. Każda wartość może wystąpić tylko raz."
        ),
    ]
    description: Annotated[
        str, Field(description="Opis uprawnienia", max_length=256, min_length=5)
    ]
    subjectDetails: Annotated[
        EntityDetails,
        Field(description="Dane podmiotu, któremu nadawane są uprawnienia."),
    ]


class EntityRole(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    parentEntityIdentifier: Annotated[
        EntityRolesParentEntityIdentifier | None,
        Field(
            description="Identyfikator podmiotu nadrzędnego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |"
        ),
    ] = None
    role: Annotated[
        Literal[
            "CourtBailiff",
            "EnforcementAuthority",
            "LocalGovernmentUnit",
            "LocalGovernmentSubUnit",
            "VatGroupUnit",
            "VatGroupSubUnit",
        ],
        Field(description="Typ roli - powiązania z podmiotem nadrzędnym."),
    ]
    description: Annotated[
        str, Field(description="Opis roli.", max_length=256, min_length=5)
    ]
    startDate: Annotated[
        AwareDatetime, Field(description="Data rozpoczęcia obowiązywania roli.")
    ]


class InvoiceExportRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    encryption: Annotated[
        EncryptionInfo,
        Field(description="Informacje wymagane do zaszyfrowania wyniku zapytania."),
    ]
    filters: Annotated[
        InvoiceQueryFilters, Field(description="Zestaw filtrów do wyszukiwania faktur.")
    ]


class InvoiceMetadataThirdSubject(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    identifier: InvoiceMetadataThirdSubjectIdentifier
    name: Annotated[
        str | None, Field(description="Nazwa podmiotu trzeciego.", max_length=512)
    ] = None
    role: Annotated[
        int,
        Field(
            description="Rola podmiotu trzeciego.\n| Wartość | Opis |\n| ---- | --- |\n| 0 | Inna rola |\n| 1 | Faktor - w przypadku gdy na fakturze występują dane faktora |\n| 2 | Odbiorca - w przypadku gdy na fakturze występują dane jednostek wewnętrznych, oddziałów, wyodrębnionych w ramach nabywcy, które same nie stanowią nabywcy w rozumieniu ustawy |\n| 3 | Podmiot pierwotny - w przypadku gdy na fakturze występują dane podmiotu będącego w stosunku do podatnika podmiotem przejętym lub przekształconym, który dokonywał dostawy lub świadczył usługę. Z wyłączeniem przypadków, o których mowa w art. 106j ust.2 pkt 3 ustawy, gdy dane te wykazywane są w części Podmiot1K |\n| 4 | Dodatkowy nabywca - w przypadku gdy na fakturze występują dane kolejnych (innych niż wymieniony w części Podmiot2) nabywców |\n| 5 | Wystawca faktury - w przypadku gdy na fakturze występują dane podmiotu wystawiającego fakturę w imieniu podatnika. Nie dotyczy przypadku, gdy wystawcą faktury jest nabywca |\n| 6 | Dokonujący płatności - w przypadku gdy na fakturze występują dane podmiotu regulującego zobowiązanie w miejsce nabywcy |\n| 7 | Jednostka samorządu terytorialnego - wystawca |\n| 8 | Jednostka samorządu terytorialnego - odbiorca |\n| 9 | Członek grupy VAT - wystawca |\n| 10 | Członek grupy VAT - odbiorca |\n| 11 | Pracownik |"
        ),
    ]


class InvoicePackage(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    invoiceCount: Annotated[
        int, Field(description="Łączna liczba faktur w paczce.", ge=0, le=10000)
    ]
    size: Annotated[int, Field(description="Rozmiar paczki w bajtach.", ge=0)]
    parts: Annotated[
        list[InvoicePackagePart],
        Field(description="Lista dostępnych części paczki do pobrania."),
    ]
    isTruncated: Annotated[
        bool,
        Field(
            description="Określa, czy wynik eksportu został ucięty z powodu przekroczenia limitu liczby faktur lub wielkości paczki."
        ),
    ]
    lastIssueDate: Annotated[
        date | None,
        Field(
            description="Data wystawienia ostatniej faktury ujętej w paczce.\nPole występuje wyłącznie wtedy, gdy paczka została ucięta i eksport był filtrowany po typie daty `Issue`."
        ),
    ] = None
    lastInvoicingDate: Annotated[
        AwareDatetime | None,
        Field(
            description="Data przyjęcia ostatniej faktury ujętej w paczce.\nPole występuje wyłącznie wtedy, gdy paczka została ucięta i eksport był filtrowany po typie daty `Invoicing`."
        ),
    ] = None
    lastPermanentStorageDate: Annotated[
        AwareDatetime | None,
        Field(
            description="Data trwałego zapisu ostatniej faktury ujętej w paczce.\nPole występuje wyłącznie wtedy, gdy paczka została ucięta i eksport był filtrowany po typie daty `PermanentStorage`."
        ),
    ] = None
    permanentStorageHwmDate: Annotated[
        AwareDatetime | None,
        Field(
            description="Dotyczy wyłącznie zapytań filtrowanych po typie daty <b>PermanentStorage</b>.\nJeśli zapytanie dotyczyło najnowszego okresu, wartość ta może być wartością nieznacznie skorygowaną względem górnej granicy podanej w warunkach zapytania.\nDla okresów starszych, będzie to zgodne z warunkami zapytania. \n\nSystem gwarantuje, że dane poniżej tej wartości są spójne i kompletne.\nPonowne zapytania obejmujące zakresem dane poniżej tego kroczącego znacznika czasu nie zwrócą w przyszłości innych wyników (np.dodatkowych faktur). \n\nDla dateType = Issue lub Invoicing – null."
        ),
    ] = None


class OpenBatchSessionRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    formCode: Annotated[
        FormCode,
        Field(
            description="Schemat faktur wysyłanych w ramach sesji.\n\nObsługiwane schematy:\n| SystemCode | SchemaVersion | Value |\n| --- | --- | --- |\n| [FA (3)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/FA/schemat_FA(3)_v1-0E.xsd) | 1-0E | FA |\n"
        ),
    ]
    batchFile: Annotated[
        BatchFileInfo, Field(description="Informacje o przesyłanej paczce faktur.")
    ]
    encryption: Annotated[
        EncryptionInfo,
        Field(
            description="Symetryczny klucz szyfrujący plik paczki, zaszyfrowany kluczem publicznym Ministerstwa Finansów."
        ),
    ]
    offlineMode: Annotated[
        bool | None,
        Field(
            description='Określa, czy podatnik deklaruje tryb fakturowania "offline" dla dokumentów przesyłanych w sesji wsadowej.'
        ),
    ] = False


class PermissionsSubjectPersonByFingerprintDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectDetailsType: Annotated[
        Literal[
            "PersonByFingerprintWithIdentifier", "PersonByFingerprintWithoutIdentifier"
        ],
        Field(
            description="Typ danych uprawnionej osoby fizycznej.\n| Wartość | Opis |\n| --- | --- |\n| PersonByFingerprintWithIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL, ale mająca NIP lub PESEL. |\n| PersonByFingerprintWithoutIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL i niemająca NIP ani PESEL. |\n"
        ),
    ]
    firstName: Annotated[
        str, Field(description="Imię osoby fizycznej.", max_length=30, min_length=2)
    ]
    lastName: Annotated[
        str, Field(description="Nazwisko osoby fizycznej.", max_length=81, min_length=2)
    ]
    personIdentifier: Annotated[
        PersonIdentifier | None, Field(description="Identyfikator osoby fizycznej.")
    ] = None
    birthDate: Annotated[
        date | None, Field(description="Data urodzenia osoby fizycznej.")
    ] = None
    idDocument: Annotated[
        IdDocument | None,
        Field(description="Dane dokumentu tożsamości osoby fizycznej."),
    ] = None


class PermissionsSubjectPersonDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectDetailsType: Annotated[
        Literal[
            "PersonByIdentifier",
            "PersonByFingerprintWithIdentifier",
            "PersonByFingerprintWithoutIdentifier",
        ],
        Field(
            description="Typ danych uprawnionej osoby fizycznej.\n| Wartość | Opis |\n| --- | --- |\n| PersonByIdentifier | Osoba fizyczna posługująca się Profilem Zaufanym lub certyfikatem zawierającym identyfikator NIP lub PESEL. |\n| PersonByFingerprintWithIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL, ale mająca NIP lub PESEL. |\n| PersonByFingerprintWithoutIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL i niemająca NIP ani PESEL. |\n"
        ),
    ]
    firstName: Annotated[
        str, Field(description="Imię osoby fizycznej.", max_length=30, min_length=2)
    ]
    lastName: Annotated[
        str, Field(description="Nazwisko osoby fizycznej.", max_length=81, min_length=2)
    ]
    personIdentifier: Annotated[
        PersonIdentifier | None, Field(description="Identyfikator osoby fizycznej.")
    ] = None
    birthDate: Annotated[
        date | None, Field(description="Data urodzenia osoby fizycznej.")
    ] = None
    idDocument: Annotated[
        IdDocument | None,
        Field(description="Dane dokumentu tożsamości osoby fizycznej."),
    ] = None


class PersonByFingerprintWithIdentifierDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    firstName: Annotated[
        str, Field(description="Imię osoby fizycznej.", max_length=30, min_length=2)
    ]
    lastName: Annotated[
        str, Field(description="Nazwisko osoby fizycznej.", max_length=81, min_length=2)
    ]
    identifier: Annotated[
        PersonIdentifier, Field(description="Identyfikator osoby fizycznej.")
    ]


class PersonPermission(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    id: Annotated[
        str,
        Field(description="Identyfikator uprawnienia.", max_length=36, min_length=36),
    ]
    authorizedIdentifier: Annotated[
        PersonPermissionsAuthorizedIdentifier,
        Field(
            description="Identyfikator osoby lub podmiotu uprawnionego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |"
        ),
    ]
    contextIdentifier: Annotated[
        PersonPermissionsContextIdentifier | None,
        Field(
            description="Identyfikator kontekstu uprawnienia (dla uprawnień nadanych administratorom jednostek podrzędnych).\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |"
        ),
    ] = None
    targetIdentifier: Annotated[
        PersonPermissionsTargetIdentifier | None,
        Field(
            description="Identyfikator podmiotu docelowego dla uprawnień nadanych pośrednio.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| AllPartners | Identyfikator oznaczający, że uprawnienie nadane w sposób pośredni jest typu generalnego |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |"
        ),
    ] = None
    authorIdentifier: Annotated[
        PersonPermissionsAuthorIdentifier,
        Field(
            description="Identyfikator osoby lub podmiotu nadającego uprawnienie.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |\n| System | Identyfikator systemowy KSeF |"
        ),
    ]
    permissionScope: Annotated[
        Literal[
            "CredentialsManage",
            "CredentialsRead",
            "InvoiceWrite",
            "InvoiceRead",
            "Introspection",
            "SubunitManage",
            "EnforcementOperations",
        ],
        Field(description="Rodzaj uprawnienia."),
    ]
    description: Annotated[
        str, Field(description="Opis uprawnienia.", max_length=256, min_length=5)
    ]
    subjectPersonDetails: Annotated[
        PermissionsSubjectPersonDetails | None,
        Field(description="Dane osoby uprawnionej."),
    ] = None
    subjectEntityDetails: Annotated[
        PermissionsSubjectEntityDetails | None,
        Field(description="Dane podmiotu uprawnionego."),
    ] = None
    permissionState: Annotated[
        Literal["Active", "Inactive"], Field(description="Stan uprawnienia.")
    ]
    startDate: Annotated[
        AwareDatetime, Field(description="Data rozpoczęcia obowiązywania uprawnienia.")
    ]
    canDelegate: Annotated[
        bool,
        Field(
            description="Flaga określająca, czy uprawnienie ma być możliwe do dalszego przekazywania."
        ),
    ]


class PersonPermissionSubjectDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectDetailsType: Annotated[
        Literal[
            "PersonByIdentifier",
            "PersonByFingerprintWithIdentifier",
            "PersonByFingerprintWithoutIdentifier",
        ],
        Field(
            description="Typ danych podmiotu.\n| Wartość | Opis |\n| --- | --- |\n| PersonByIdentifier | Osoba fizyczna posługująca się Profilem Zaufanym lub certyfikatem zawierającym identyfikator NIP lub PESEL. |\n| PersonByFingerprintWithIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL, ale mająca NIP lub PESEL. |\n| PersonByFingerprintWithoutIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL i niemająca NIP ani PESEL. |\n"
        ),
    ]
    personById: Annotated[
        PersonDetails | None,
        Field(
            description="Dane podmiotu.\n*Wymagane, gdy subjectDetailsType = PersonByIdentifier.*"
        ),
    ] = None
    personByFpWithId: Annotated[
        PersonByFingerprintWithIdentifierDetails | None,
        Field(
            description="Dane podmiotu.\n*Wymagane, gdy subjectDetailsType = PersonByFingerprintWithIdentifier.*"
        ),
    ] = None
    personByFpNoId: Annotated[
        PersonByFingerprintWithoutIdentifierDetails | None,
        Field(
            description="Dane podmiotu.\n*Wymagane, gdy subjectDetailsType = PersonByFingerprintWithoutIdentifier.*"
        ),
    ] = None


class PersonPermissionsGrantRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectIdentifier: Annotated[
        PersonPermissionsSubjectIdentifier,
        Field(
            description="Identyfikator osoby fizycznej.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |"
        ),
    ]
    permissions: Annotated[
        list[
            Literal[
                "CredentialsManage",
                "CredentialsRead",
                "InvoiceWrite",
                "InvoiceRead",
                "Introspection",
                "SubunitManage",
                "EnforcementOperations",
            ]
        ],
        Field(
            description="Lista nadawanych uprawnień. Każda wartość może wystąpić tylko raz."
        ),
    ]
    description: Annotated[
        str, Field(description="Opis uprawnienia", max_length=256, min_length=5)
    ]
    subjectDetails: Annotated[
        PersonPermissionSubjectDetails,
        Field(description="Dane podmiotu, któremu nadawane są uprawnienia."),
    ]


class PersonPermissionsQueryRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    authorIdentifier: Annotated[
        PersonPermissionsAuthorIdentifier | None,
        Field(
            description="Identyfikator osoby lub podmiotu nadającego uprawnienie.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |\n| System | Identyfikator systemowy KSeF |"
        ),
    ] = None
    authorizedIdentifier: Annotated[
        PersonPermissionsAuthorizedIdentifier | None,
        Field(
            description="Identyfikator osoby lub podmiotu uprawnionego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |"
        ),
    ] = None
    contextIdentifier: Annotated[
        PersonPermissionsContextIdentifier | None,
        Field(
            description="Identyfikator kontekstu uprawnienia (dla uprawnień nadanych administratorom jednostek podrzędnych).\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |"
        ),
    ] = None
    targetIdentifier: Annotated[
        PersonPermissionsTargetIdentifier | None,
        Field(
            description="Identyfikator podmiotu docelowego dla uprawnień nadanych pośrednio.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| AllPartners | Identyfikator oznaczający, że uprawnienie nadane w sposób pośredni jest typu generalnego |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |"
        ),
    ] = None
    permissionTypes: Annotated[
        list[
            Literal[
                "CredentialsManage",
                "CredentialsRead",
                "InvoiceWrite",
                "InvoiceRead",
                "Introspection",
                "SubunitManage",
                "EnforcementOperations",
            ]
        ]
        | None,
        Field(description="Lista rodzajów wyszukiwanych uprawnień."),
    ] = None
    permissionState: Annotated[
        Literal["Active", "Inactive"] | None,
        Field(
            description="Stan uprawnienia. \n| Type | Value |\n| --- | --- |\n| Active | Uprawnienia aktywne |\n| Inactive | Uprawnienia nieaktywne, nadane w sposób pośredni |"
        ),
    ] = None
    queryType: Annotated[
        Literal["PermissionsInCurrentContext", "PermissionsGrantedInCurrentContext"],
        Field(
            description="Typ zapytania.\n| Type | Value |\n| --- | --- |\n| PermissionsInCurrentContext | Lista uprawnień obowiązujących w bieżącym kontekście |\n| PermissionsGrantedInCurrentContext | Lista uprawnień nadanych w bieżącym kontekście |"
        ),
    ]


class PersonalPermission(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    id: Annotated[
        str,
        Field(description="Identyfikator uprawnienia.", max_length=36, min_length=36),
    ]
    contextIdentifier: Annotated[
        PersonalPermissionsContextIdentifier | None,
        Field(
            description="Identyfikator kontekstu podmiotu, który nadał uprawnienia do obsługi faktur.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |"
        ),
    ] = None
    authorizedIdentifier: Annotated[
        PersonalPermissionsAuthorizedIdentifier | None,
        Field(
            description="Identyfikator podmiotu uprawnionego, jeżeli jest inny niż identyfikator uwierzytelnionego klienta API.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |"
        ),
    ] = None
    targetIdentifier: Annotated[
        PersonalPermissionsTargetIdentifier | None,
        Field(
            description="Identyfikator podmiotu docelowego dla uprawnień selektywnych nadanych pośrednio.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| AllPartners | Identyfikator oznaczający, że wyszukiwanie dotyczy uprawnień generalnych nadanych w sposób pośredni |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |"
        ),
    ] = None
    permissionScope: Annotated[
        Literal[
            "CredentialsManage",
            "CredentialsRead",
            "InvoiceWrite",
            "InvoiceRead",
            "Introspection",
            "SubunitManage",
            "EnforcementOperations",
            "VatUeManage",
        ],
        Field(description="Rodzaj uprawnienia."),
    ]
    description: Annotated[
        str, Field(description="Opis uprawnienia.", max_length=256, min_length=5)
    ]
    subjectPersonDetails: Annotated[
        PermissionsSubjectPersonDetails | None,
        Field(description="Dane osoby uprawnionej."),
    ] = None
    subjectEntityDetails: Annotated[
        PermissionsSubjectEntityDetails | None,
        Field(description="Dane podmiotu uprawnionego."),
    ] = None
    permissionState: Annotated[
        Literal["Active", "Inactive"], Field(description="Stan uprawnienia.")
    ]
    startDate: Annotated[
        AwareDatetime, Field(description="Data rozpoczęcia obowiązywania uprawnienia.")
    ]
    canDelegate: Annotated[
        bool,
        Field(
            description="Flaga określająca, czy uprawnienie ma być możliwe do dalszego przekazywania."
        ),
    ]


class PersonalPermissionsQueryRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    contextIdentifier: Annotated[
        PersonalPermissionsContextIdentifier | None,
        Field(
            description="Identyfikator kontekstu podmiotu, który nadał uprawnienia do obsługi faktur.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |"
        ),
    ] = None
    targetIdentifier: Annotated[
        PersonalPermissionsTargetIdentifier | None,
        Field(
            description="Identyfikator podmiotu docelowego dla uprawnień selektywnych nadanych pośrednio.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| AllPartners | Identyfikator oznaczający, że wyszukiwanie dotyczy uprawnień generalnych nadanych w sposób pośredni |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |"
        ),
    ] = None
    permissionTypes: Annotated[
        list[
            Literal[
                "CredentialsManage",
                "CredentialsRead",
                "InvoiceWrite",
                "InvoiceRead",
                "Introspection",
                "SubunitManage",
                "EnforcementOperations",
                "VatUeManage",
            ]
        ]
        | None,
        Field(description="Lista rodzajów wyszukiwanych uprawnień."),
    ] = None
    permissionState: Annotated[
        Literal["Active", "Inactive"] | None,
        Field(
            description="Stan uprawnienia. \n| Type | Value |\n| --- | --- |\n| Active | Uprawnienia aktywne |\n| Inactive | Uprawnienia nieaktywne |"
        ),
    ] = None


class QueryCertificatesResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    certificates: Annotated[
        list[CertificateListItem],
        Field(description="Lista certyfikatów spełniających kryteria wyszukiwania."),
    ]
    hasMore: Annotated[
        bool,
        Field(description="Flaga informująca o dostępności kolejnej strony wyników."),
    ]


class QueryEntityAuthorizationPermissionsResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    authorizationGrants: Annotated[
        list[EntityAuthorizationGrant],
        Field(description="Lista odczytanych uprawnień."),
    ]
    hasMore: Annotated[
        bool,
        Field(description="Flaga informująca o dostępności kolejnej strony wyników."),
    ]


class QueryEntityRolesResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    roles: Annotated[
        list[EntityRole], Field(description="Lista odczytanych ról podmiotu.")
    ]
    hasMore: Annotated[
        bool,
        Field(description="Flaga informująca o dostępności kolejnej strony wyników."),
    ]


class QueryPersonPermissionsResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    permissions: Annotated[
        list[PersonPermission], Field(description="Lista odczytanych uprawnień.")
    ]
    hasMore: Annotated[
        bool,
        Field(description="Flaga informująca o dostępności kolejnej strony wyników."),
    ]


class QueryPersonalPermissionsResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    permissions: Annotated[
        list[PersonalPermission], Field(description="Lista odczytanych uprawnień.")
    ]
    hasMore: Annotated[
        bool,
        Field(description="Flaga informująca o dostępności kolejnej strony wyników."),
    ]


class QueryTokensResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    continuationToken: Annotated[
        str | None,
        Field(
            description="Token służący do pobrania kolejnej strony wyników. Jeśli jest pusty, to nie ma kolejnych stron."
        ),
    ] = None
    tokens: Annotated[
        list[QueryTokensResponseItem],
        Field(description="Lista tokenów uwierzytelniających."),
    ]


class SessionsQueryResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    continuationToken: Annotated[
        str | None,
        Field(
            description="Token służący do pobrania kolejnej strony wyników. Jeśli jest pusty, to nie ma kolejnych stron."
        ),
    ] = None
    sessions: Annotated[
        list[SessionsQueryResponseItem], Field(description="Lista sesji.")
    ]


class SubordinateEntityRole(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subordinateEntityIdentifier: Annotated[
        SubordinateRoleSubordinateEntityIdentifier,
        Field(
            description="Identyfikator podmiotu podrzędnego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |"
        ),
    ]
    role: Annotated[
        Literal["LocalGovernmentSubUnit", "VatGroupSubUnit"],
        Field(description="Typ roli - powiązania z podmiotem nadrzędnym."),
    ]
    description: Annotated[
        str, Field(description="Opis powiązania.", max_length=256, min_length=5)
    ]
    startDate: Annotated[
        AwareDatetime, Field(description="Data rozpoczęcia obowiązywania powiązania.")
    ]


class SubunitPermission(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    id: Annotated[
        str,
        Field(description="Identyfikator uprawnienia.", max_length=36, min_length=36),
    ]
    authorizedIdentifier: Annotated[
        SubunitPermissionsAuthorizedIdentifier,
        Field(
            description="Identyfikator uprawnionego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |"
        ),
    ]
    subunitIdentifier: Annotated[
        SubunitPermissionsSubunitIdentifier,
        Field(
            description="Identyfikator jednostki lub podmiotu podrzędnego.\n| Type | Value |\n| --- | --- |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |\n| Nip | 10 cyfrowy numer NIP |"
        ),
    ]
    authorIdentifier: Annotated[
        SubunitPermissionsAuthorIdentifier,
        Field(
            description="Identyfikator uprawniającego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |"
        ),
    ]
    permissionScope: Annotated[
        Literal["CredentialsManage"], Field(description="Rodzaj uprawnienia.")
    ]
    description: Annotated[
        str, Field(description="Opis uprawnienia.", max_length=256, min_length=5)
    ]
    subjectPersonDetails: Annotated[
        PermissionsSubjectPersonDetails | None,
        Field(description="Dane osoby uprawnionej."),
    ] = None
    subunitName: Annotated[
        str | None,
        Field(description="Nazwa jednostki podrzędnej.", max_length=256, min_length=5),
    ] = None
    startDate: Annotated[
        AwareDatetime, Field(description="Data rozpoczęcia obowiązywania uprawnienia.")
    ]


class SubunitPermissionsGrantRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectIdentifier: Annotated[
        SubunitPermissionsSubjectIdentifier,
        Field(
            description="Identyfikator podmiotu lub osoby fizycznej.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |"
        ),
    ]
    contextIdentifier: Annotated[
        SubunitPermissionsContextIdentifier,
        Field(
            description="Identyfikator podmiotu podrzędnego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |"
        ),
    ]
    description: Annotated[
        str, Field(description="Opis uprawnienia", max_length=256, min_length=5)
    ]
    subunitName: Annotated[
        str | None,
        Field(
            description="Nazwa jednostki podrzędnej. W przypadku jednostki podrzędnej z identyfikatorem wewnętrznym pole jest wymagane.",
            max_length=256,
            min_length=5,
        ),
    ] = None
    subjectDetails: Annotated[
        PersonPermissionSubjectDetails,
        Field(description="Dane podmiotu, któremu nadawane są uprawnienia."),
    ]


class SubunitPermissionsQueryRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subunitIdentifier: Annotated[
        SubunitPermissionsSubunitIdentifier | None,
        Field(
            description="Identyfikator jednostki lub podmiotu podrzędnego.\n| Type | Value |\n| --- | --- |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |\n| Nip | 10 cyfrowy numer NIP |"
        ),
    ] = None


class EuEntityPermission(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    id: Annotated[
        str,
        Field(description="Identyfikator uprawnienia.", max_length=36, min_length=36),
    ]
    authorIdentifier: Annotated[
        EuEntityPermissionsAuthorIdentifier,
        Field(
            description="Identyfikator uprawniającego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |"
        ),
    ]
    vatUeIdentifier: Annotated[
        str, Field(description="Identyfikator podmiotu unijnego.")
    ]
    euEntityName: Annotated[
        str, Field(description="Nazwa podmiotu unijnego.", max_length=256, min_length=5)
    ]
    authorizedFingerprintIdentifier: Annotated[
        str,
        Field(
            description="Uprawniony odcisk palca certyfikatu.",
            max_length=64,
            min_length=64,
        ),
    ]
    permissionScope: Annotated[
        Literal["VatUeManage", "InvoiceWrite", "InvoiceRead", "Introspection"],
        Field(description="Uprawnienie."),
    ]
    description: Annotated[
        str, Field(description="Opis uprawnienia.", max_length=256, min_length=5)
    ]
    subjectPersonDetails: Annotated[
        PermissionsSubjectPersonByFingerprintDetails | None,
        Field(description="Dane osoby uprawnionej."),
    ] = None
    subjectEntityDetails: Annotated[
        PermissionsSubjectEntityByFingerprintDetails | None,
        Field(description="Dane podmiotu uprawnionego."),
    ] = None
    euEntityDetails: Annotated[
        PermissionsEuEntityDetails | None,
        Field(
            description="Dane podmiotu unijnego, w kontekście którego nadane jest uprawnienie."
        ),
    ] = None
    startDate: Annotated[
        AwareDatetime, Field(description="Data rozpoczęcia obowiązywania uprawnienia.")
    ]


class EuEntityPermissionSubjectDetails(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectDetailsType: Annotated[
        Literal[
            "PersonByFingerprintWithIdentifier",
            "PersonByFingerprintWithoutIdentifier",
            "EntityByFingerprint",
        ],
        Field(
            description="Typ danych podmiotu.\n| Wartość | Opis |\n| --- | --- |\n| PersonByFingerprintWithIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL, ale mająca NIP lub PESEL. |\n| PersonByFingerprintWithoutIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL i niemająca NIP ani PESEL. |\n| EntityByFingerprint | Podmiot identyfikowany odciskiem palca pieczęci kwalifikowanej. |\n"
        ),
    ]
    personByFpWithId: Annotated[
        PersonByFingerprintWithIdentifierDetails | None,
        Field(
            description="Dane podmiotu.\n*Wymagane, gdy subjectDetailsType = PersonByFingerprintWithIdentifier.*"
        ),
    ] = None
    personByFpNoId: Annotated[
        PersonByFingerprintWithoutIdentifierDetails | None,
        Field(
            description="Dane podmiotu.\n*Wymagane, gdy subjectDetailsType = PersonByFingerprintWithoutIdentifier.*"
        ),
    ] = None
    entityByFp: Annotated[
        EntityByFingerprintDetails | None,
        Field(
            description="Dane podmiotu.\n*Wymagane, gdy subjectDetailsType = EntityByFingerprint.*"
        ),
    ] = None


class EuEntityPermissionsGrantRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectIdentifier: Annotated[
        EuEntityPermissionsSubjectIdentifier,
        Field(
            description="Identyfikator podmiotu uprawnianego.\n| Type | Value |\n| --- | --- |\n| Fingerprint | Odcisk palca certyfikatu |"
        ),
    ]
    permissions: Annotated[
        list[Literal["InvoiceWrite", "InvoiceRead"]],
        Field(
            description="Lista nadawanych uprawnień. Każda wartość może wystąpić tylko raz."
        ),
    ]
    description: Annotated[
        str, Field(description="Opis uprawnienia", max_length=256, min_length=5)
    ]
    subjectDetails: Annotated[
        EuEntityPermissionSubjectDetails,
        Field(description="Dane podmiotu, któremu nadawane są uprawnienia."),
    ]


class IndirectPermissionsGrantRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectIdentifier: Annotated[
        IndirectPermissionsSubjectIdentifier,
        Field(
            description="Identyfikator osoby fizycznej.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |"
        ),
    ]
    targetIdentifier: Annotated[
        IndirectPermissionsTargetIdentifier | None,
        Field(
            description="Identyfikator kontekstu klienta. Nie przekazanie identyfikatora oznacza, że uprawnienie nadane w sposób pośredni jest typu generalnego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| AllPartners | Identyfikator oznaczający, że uprawnienie nadane w sposób pośredni jest typu generalnego |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |"
        ),
    ] = None
    permissions: Annotated[
        list[Literal["InvoiceRead", "InvoiceWrite"]],
        Field(
            description="Lista nadawanych uprawnień. Każda wartość może wystąpić tylko raz."
        ),
    ]
    description: Annotated[
        str, Field(description="Opis uprawnienia", max_length=256, min_length=5)
    ]
    subjectDetails: Annotated[
        PersonPermissionSubjectDetails,
        Field(description="Dane podmiotu, któremu nadawane są uprawnienia."),
    ]


class InvoiceExportStatusResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    status: Annotated[
        StatusInfo,
        Field(
            description="Status eksportu.\n\n| Code | Description | Details |\n| --- | --- | --- |\n| 100 | Eksport faktur w toku | - |\n| 200 | Eksport faktur zakończony sukcesem | - |\n| 210 | Eksport faktur wygasł i nie jest już dostępny do pobrania | - |\n| 415 | Błąd odszyfrowania dostarczonego klucza  | - |\n| 420 | Zakres filtrowania wykracza poza dostępny zakres danych | Parametr dateRange.from jest późniejszy niż PermanentStorageHwmDate przy włączonym restrictToPermanentStorageHwmDate. |\n| 500 | Nieznany błąd ({statusCode}) | - |\n| 550 | Operacja została anulowana przez system | Przetwarzanie zostało przerwane z przyczyn wewnętrznych systemu. Spróbuj ponownie |"
        ),
    ]
    completedDate: Annotated[
        AwareDatetime | None,
        Field(description="Data zakończenia przetwarzania żądania eksportu faktur."),
    ] = None
    packageExpirationDate: Annotated[
        AwareDatetime | None,
        Field(
            description="Data wygaśnięcia paczki faktur przygotowanej do pobrania.\nPo upływie tej daty paczka nie będzie już dostępna do pobrania."
        ),
    ] = None
    package: Annotated[
        InvoicePackage | None,
        Field(description="Dane paczki faktur przygotowanej do pobrania."),
    ] = None


class InvoiceMetadata(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    ksefNumber: Annotated[
        str,
        Field(
            description="Numer KSeF faktury.",
            max_length=36,
            min_length=35,
            pattern="^([1-9](\\d[1-9]|[1-9]\\d)\\d{7})-(20[2-9][0-9]|2[1-9]\\d{2}|[3-9]\\d{3})(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])-([0-9A-F]{6})-?([0-9A-F]{6})-([0-9A-F]{2})$",
        ),
    ]
    invoiceNumber: Annotated[
        str, Field(description="Numer faktury nadany przez wystawcę.", max_length=256)
    ]
    issueDate: Annotated[date, Field(description="Data wystawienia faktury.")]
    invoicingDate: Annotated[
        AwareDatetime,
        Field(
            description="Data przyjęcia faktury w systemie KSeF (do dalszego przetwarzania)."
        ),
    ]
    acquisitionDate: Annotated[
        AwareDatetime, Field(description="Data nadania numeru KSeF.")
    ]
    permanentStorageDate: Annotated[
        AwareDatetime,
        Field(description="Data trwałego zapisu faktury w repozytorium systemu KSeF."),
    ]
    seller: Annotated[
        InvoiceMetadataSeller, Field(description="Dane identyfikujące sprzedawcę.")
    ]
    buyer: Annotated[
        InvoiceMetadataBuyer, Field(description="Dane identyfikujące nabywcę.")
    ]
    netAmount: Annotated[float, Field(description="Łączna kwota netto.")]
    grossAmount: Annotated[float, Field(description="Łączna kwota brutto.")]
    vatAmount: Annotated[float, Field(description="Łączna kwota VAT.")]
    currency: Annotated[
        str, Field(description="Kod waluty.", max_length=3, min_length=3)
    ]
    invoicingMode: Annotated[
        Literal["Online", "Offline"],
        Field(description="Tryb fakturowania (online/offline)."),
    ]
    invoiceType: Annotated[
        Literal[
            "Vat",
            "Zal",
            "Kor",
            "Roz",
            "Upr",
            "KorZal",
            "KorRoz",
            "VatPef",
            "VatPefSp",
            "KorPef",
            "VatRr",
            "KorVatRr",
        ],
        Field(
            description="Rodzaj faktury.\n| Wartość | Opis |\n| --- | --- |\n| Vat | (FA) Podstawowa |\n| Zal | (FA) Zaliczkowa |\n| Kor | (FA) Korygująca |\n| Roz | (FA) Rozliczeniowa |\n| Upr | (FA) Uproszczona |\n| KorZal | (FA) Korygująca fakturę zaliczkową |\n| KorRoz | (FA) Korygująca fakturę rozliczeniową |\n| VatPef | (PEF) Podstawowa |\n| VatPefSp | (PEF) Specjalizowana |\n| KorPef | (PEF) Korygująca |\n| VatRr | (RR) Podstawowa |\n| KorVatRr | (RR) Korygująca |\n"
        ),
    ]
    formCode: Annotated[
        FormCode,
        Field(
            description="Struktura dokumentu faktury.\n\nObsługiwane schematy:\n| SystemCode | SchemaVersion | Value |\n| --- | --- | --- |\n| [FA (2)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/FA/schemat_FA(2)_v1-0E.xsd) | 1-0E | FA |\n| [FA (3)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/FA/schemat_FA(3)_v1-0E.xsd) | 1-0E | FA |\n| [PEF (3)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/PEF/Schemat_PEF(3)_v2-1.xsd) | 2-1 | PEF |\n| [PEF_KOR (3)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/PEF/Schemat_PEF_KOR(3)_v2-1.xsd) | 2-1 | PEF |\n| FA_RR (1) | 1-0E | RR |\n"
        ),
    ]
    isSelfInvoicing: Annotated[
        bool,
        Field(description="Czy faktura została wystawiona w trybie samofakturowania."),
    ]
    hasAttachment: Annotated[
        bool, Field(description="Określa, czy faktura posiada załącznik.")
    ]
    invoiceHash: Annotated[
        Base64Str,
        Field(
            description="Skrót SHA256 faktury, zakodowany w formacie Base64.",
            max_length=44,
            min_length=44,
        ),
    ]
    hashOfCorrectedInvoice: Annotated[
        Base64Str | None,
        Field(
            description="Skrót SHA256 korygowanej faktury, zakodowany w formacie Base64.",
            max_length=44,
            min_length=44,
        ),
    ] = None
    thirdSubjects: Annotated[
        list[InvoiceMetadataThirdSubject] | None,
        Field(description="Lista podmiotów trzecich."),
    ] = None
    authorizedSubject: Annotated[
        InvoiceMetadataAuthorizedSubject | None,
        Field(description="Podmiot upoważniony."),
    ] = None


class QueryEuEntityPermissionsResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    permissions: Annotated[
        list[EuEntityPermission], Field(description="Lista odczytanych uprawnień.")
    ]
    hasMore: Annotated[
        bool,
        Field(description="Flaga informująca o dostępności kolejnej strony wyników."),
    ]


class QueryInvoicesMetadataResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    hasMore: Annotated[
        bool, Field(description="Określa, czy istnieją kolejne wyniki zapytania.")
    ]
    isTruncated: Annotated[
        bool,
        Field(
            description="Określa, czy osiągnięto maksymalny dopuszczalny zakres wyników zapytania (10 000)."
        ),
    ]
    permanentStorageHwmDate: Annotated[
        AwareDatetime | None,
        Field(
            description="Dotyczy wyłącznie zapytań filtrowanych po typie daty <b>PermanentStorage</b>.\nJeśli zapytanie dotyczyło najnowszego okresu, wartość ta może być wartością nieznacznie skorygowaną względem górnej granicy podanej w warunkach zapytania.\nDla okresów starszych, będzie to zgodne z warunkami zapytania. \n\nWartość jest stała dla wszystkich stron tego samego zapytania\ni nie zależy od paginacji ani sortowania.\n\nSystem gwarantuje, że dane poniżej tej wartości są spójne i kompletne.\nPonowne zapytania obejmujące zakresem dane poniżej tego kroczącego znacznika czasu nie zwrócą w przyszłości innych wyników (np.dodatkowych faktur). \n\nDla dateType = Issue lub Invoicing – null."
        ),
    ] = None
    invoices: Annotated[
        list[InvoiceMetadata], Field(description="Lista faktur spełniających kryteria.")
    ]


class QuerySubordinateEntityRolesResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    roles: Annotated[
        list[SubordinateEntityRole],
        Field(description="Lista odczytanych podmiotów podrzędnych i ich ról."),
    ]
    hasMore: Annotated[
        bool,
        Field(description="Flaga informująca o dostępności kolejnej strony wyników."),
    ]


class QuerySubunitPermissionsResponse(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    permissions: Annotated[
        list[SubunitPermission], Field(description="Lista odczytanych uprawnień.")
    ]
    hasMore: Annotated[
        bool,
        Field(description="Flaga informująca o dostępności kolejnej strony wyników."),
    ]


class EuEntityAdministrationPermissionsGrantRequest(BaseModel):
    model_config = ConfigDict(
        extra="forbid",
    )
    subjectIdentifier: Annotated[
        EuEntityAdministrationPermissionsSubjectIdentifier,
        Field(
            description="Identyfikator podmiotu uprawnionego.\n| Type | Value |\n| --- | --- |\n| Fingerprint | Odcisk palca certyfikatu |"
        ),
    ]
    contextIdentifier: Annotated[
        EuEntityAdministrationPermissionsContextIdentifier,
        Field(
            description="Identyfikator kontekstu złożonego.\n| Type | Value |\n| --- | --- |\n| NipVatUe | Dwuczłonowy identyfikator składający się z numeru NIP i numeru VAT-UE: `{nip}-{vat_ue}` |"
        ),
    ]
    description: Annotated[
        str, Field(description="Opis uprawnienia", max_length=256, min_length=5)
    ]
    euEntityName: Annotated[
        str,
        Field(
            description="Nazwa i adres podmiotu unijnego w formacie: \n`{euSubjectName}, {euSubjectAddress}`",
            max_length=256,
            min_length=5,
        ),
    ]
    subjectDetails: Annotated[
        EuEntityPermissionSubjectDetails,
        Field(description="Dane podmiotu, któremu nadawane są uprawnienia."),
    ]
    euEntityDetails: Annotated[
        EuEntityDetails,
        Field(
            description="Dane podmiotu unijnego, w kontekście którego nadawane są uprawnienia."
        ),
    ]

# generated by datamodel-codegen:
#   filename:  openapi.json
#   timestamp: 2026-02-13T13:59:06+00:00

from __future__ import annotations

from datetime import date, datetime
from enum import Enum

from pydantic import AnyUrl, BaseModel, Extra, Field, conint, constr


class AllowedIps(BaseModel):
    class Config:
        extra = Extra.forbid

    ip4Addresses: (
        list[constr(regex=r'^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$')] | None
    ) = Field(
        None,
        description='Lista adresów IPv4 w notacji dziesiętnej kropkowanej, np. `192.168.0.10`.',
    )
    ip4Ranges: (
        list[
            constr(
                regex=r'^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}-((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$'
            )
        ]
        | None
    ) = Field(
        None,
        description='Lista adresów IPv4 podana w formie zakresu początek–koniec, oddzielonego pojedynczym myślnikiem, np. `10.0.0.1–10.0.0.254`.',
    )
    ip4Masks: (
        list[
            constr(
                regex=r'^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}\/(0|[1-9]|1[0-9]|2[0-9]|3[0-2])$'
            )
        ]
        | None
    ) = Field(
        None, description='Lista adresów IPv4 w notacji CIDR, np. `172.16.0.0/16`.'
    )


class AmountType(Enum):
    Brutto = 'Brutto'
    Netto = 'Netto'
    Vat = 'Vat'


class ApiRateLimitValuesOverride(BaseModel):
    class Config:
        extra = Extra.forbid

    perSecond: int = Field(..., description='Limit na sekundę.')
    perMinute: int = Field(..., description='Limit na minutę.')
    perHour: int = Field(..., description='Limit na godzinę.')


class ApiRateLimitsOverride(BaseModel):
    class Config:
        extra = Extra.forbid

    onlineSession: ApiRateLimitValuesOverride = Field(
        ..., description='Limity dla otwierania/zamykania sesji interaktywnych.'
    )
    batchSession: ApiRateLimitValuesOverride = Field(
        ..., description='Limity dla otwierania/zamykania sesji wsadowych.'
    )
    invoiceSend: ApiRateLimitValuesOverride = Field(
        ..., description='Limity dla wysyłki faktur.'
    )
    invoiceStatus: ApiRateLimitValuesOverride = Field(
        ..., description='Limity dla pobierania statusu faktury z sesji.'
    )
    sessionList: ApiRateLimitValuesOverride = Field(
        ..., description='Limity dla pobierania listy sesji.'
    )
    sessionInvoiceList: ApiRateLimitValuesOverride = Field(
        ..., description='Limity dla pobierania listy faktur w sesji.'
    )
    sessionMisc: ApiRateLimitValuesOverride = Field(
        ..., description='Limity dla pozostałych operacji w ramach sesji.'
    )
    invoiceMetadata: ApiRateLimitValuesOverride = Field(
        ..., description='Limity dla pobierania metadanych faktur.'
    )
    invoiceExport: ApiRateLimitValuesOverride = Field(
        ..., description='Limity dla eksportu paczki faktur.'
    )
    invoiceExportStatus: ApiRateLimitValuesOverride = Field(
        ..., description='Limity dla pobierania statusu eksportu paczki faktur.'
    )
    invoiceDownload: ApiRateLimitValuesOverride = Field(
        ..., description='Limity dla pobierania faktur po numerze KSeF.'
    )
    other: ApiRateLimitValuesOverride = Field(
        ..., description='Limity dla pozostałych operacji API.'
    )


class AuthenticationContextIdentifierType(Enum):
    Nip = 'Nip'
    InternalId = 'InternalId'
    NipVatUe = 'NipVatUe'
    PeppolId = 'PeppolId'


class AuthenticationMethod(Enum):
    Token = 'Token'
    TrustedProfile = 'TrustedProfile'
    InternalCertificate = 'InternalCertificate'
    QualifiedSignature = 'QualifiedSignature'
    QualifiedSeal = 'QualifiedSeal'
    PersonalSignature = 'PersonalSignature'
    PeppolSignature = 'PeppolSignature'


class AuthenticationMethodCategory(Enum):
    XadesSignature = 'XadesSignature'
    NationalNode = 'NationalNode'
    Token = 'Token'
    Other = 'Other'


class AuthenticationMethodInfo(BaseModel):
    class Config:
        extra = Extra.forbid

    category: AuthenticationMethodCategory = Field(
        ...,
        description='Kategoria metody uwierzytelnienia.\n| Wartość | Opis |\n| --- | --- |\n| XadesSignature | Uwierzytelnienie podpisem Xades. |\n| NationalNode | Uwierzytelnienie za pomocą Węzła Krajowego (login.gov.pl). |\n| Token | Uwierzytelnienie tokenem. |\n| Other | Uwierzytelnienie inną metodą. |\n',
    )
    code: str = Field(..., description='Kod metody uwierzytelnienia.')
    displayName: str = Field(
        ..., description='Nazwa metody uwierzytelnienia do wyświetlenia użytkownikowi.'
    )


class AuthenticationTokenStatus(Enum):
    Pending = 'Pending'
    Active = 'Active'
    Revoking = 'Revoking'
    Revoked = 'Revoked'
    Failed = 'Failed'


class AuthorizationPolicy(BaseModel):
    class Config:
        extra = Extra.forbid

    allowedIps: AllowedIps | None = Field(
        None, description='Lista dozwolonych adresów IP.'
    )


class BatchSessionContextLimitsOverride(BaseModel):
    class Config:
        extra = Extra.forbid

    maxInvoiceSizeInMB: conint(ge=0, le=5) = Field(
        ..., description='Maksymalny rozmiar faktury w MB.'
    )
    maxInvoiceWithAttachmentSizeInMB: conint(ge=0, le=10) = Field(
        ..., description='Maksymalny rozmiar faktury z załącznikiem w MB.'
    )
    maxInvoices: conint(ge=0, le=100000) = Field(
        ...,
        description='Maksymalna ilość faktur które można przesłać w pojedynczej sesji.',
    )


class BatchSessionEffectiveContextLimits(BaseModel):
    class Config:
        extra = Extra.forbid

    maxInvoiceSizeInMB: conint(ge=0) = Field(
        ..., description='Maksymalny rozmiar faktury w MB.'
    )
    maxInvoiceWithAttachmentSizeInMB: conint(ge=0) = Field(
        ..., description='Maksymalny rozmiar faktury z załącznikiem w MB.'
    )
    maxInvoices: conint(ge=0) = Field(
        ...,
        description='Maksymalna ilość faktur które można przesłać w pojedynczej sesji.',
    )


class BuyerIdentifierType(Enum):
    Nip = 'Nip'
    VatUe = 'VatUe'
    Other = 'Other'
    None_ = 'None'


class CertificateEffectiveSubjectLimits(BaseModel):
    class Config:
        extra = Extra.forbid

    maxCertificates: int | None = None


class CertificateEnrollmentDataResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    commonName: str = Field(..., description='Nazwa powszechna.')
    countryName: str = Field(..., description='Kraj, kod ISO 3166.')
    givenName: str | None = Field(None, description='Imię.')
    surname: str | None = Field(None, description='Nazwisko.')
    serialNumber: str | None = Field(None, description='Numer seryjny podmiotu.')
    uniqueIdentifier: str | None = Field(None, description='Unikalny identyfikator.')
    organizationName: str | None = Field(None, description='Nazwa organizacji.')
    organizationIdentifier: str | None = Field(
        None, description='Identyfikator organizacji.'
    )


class CertificateLimit(BaseModel):
    class Config:
        extra = Extra.forbid

    remaining: int = Field(..., description='Pozostała wartość limitu.')
    limit: int = Field(
        ..., description='Maksymalna liczba zasobów dozwolona w ramach limitu.'
    )


class CertificateLimitsResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    canRequest: bool = Field(
        ...,
        description='Flaga informująca czy uwierzytelniony podmiot może złożyć nowy wniosek o certyfikat.',
    )
    enrollment: CertificateLimit = Field(
        ...,
        description='Informacje o limitach związanych z liczbą możliwych do złożenia wniosków certyfikacyjnych.',
    )
    certificate: CertificateLimit = Field(
        ...,
        description='Informacje o limitach dotyczących liczby aktywnych certyfikatów wydanych dla danego podmiotu.',
    )


class CertificateListItemStatus(Enum):
    Active = 'Active'
    Blocked = 'Blocked'
    Revoked = 'Revoked'
    Expired = 'Expired'


class CertificateRevocationReason(Enum):
    Unspecified = 'Unspecified'
    Superseded = 'Superseded'
    KeyCompromise = 'KeyCompromise'


class CertificateSubjectIdentifierType(Enum):
    Nip = 'Nip'
    Pesel = 'Pesel'
    Fingerprint = 'Fingerprint'


class CertificateSubjectLimitsOverride(BaseModel):
    class Config:
        extra = Extra.forbid

    maxCertificates: conint(ge=0) | None = None


class Challenge(BaseModel):
    __root__: constr(min_length=36, max_length=36) = Field(
        ..., description='Unikalny challenge.'
    )


class CheckAttachmentPermissionStatusResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    isAttachmentAllowed: bool | None = Field(
        None,
        description='Informacja czy Podmiot ma obecnie możliwość dodawania Załączników do Faktur',
    )
    revokedDate: datetime | None = Field(
        None,
        description='Data i czas zakończenia możliwość dodawania przez Podmiot Załączników do Faktur.\nBrak podanej daty oznacza bezterminową możliwość dodawania Załączników do Faktur',
    )


class CommonSessionStatus(Enum):
    InProgress = 'InProgress'
    Succeeded = 'Succeeded'
    Failed = 'Failed'
    Cancelled = 'Cancelled'


class CurrencyCode(Enum):
    AED = 'AED'
    AFN = 'AFN'
    ALL = 'ALL'
    AMD = 'AMD'
    ANG = 'ANG'
    AOA = 'AOA'
    ARS = 'ARS'
    AUD = 'AUD'
    AWG = 'AWG'
    AZN = 'AZN'
    BAM = 'BAM'
    BBD = 'BBD'
    BDT = 'BDT'
    BGN = 'BGN'
    BHD = 'BHD'
    BIF = 'BIF'
    BMD = 'BMD'
    BND = 'BND'
    BOB = 'BOB'
    BOV = 'BOV'
    BRL = 'BRL'
    BSD = 'BSD'
    BTN = 'BTN'
    BWP = 'BWP'
    BYN = 'BYN'
    BZD = 'BZD'
    CAD = 'CAD'
    CDF = 'CDF'
    CHE = 'CHE'
    CHF = 'CHF'
    CHW = 'CHW'
    CLF = 'CLF'
    CLP = 'CLP'
    CNY = 'CNY'
    COP = 'COP'
    COU = 'COU'
    CRC = 'CRC'
    CUC = 'CUC'
    CUP = 'CUP'
    CVE = 'CVE'
    CZK = 'CZK'
    DJF = 'DJF'
    DKK = 'DKK'
    DOP = 'DOP'
    DZD = 'DZD'
    EGP = 'EGP'
    ERN = 'ERN'
    ETB = 'ETB'
    EUR = 'EUR'
    FJD = 'FJD'
    FKP = 'FKP'
    GBP = 'GBP'
    GEL = 'GEL'
    GGP = 'GGP'
    GHS = 'GHS'
    GIP = 'GIP'
    GMD = 'GMD'
    GNF = 'GNF'
    GTQ = 'GTQ'
    GYD = 'GYD'
    HKD = 'HKD'
    HNL = 'HNL'
    HRK = 'HRK'
    HTG = 'HTG'
    HUF = 'HUF'
    IDR = 'IDR'
    ILS = 'ILS'
    IMP = 'IMP'
    INR = 'INR'
    IQD = 'IQD'
    IRR = 'IRR'
    ISK = 'ISK'
    JEP = 'JEP'
    JMD = 'JMD'
    JOD = 'JOD'
    JPY = 'JPY'
    KES = 'KES'
    KGS = 'KGS'
    KHR = 'KHR'
    KMF = 'KMF'
    KPW = 'KPW'
    KRW = 'KRW'
    KWD = 'KWD'
    KYD = 'KYD'
    KZT = 'KZT'
    LAK = 'LAK'
    LBP = 'LBP'
    LKR = 'LKR'
    LRD = 'LRD'
    LSL = 'LSL'
    LYD = 'LYD'
    MAD = 'MAD'
    MDL = 'MDL'
    MGA = 'MGA'
    MKD = 'MKD'
    MMK = 'MMK'
    MNT = 'MNT'
    MOP = 'MOP'
    MRU = 'MRU'
    MUR = 'MUR'
    MVR = 'MVR'
    MWK = 'MWK'
    MXN = 'MXN'
    MXV = 'MXV'
    MYR = 'MYR'
    MZN = 'MZN'
    NAD = 'NAD'
    NGN = 'NGN'
    NIO = 'NIO'
    NOK = 'NOK'
    NPR = 'NPR'
    NZD = 'NZD'
    OMR = 'OMR'
    PAB = 'PAB'
    PEN = 'PEN'
    PGK = 'PGK'
    PHP = 'PHP'
    PKR = 'PKR'
    PLN = 'PLN'
    PYG = 'PYG'
    QAR = 'QAR'
    RON = 'RON'
    RSD = 'RSD'
    RUB = 'RUB'
    RWF = 'RWF'
    SAR = 'SAR'
    SBD = 'SBD'
    SCR = 'SCR'
    SDG = 'SDG'
    SEK = 'SEK'
    SGD = 'SGD'
    SHP = 'SHP'
    SLL = 'SLL'
    SOS = 'SOS'
    SRD = 'SRD'
    SSP = 'SSP'
    STN = 'STN'
    SVC = 'SVC'
    SYP = 'SYP'
    SZL = 'SZL'
    THB = 'THB'
    TJS = 'TJS'
    TMT = 'TMT'
    TND = 'TND'
    TOP = 'TOP'
    TRY = 'TRY'
    TTD = 'TTD'
    TWD = 'TWD'
    TZS = 'TZS'
    UAH = 'UAH'
    UGX = 'UGX'
    USD = 'USD'
    USN = 'USN'
    UYI = 'UYI'
    UYU = 'UYU'
    UYW = 'UYW'
    UZS = 'UZS'
    VES = 'VES'
    VND = 'VND'
    VUV = 'VUV'
    WST = 'WST'
    XAF = 'XAF'
    XAG = 'XAG'
    XAU = 'XAU'
    XBA = 'XBA'
    XBB = 'XBB'
    XBC = 'XBC'
    XBD = 'XBD'
    XCD = 'XCD'
    XCG = 'XCG'
    XDR = 'XDR'
    XOF = 'XOF'
    XPD = 'XPD'
    XPF = 'XPF'
    XPT = 'XPT'
    XSU = 'XSU'
    XUA = 'XUA'
    XXX = 'XXX'
    YER = 'YER'
    ZAR = 'ZAR'
    ZMW = 'ZMW'
    ZWL = 'ZWL'


class EffectiveApiRateLimitValues(BaseModel):
    class Config:
        extra = Extra.forbid

    perSecond: int = Field(..., description='Limit na sekundę.')
    perMinute: int = Field(..., description='Limit na minutę.')
    perHour: int = Field(..., description='Limit na godzinę.')


class EffectiveApiRateLimits(BaseModel):
    class Config:
        extra = Extra.forbid

    onlineSession: EffectiveApiRateLimitValues = Field(
        ..., description='Limity dla otwierania/zamykania sesji interaktywnych.'
    )
    batchSession: EffectiveApiRateLimitValues = Field(
        ..., description='Limity dla otwierania/zamykania sesji wsadowych.'
    )
    invoiceSend: EffectiveApiRateLimitValues = Field(
        ..., description='Limity dla wysyłki faktur.'
    )
    invoiceStatus: EffectiveApiRateLimitValues = Field(
        ..., description='Limity dla pobierania statusu faktury z sesji.'
    )
    sessionList: EffectiveApiRateLimitValues = Field(
        ..., description='Limity dla pobierania listy sesji.'
    )
    sessionInvoiceList: EffectiveApiRateLimitValues = Field(
        ..., description='Limity dla pobierania listy faktur w sesji.'
    )
    sessionMisc: EffectiveApiRateLimitValues = Field(
        ..., description='Limity dla pozostałych operacji w ramach sesji.'
    )
    invoiceMetadata: EffectiveApiRateLimitValues = Field(
        ..., description='Limity dla pobierania metadanych faktur.'
    )
    invoiceExport: EffectiveApiRateLimitValues = Field(
        ..., description='Limity dla eksportu paczki faktur.'
    )
    invoiceExportStatus: EffectiveApiRateLimitValues = Field(
        ..., description='Limity dla pobierana statusu eksportu paczki faktur.'
    )
    invoiceDownload: EffectiveApiRateLimitValues = Field(
        ..., description='Limity dla pobierania faktur po numerze KSeF.'
    )
    other: EffectiveApiRateLimitValues = Field(
        ..., description='Limity dla pozostałych operacji API.'
    )


class EncryptionInfo(BaseModel):
    class Config:
        extra = Extra.forbid

    encryptedSymmetricKey: str = Field(
        ...,
        description='Klucz symetryczny o długości 32 bajtów, zaszyfrowany algorytmem RSA (Padding: OAEP z SHA-256), zakodowany w formacie Base64.\n\n[Klucz publiczny Ministerstwa Finansów](/docs/v2/index.html#tag/Certyfikaty-klucza-publicznego)',
    )
    initializationVector: str = Field(
        ...,
        description='Wektor inicjalizujący (IV) o długości 16 bajtów, używany do szyfrowania symetrycznego, zakodowany w formacie Base64.',
    )


class EnrollmentEffectiveSubjectLimits(BaseModel):
    class Config:
        extra = Extra.forbid

    maxEnrollments: int | None = None


class EnrollmentSubjectLimitsOverride(BaseModel):
    class Config:
        extra = Extra.forbid

    maxEnrollments: conint(ge=0) | None = None


class EntityAuthorizationPermissionType(Enum):
    SelfInvoicing = 'SelfInvoicing'
    RRInvoicing = 'RRInvoicing'
    TaxRepresentative = 'TaxRepresentative'
    PefInvoicing = 'PefInvoicing'


class EntityAuthorizationPermissionsSubjectIdentifierType(Enum):
    Nip = 'Nip'
    PeppolId = 'PeppolId'


class EntityAuthorizationsAuthorIdentifierType(Enum):
    Nip = 'Nip'
    Pesel = 'Pesel'
    Fingerprint = 'Fingerprint'


class EntityAuthorizationsAuthorizedEntityIdentifierType(Enum):
    Nip = 'Nip'
    PeppolId = 'PeppolId'


class EntityAuthorizationsAuthorizingEntityIdentifierType(Enum):
    Nip = 'Nip'


class EntityByFingerprintDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    fullName: constr(max_length=100) = Field(..., description='Pełna nazwa podmiotu.')
    address: constr(max_length=512) = Field(..., description='Adres podmiotu.')


class EntityDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    fullName: constr(min_length=5, max_length=90) = Field(
        ..., description='Pełna nazwa podmiotu.'
    )


class EntityPermissionType(Enum):
    InvoiceWrite = 'InvoiceWrite'
    InvoiceRead = 'InvoiceRead'


class EntityPermissionsSubjectIdentifierType(Enum):
    Nip = 'Nip'


class EntityPermissionsSubordinateEntityIdentifierType(Enum):
    Nip = 'Nip'


class EntityRoleType(Enum):
    CourtBailiff = 'CourtBailiff'
    EnforcementAuthority = 'EnforcementAuthority'
    LocalGovernmentUnit = 'LocalGovernmentUnit'
    LocalGovernmentSubUnit = 'LocalGovernmentSubUnit'
    VatGroupUnit = 'VatGroupUnit'
    VatGroupSubUnit = 'VatGroupSubUnit'


class EntityRolesParentEntityIdentifierType(Enum):
    Nip = 'Nip'


class EntitySubjectByFingerprintDetailsType(Enum):
    EntityByFingerprint = 'EntityByFingerprint'


class EntitySubjectByIdentifierDetailsType(Enum):
    EntityByIdentifier = 'EntityByIdentifier'


class EntitySubjectDetailsType(Enum):
    EntityByIdentifier = 'EntityByIdentifier'
    EntityByFingerprint = 'EntityByFingerprint'


class EuEntityAdministrationPermissionsContextIdentifierType(Enum):
    NipVatUe = 'NipVatUe'


class EuEntityAdministrationPermissionsSubjectIdentifierType(Enum):
    Fingerprint = 'Fingerprint'


class EuEntityDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    fullName: constr(max_length=100) = Field(..., description='Pełna nazwa podmiotu.')
    address: constr(max_length=512) = Field(..., description='Adres podmiotu.')


class EuEntityPermissionSubjectDetailsType(Enum):
    PersonByFingerprintWithIdentifier = 'PersonByFingerprintWithIdentifier'
    PersonByFingerprintWithoutIdentifier = 'PersonByFingerprintWithoutIdentifier'
    EntityByFingerprint = 'EntityByFingerprint'


class EuEntityPermissionType(Enum):
    InvoiceWrite = 'InvoiceWrite'
    InvoiceRead = 'InvoiceRead'


class EuEntityPermissionsAuthorIdentifierType(Enum):
    Nip = 'Nip'
    Pesel = 'Pesel'
    Fingerprint = 'Fingerprint'


class EuEntityPermissionsQueryPermissionType(Enum):
    VatUeManage = 'VatUeManage'
    InvoiceWrite = 'InvoiceWrite'
    InvoiceRead = 'InvoiceRead'
    Introspection = 'Introspection'


class EuEntityPermissionsQueryRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    vatUeIdentifier: (
        constr(
            regex=r'^(ATU\d{8}|BE[01]{1}\d{9}|BG\d{9,10}|CY\d{8}[A-Z]|CZ\d{8,10}|DE\d{9}|DK\d{8}|EE\d{9}|EL\d{9}|ES([A-Z]\d{8}|\d{8}[A-Z]|[A-Z]\d{7}[A-Z])|FI\d{8}|FR[A-Z0-9]{2}\d{9}|HR\d{11}|HU\d{8}|IE(\d{7}[A-Z]{2}|\d[A-Z0-9+*]\d{5}[A-Z])|IT\d{11}|LT(\d{9}|\d{12})|LU\d{8}|LV\d{11}|MT\d{8}|NL[A-Z0-9+*]{12}|PT\d{9}|RO\d{2,10}|SE\d{12}|SI\d{8}|SK\d{10}|XI((\d{9}|\d{12})|(GD|HA)\d{3}))$'
        )
        | None
    ) = Field(
        None,
        description='Wartość identyfikatora (numeru identyfikacyjnego VAT) podmiotu unijnego (exact match).',
    )
    authorizedFingerprintIdentifier: str | None = Field(
        None,
        description='Odcisk palca certyfikatu kwalifikowanego uprawnionego (contains).',
    )
    permissionTypes: list[EuEntityPermissionsQueryPermissionType] | None = Field(
        None, description='Lista rodzajów wyszukiwanych uprawnień.'
    )


class EuEntityPermissionsSubjectIdentifierType(Enum):
    Fingerprint = 'Fingerprint'


class ExceptionDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    exceptionCode: int | None = None
    exceptionDescription: str | None = None
    details: list[str] | None = None


class FormCode(BaseModel):
    class Config:
        extra = Extra.forbid

    systemCode: str = Field(..., description='Kod systemowy')
    schemaVersion: str = Field(..., description='Wersja schematu')
    value: str = Field(..., description='Wartość')


class IdDocument(BaseModel):
    class Config:
        extra = Extra.forbid

    type: constr(max_length=20) = Field(..., description='Rodzaj dokumentu tożsamości.')
    number: constr(max_length=20) = Field(
        ..., description='Seria i numer dokumentu tożsamości.'
    )
    country: constr(min_length=2, max_length=2) = Field(
        ...,
        description='Kraj wydania dokumentu tożsamości. Musi być zgodny z ISO 3166-1 alpha-2 (np. PL, DE, US) oraz zawierać dokładnie 2 wielkie litery.',
    )


class IndirectPermissionType(Enum):
    InvoiceRead = 'InvoiceRead'
    InvoiceWrite = 'InvoiceWrite'


class IndirectPermissionsSubjectIdentifierType(Enum):
    Nip = 'Nip'
    Pesel = 'Pesel'
    Fingerprint = 'Fingerprint'


class IndirectPermissionsTargetIdentifierType(Enum):
    Nip = 'Nip'
    AllPartners = 'AllPartners'
    InternalId = 'InternalId'


class InternalId(BaseModel):
    __root__: constr(
        regex=r'^[1-9]((\d[1-9])|([1-9]\d))\d{7}-\d{5}$', min_length=16, max_length=16
    ) = Field(
        ...,
        description='Identyfikator wewnętrzny, składający się z numeru NIP i 5 cyfr.',
    )


class InvoiceMetadataBuyerIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: BuyerIdentifierType = Field(
        ...,
        description='Typ identyfikatora nabywcy.\n| Wartość | Opis |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| VatUe | Identyfikator VAT UE podmiotu unijnego |\n| Other | Inny identyfikator |\n| None | Brak identyfikatora nabywcy |\n',
    )
    value: constr(max_length=50) | None = Field(
        None, description='Wartość identyfikatora nabywcy.'
    )


class InvoicePermissionType(Enum):
    SelfInvoicing = 'SelfInvoicing'
    TaxRepresentative = 'TaxRepresentative'
    RRInvoicing = 'RRInvoicing'
    PefInvoicing = 'PefInvoicing'


class InvoiceQueryAmount(BaseModel):
    class Config:
        extra = Extra.forbid

    type: AmountType
    from_: float | None = Field(None, alias='from')
    to: float | None = None


class InvoiceQueryBuyerIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: BuyerIdentifierType = Field(
        ...,
        description='Typ identyfikatora nabywcy.\n| Wartość | Opis |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| VatUe | Identyfikator VAT UE podmiotu unijnego |\n| Other | Inny identyfikator |\n| None | Brak identyfikatora nabywcy |\n',
    )
    value: constr(max_length=50) | None = Field(
        None, description='Wartość identyfikatora nabywcy (exact match).'
    )


class InvoiceQueryDateType(Enum):
    Issue = 'Issue'
    Invoicing = 'Invoicing'
    PermanentStorage = 'PermanentStorage'


class InvoiceQueryFormType(Enum):
    FA = 'FA'
    PEF = 'PEF'
    RR = 'RR'


class InvoiceQuerySubjectType(Enum):
    Subject1 = 'Subject1'
    Subject2 = 'Subject2'
    Subject3 = 'Subject3'
    SubjectAuthorized = 'SubjectAuthorized'


class InvoiceStatusInfo(BaseModel):
    class Config:
        extra = Extra.forbid

    code: int = Field(..., description='Kod statusu faktury')
    description: constr(min_length=1) = Field(..., description='Opis statusu')
    details: list[str] | None = Field(None, description='Dodatkowe szczegóły statusu')
    extensions: dict[str, str] | None = Field(
        None,
        description='Zbiór dodatkowych informacji związanych ze statusem faktury, zapisanych jako pary klucz–wartość.\nUmożliwia rozszerzenie modelu o dane specyficzne dla danego przypadku.',
    )


class InvoiceType(Enum):
    Vat = 'Vat'
    Zal = 'Zal'
    Kor = 'Kor'
    Roz = 'Roz'
    Upr = 'Upr'
    KorZal = 'KorZal'
    KorRoz = 'KorRoz'
    VatPef = 'VatPef'
    VatPefSp = 'VatPefSp'
    KorPef = 'KorPef'
    VatRr = 'VatRr'
    KorVatRr = 'KorVatRr'


class InvoicingMode(Enum):
    Online = 'Online'
    Offline = 'Offline'


class KsefCertificateType(Enum):
    Authentication = 'Authentication'
    Offline = 'Offline'


class KsefNumber(BaseModel):
    __root__: constr(
        regex=r'^([1-9](\d[1-9]|[1-9]\d)\d{7})-(20[2-9][0-9]|2[1-9]\d{2}|[3-9]\d{3})(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])-([0-9A-F]{6})-?([0-9A-F]{6})-([0-9A-F]{2})$',
        min_length=35,
        max_length=36,
    ) = Field(
        ...,
        description='Numer KSeF o długości 36 znaków jest akceptowany, by zachować kompatybilność wsteczna z KSeF 1.0. W KSeF 2.0 numery są generowane wyłącznie w formacie 35-znakowym.',
    )


class Nip(BaseModel):
    __root__: constr(
        regex=r'^[1-9]((\d[1-9])|([1-9]\d))\d{7}$', min_length=10, max_length=10
    ) = Field(..., description='10 cyfrowy numer NIP.')


class NipVatUe(BaseModel):
    __root__: constr(
        regex=r'^[1-9]((\d[1-9])|([1-9]\d))\d{7}-(ATU\d{8}|BE[01]{1}\d{9}|BG\d{9,10}|CY\d{8}[A-Z]|CZ\d{8,10}|DE\d{9}|DK\d{8}|EE\d{9}|EL\d{9}|ES([A-Z]\d{8}|\d{8}[A-Z]|[A-Z]\d{7}[A-Z])|FI\d{8}|FR[A-Z0-9]{2}\d{9}|HR\d{11}|HU\d{8}|IE(\d{7}[A-Z]{2}|\d[A-Z0-9+*]\d{5}[A-Z])|IT\d{11}|LT(\d{9}|\d{12})|LU\d{8}|LV\d{11}|MT\d{8}|NL[A-Z0-9+*]{12}|PT\d{9}|RO\d{2,10}|SE\d{12}|SI\d{8}|SK\d{10}|XI((\d{9}|\d{12})|(GD|HA)\d{3}))$'
    ) = Field(
        ...,
        description='Identyfikator złożony, czyli dwuczłonowy identyfikator składający się z nr NIP podmiotu polskiego oraz numeru VAT UE podmiotu unijnego.',
    )


class OnlineSessionContextLimitsOverride(BaseModel):
    class Config:
        extra = Extra.forbid

    maxInvoiceSizeInMB: conint(ge=0, le=5) = Field(
        ..., description='Maksymalny rozmiar faktury w MB.'
    )
    maxInvoiceWithAttachmentSizeInMB: conint(ge=0, le=10) = Field(
        ..., description='Maksymalny rozmiar faktury z załącznikiem w MB.'
    )
    maxInvoices: conint(ge=0, le=100000) = Field(
        ...,
        description='Maksymalna ilość faktur które można przesłać w pojedynczej sesji.',
    )


class OnlineSessionEffectiveContextLimits(BaseModel):
    class Config:
        extra = Extra.forbid

    maxInvoiceSizeInMB: conint(ge=0) = Field(
        ..., description='Maksymalny rozmiar faktury w MB.'
    )
    maxInvoiceWithAttachmentSizeInMB: conint(ge=0) = Field(
        ..., description='Maksymalny rozmiar faktury z załącznikiem w MB.'
    )
    maxInvoices: conint(ge=0) = Field(
        ...,
        description='Maksymalna ilość faktur które można przesłać w pojedynczej sesji.',
    )


class OpenOnlineSessionRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    formCode: FormCode = Field(
        ...,
        description='Schemat faktur wysyłanych w ramach sesji.\n\nObsługiwane schematy:\n| SystemCode | SchemaVersion | Value |\n| --- | --- | --- |\n| [FA (2)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/FA/schemat_FA(2)_v1-0E.xsd) | 1-0E | FA |\n| [FA (3)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/FA/schemat_FA(3)_v1-0E.xsd) | 1-0E | FA |\n| [PEF (3)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/PEF/Schemat_PEF(3)_v2-1.xsd) | 2-1 | PEF |\n| [PEF_KOR (3)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/PEF/Schemat_PEF_KOR(3)_v2-1.xsd) | 2-1 | PEF |\n',
    )
    encryption: EncryptionInfo = Field(
        ...,
        description='Symetryczny klucz szyfrujący pliki XML, zaszyfrowany kluczem publicznym Ministerstwa Finansów.',
    )


class PartUploadRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    ordinalNumber: conint(ge=1) = Field(
        ..., description='Numer sekwencyjny części pliku paczki.'
    )
    method: str = Field(
        ...,
        description='Metoda HTTP, której należy użyć przy wysyłce części pliku paczki.',
    )
    url: AnyUrl = Field(
        ..., description='Adres pod który należy wysłać część pliku paczki.'
    )
    headers: dict[str, str] = Field(
        ...,
        description='Nagłówki, których należy użyć przy wysyłce części pliku paczki.',
    )


class PeppolId(BaseModel):
    __root__: constr(regex=r'^P[A-Z]{2}[0-9]{6}$', min_length=9, max_length=9) = Field(
        ..., description='Identyfikator dostawcy usług Peppol.'
    )


class PeppolProvider(BaseModel):
    class Config:
        extra = Extra.forbid

    id: PeppolId = Field(..., description='Identyfikator dostawcy usług Peppol.')
    name: constr(max_length=256) = Field(
        ..., description='Nazwa dostawcy usług Peppol.'
    )
    dateCreated: datetime = Field(
        ..., description='Data rejestracji dostawcy usług Peppol w systemie.'
    )


class PermissionId(BaseModel):
    __root__: constr(min_length=36, max_length=36) = Field(
        ...,
        description='Techniczny identyfikator nadanego uprawnienia – wymagany m.in. przy operacjach odbierania.',
    )


class PermissionState(Enum):
    Active = 'Active'
    Inactive = 'Inactive'


class PermissionsEuEntityDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    fullName: constr(max_length=100) = Field(
        ..., description='Pełna nazwa podmiotu unijnego.'
    )
    address: constr(max_length=512) = Field(..., description='Adres podmiotu unijnego.')


class PermissionsSubjectEntityByFingerprintDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectDetailsType: EntitySubjectByFingerprintDetailsType = Field(
        ...,
        description='Typ danych podmiotu uprawnionego.\n| Wartość | Opis |\n| --- | --- |\n| EntityByFingerprint | Podmiot identyfikowany odciskiem palca pieczęci kwalifikowanej. |\n',
    )
    fullName: constr(max_length=100) = Field(..., description='Pełna nazwa podmiotu.')
    address: constr(max_length=512) | None = Field(None, description='Adres podmiotu.')


class PermissionsSubjectEntityByIdentifierDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectDetailsType: EntitySubjectByIdentifierDetailsType = Field(
        ...,
        description='Typ danych podmiotu uprawnionego.\n| Wartość | Opis |\n| --- | --- |\n| EntityByIdentifier | Podmiot identyfikowany numerem NIP. |\n',
    )
    fullName: constr(max_length=100) = Field(..., description='Pełna nazwa podmiotu.')


class PermissionsSubjectEntityDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectDetailsType: EntitySubjectDetailsType = Field(
        ...,
        description='Typ danych podmiotu uprawnionego.\n| Wartość | Opis |\n| --- | --- |\n| EntityByIdentifier | Podmiot identyfikowany numerem NIP. |\n| EntityByFingerprint | Podmiot identyfikowany odciskiem palca pieczęci kwalifikowanej. |\n',
    )
    fullName: constr(max_length=100) = Field(..., description='Pełna nazwa podmiotu.')
    address: constr(max_length=512) | None = Field(None, description='Adres podmiotu.')


class PersonByFingerprintWithoutIdentifierDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    firstName: constr(min_length=2, max_length=30) = Field(
        ..., description='Imię osoby fizycznej.'
    )
    lastName: constr(min_length=2, max_length=81) = Field(
        ..., description='Nazwisko osoby fizycznej.'
    )
    birthDate: date = Field(..., description='Data urodzenia osoby fizycznej.')
    idDocument: IdDocument = Field(
        ..., description='Dane dokumentu tożsamości osoby fizycznej.'
    )


class PersonDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    firstName: constr(min_length=2, max_length=30) = Field(
        ..., description='Imię osoby fizycznej.'
    )
    lastName: constr(min_length=2, max_length=81) = Field(
        ..., description='Nazwisko osoby fizycznej.'
    )


class PersonIdentifierType(Enum):
    Pesel = 'Pesel'
    Nip = 'Nip'


class PersonPermissionScope(Enum):
    CredentialsManage = 'CredentialsManage'
    CredentialsRead = 'CredentialsRead'
    InvoiceWrite = 'InvoiceWrite'
    InvoiceRead = 'InvoiceRead'
    Introspection = 'Introspection'
    SubunitManage = 'SubunitManage'
    EnforcementOperations = 'EnforcementOperations'


class PersonPermissionSubjectDetailsType(Enum):
    PersonByIdentifier = 'PersonByIdentifier'
    PersonByFingerprintWithIdentifier = 'PersonByFingerprintWithIdentifier'
    PersonByFingerprintWithoutIdentifier = 'PersonByFingerprintWithoutIdentifier'


class PersonPermissionType(Enum):
    CredentialsManage = 'CredentialsManage'
    CredentialsRead = 'CredentialsRead'
    InvoiceWrite = 'InvoiceWrite'
    InvoiceRead = 'InvoiceRead'
    Introspection = 'Introspection'
    SubunitManage = 'SubunitManage'
    EnforcementOperations = 'EnforcementOperations'


class PersonPermissionsAuthorIdentifierType(Enum):
    Nip = 'Nip'
    Pesel = 'Pesel'
    Fingerprint = 'Fingerprint'
    System = 'System'


class PersonPermissionsAuthorizedIdentifierType(Enum):
    Nip = 'Nip'
    Pesel = 'Pesel'
    Fingerprint = 'Fingerprint'


class PersonPermissionsContextIdentifierType(Enum):
    Nip = 'Nip'
    InternalId = 'InternalId'


class PersonPermissionsQueryType(Enum):
    PermissionsInCurrentContext = 'PermissionsInCurrentContext'
    PermissionsGrantedInCurrentContext = 'PermissionsGrantedInCurrentContext'


class PersonPermissionsSubjectIdentifierType(Enum):
    Nip = 'Nip'
    Pesel = 'Pesel'
    Fingerprint = 'Fingerprint'


class PersonPermissionsTargetIdentifierType(Enum):
    Nip = 'Nip'
    AllPartners = 'AllPartners'
    InternalId = 'InternalId'


class PersonRemoveRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    nip: Nip


class PersonSubjectByFingerprintDetailsType(Enum):
    PersonByFingerprintWithIdentifier = 'PersonByFingerprintWithIdentifier'
    PersonByFingerprintWithoutIdentifier = 'PersonByFingerprintWithoutIdentifier'


class PersonSubjectDetailsType(Enum):
    PersonByIdentifier = 'PersonByIdentifier'
    PersonByFingerprintWithIdentifier = 'PersonByFingerprintWithIdentifier'
    PersonByFingerprintWithoutIdentifier = 'PersonByFingerprintWithoutIdentifier'


class PersonalPermissionScope(Enum):
    CredentialsManage = 'CredentialsManage'
    CredentialsRead = 'CredentialsRead'
    InvoiceWrite = 'InvoiceWrite'
    InvoiceRead = 'InvoiceRead'
    Introspection = 'Introspection'
    SubunitManage = 'SubunitManage'
    EnforcementOperations = 'EnforcementOperations'
    VatUeManage = 'VatUeManage'


class PersonalPermissionType(Enum):
    CredentialsManage = 'CredentialsManage'
    CredentialsRead = 'CredentialsRead'
    InvoiceWrite = 'InvoiceWrite'
    InvoiceRead = 'InvoiceRead'
    Introspection = 'Introspection'
    SubunitManage = 'SubunitManage'
    EnforcementOperations = 'EnforcementOperations'
    VatUeManage = 'VatUeManage'


class PersonalPermissionsAuthorizedIdentifierType(Enum):
    Nip = 'Nip'
    Pesel = 'Pesel'
    Fingerprint = 'Fingerprint'


class PersonalPermissionsContextIdentifierType(Enum):
    Nip = 'Nip'
    InternalId = 'InternalId'


class PersonalPermissionsTargetIdentifierType(Enum):
    Nip = 'Nip'
    AllPartners = 'AllPartners'
    InternalId = 'InternalId'


class Pesel(BaseModel):
    __root__: constr(
        regex=r'^\d{2}(?:0[1-9]|1[0-2]|2[1-9]|3[0-2]|4[1-9]|5[0-2]|6[1-9]|7[0-2]|8[1-9]|9[0-2])\d{7}$',
        min_length=11,
        max_length=11,
    ) = Field(..., description='11 cyfrowy numer PESEL.')


class PublicKeyCertificateUsage(Enum):
    KsefTokenEncryption = 'KsefTokenEncryption'
    SymmetricKeyEncryption = 'SymmetricKeyEncryption'


class QueryCertificatesRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    certificateSerialNumber: str | None = Field(
        None,
        description='Numer seryjny certyfikatu. Wyszukiwanie odbywa się na zasadzie dokładnego dopasowania (exact match).',
    )
    name: str | None = Field(
        None,
        description='Nazwa własna certyfikatu. Wyszukiwanie jest częściowe, czyli zwracane są certyfikaty, których nazwa zawiera podany ciąg znaków (contains).',
    )
    type: KsefCertificateType | None = Field(
        None,
        description='Typ certyfikatu KSeF.\n| Wartość | Opis |\n| --- | --- |\n| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |\n| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |\n',
    )
    status: CertificateListItemStatus | None = Field(
        None,
        description='Status certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Active | Certyfikat jest aktywny i może zostać użyty do uwierzytelnienia lub realizacji operacji w trybie offline (w zależności od typu certyfikatu). |\n| Blocked | Certyfikat został zablokowany i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline.            Status przejściowy do czasu zakończenia procesu unieważniania. |\n| Revoked | Certyfikat został unieważniony i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n| Expired | Certyfikat wygasł i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n',
    )
    expiresAfter: datetime | None = Field(
        None, description='Filtruje certyfikaty, które wygasają po podanej dacie.'
    )


class QueryPeppolProvidersResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    peppolProviders: list[PeppolProvider] = Field(
        ..., description='Lista dostawców usług Peppol.'
    )
    hasMore: bool = Field(
        ..., description='Flaga informująca o dostępności kolejnej strony wyników.'
    )


class QueryType(Enum):
    Granted = 'Granted'
    Received = 'Received'


class ReferenceNumber(BaseModel):
    __root__: constr(min_length=36, max_length=36) = Field(
        ..., description='Numer referencyjny.'
    )


class RetrieveCertificatesListItem(BaseModel):
    class Config:
        extra = Extra.forbid

    certificate: str = Field(
        ..., description='Certyfikat w formacie DER, zakodowany w formacie Base64.'
    )
    certificateName: str = Field(..., description='Nazwa własna certyfikatu.')
    certificateSerialNumber: str = Field(..., description='Numer seryjny certyfikatu.')
    certificateType: KsefCertificateType = Field(
        ...,
        description='Typ certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |\n| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |\n',
    )


class RetrieveCertificatesRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    certificateSerialNumbers: list[str] = Field(
        ...,
        description='Numery seryjne certyfikatów do pobrania.',
        max_items=10,
        min_items=1,
    )


class RetrieveCertificatesResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    certificates: list[RetrieveCertificatesListItem] = Field(
        ..., description='Pobrane certyfikaty.'
    )


class RetryAfter(BaseModel):
    __root__: int = Field(
        ..., description='Liczba sekund po których można ponowić żądanie.', example=30
    )


class RevokeCertificateRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    revocationReason: CertificateRevocationReason | None = Field(
        None,
        description='Powód unieważnienia certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Unspecified | Nieokreślony. |\n| Superseded | Certyfikat został zastąpiony przez inny. |\n| KeyCompromise | Klucz prywatny powiązany z certyfikatem został skompromitowany. |\n',
    )


class SendInvoiceResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    referenceNumber: ReferenceNumber = Field(
        ..., description='Numer referencyjny faktury.'
    )


class SessionType(Enum):
    Online = 'Online'
    Batch = 'Batch'


class SetRateLimitsRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    rateLimits: ApiRateLimitsOverride = Field(
        ..., description='Limity dla ilości żądań do API.'
    )


class SetSessionLimitsRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    onlineSession: OnlineSessionContextLimitsOverride = Field(
        ..., description='Limity dla sesji interaktywnych.'
    )
    batchSession: BatchSessionContextLimitsOverride = Field(
        ..., description='Limity dla sesji wsadowych.'
    )


class Sha256HashBase64(BaseModel):
    __root__: str = Field(..., description='SHA-256 w Base64.')


class SortOrder(Enum):
    Asc = 'Asc'
    Desc = 'Desc'


class StatusInfo(BaseModel):
    class Config:
        extra = Extra.forbid

    code: int = Field(..., description='Kod statusu')
    description: constr(min_length=1) = Field(..., description='Opis statusu')
    details: list[str] | None = Field(None, description='Dodatkowe szczegóły statusu')


class SubjectIdentifierType(Enum):
    Nip = 'Nip'
    Pesel = 'Pesel'
    Fingerprint = 'Fingerprint'


class SubjectRemoveRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectNip: Nip


class SubjectType(Enum):
    EnforcementAuthority = 'EnforcementAuthority'
    VatGroup = 'VatGroup'
    JST = 'JST'


class SubordinateEntityRoleType(Enum):
    LocalGovernmentSubUnit = 'LocalGovernmentSubUnit'
    VatGroupSubUnit = 'VatGroupSubUnit'


class SubordinateRoleSubordinateEntityIdentifierType(Enum):
    Nip = 'Nip'


class Subunit(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectNip: Nip
    description: constr(min_length=5, max_length=256)


class SubunitPermissionScope(Enum):
    CredentialsManage = 'CredentialsManage'


class SubunitPermissionsAuthorIdentifierType(Enum):
    Nip = 'Nip'
    Pesel = 'Pesel'
    Fingerprint = 'Fingerprint'


class SubunitPermissionsContextIdentifierType(Enum):
    InternalId = 'InternalId'
    Nip = 'Nip'


class SubunitPermissionsSubjectIdentifierType(Enum):
    Nip = 'Nip'
    Pesel = 'Pesel'
    Fingerprint = 'Fingerprint'


class SubunitPermissionsSubunitIdentifierType(Enum):
    InternalId = 'InternalId'
    Nip = 'Nip'


class TestDataAuthenticationContextIdentifierType(Enum):
    Nip = 'Nip'
    InternalId = 'InternalId'
    NipVatUe = 'NipVatUe'
    PeppolId = 'PeppolId'


class TestDataAuthorizedIdentifierType(Enum):
    Nip = 'Nip'
    Pesel = 'Pesel'
    Fingerprint = 'Fingerprint'


class TestDataContextIdentifierType(Enum):
    Nip = 'Nip'


class TestDataPermissionType(Enum):
    InvoiceRead = 'InvoiceRead'
    InvoiceWrite = 'InvoiceWrite'
    Introspection = 'Introspection'
    CredentialsRead = 'CredentialsRead'
    CredentialsManage = 'CredentialsManage'
    EnforcementOperations = 'EnforcementOperations'
    SubunitManage = 'SubunitManage'


class ThirdSubjectIdentifierType(Enum):
    Nip = 'Nip'
    InternalId = 'InternalId'
    VatUe = 'VatUe'
    Other = 'Other'
    None_ = 'None'


class TokenAuthorIdentifierType(Enum):
    Nip = 'Nip'
    Pesel = 'Pesel'
    Fingerprint = 'Fingerprint'


class TokenAuthorIdentifierTypeIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: TokenAuthorIdentifierType = Field(
        ...,
        description='Typ identyfikatora.\n| Wartość | Opis |\n| --- | --- |\n| Nip | NIP. |\n| Pesel | PESEL. |\n| Fingerprint | Odcisk palca certyfikatu. |\n',
    )
    value: str = Field(..., description='Wartość identyfikatora.')


class TokenContextIdentifierType(Enum):
    Nip = 'Nip'
    InternalId = 'InternalId'
    NipVatUe = 'NipVatUe'
    PeppolId = 'PeppolId'


class TokenContextIdentifierTypeIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: TokenContextIdentifierType = Field(
        ...,
        description='Typ identyfikatora.\n| Wartość | Opis |\n| --- | --- |\n| Nip | NIP. |\n| InternalId | Identyfikator wewnętrzny. |\n| NipVatUe | Dwuczłonowy identyfikator składający się z numeru NIP i numeru VAT-UE: `{nip}-{vat_ue}`. |\n| PeppolId | Identyfikator dostawcy usług Peppol. |\n',
    )
    value: str = Field(..., description='Wartość identyfikatora.')


class TokenInfo(BaseModel):
    class Config:
        extra = Extra.forbid

    token: str = Field(..., description='Token w formacie JWT.')
    validUntil: datetime = Field(..., description='Data ważności tokena.')


class TokenPermissionType(Enum):
    InvoiceRead = 'InvoiceRead'
    InvoiceWrite = 'InvoiceWrite'
    CredentialsRead = 'CredentialsRead'
    CredentialsManage = 'CredentialsManage'
    SubunitManage = 'SubunitManage'
    EnforcementOperations = 'EnforcementOperations'


class TokenStatusResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    referenceNumber: ReferenceNumber = Field(
        ..., description='Numer referencyjny tokena KSeF.'
    )
    authorIdentifier: TokenAuthorIdentifierTypeIdentifier = Field(
        ..., description='Identyfikator osoby która wygenerowała token.'
    )
    contextIdentifier: TokenContextIdentifierTypeIdentifier = Field(
        ...,
        description='Identyfikator kontekstu, w którym został wygenerowany token i do którego daje dostęp.',
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis tokena.'
    )
    requestedPermissions: list[TokenPermissionType] = Field(
        ..., description='Uprawnienia przypisane tokenowi.'
    )
    dateCreated: datetime = Field(..., description='Data i czas utworzenia tokena.')
    lastUseDate: datetime | None = Field(
        None, description='Data ostatniego użycia tokena.'
    )
    status: AuthenticationTokenStatus = Field(
        ...,
        description='Status tokena.\n| Wartość | Opis |\n| --- | --- |\n| Pending | Token został utworzony ale jest jeszcze w trakcie aktywacji i nadawania uprawnień. Nie może być jeszcze wykorzystywany do uwierzytelniania. |\n| Active | Token jest aktywny i może być wykorzystywany do uwierzytelniania. |\n| Revoking | Token jest w trakcie unieważniania. Nie może już być wykorzystywany do uwierzytelniania. |\n| Revoked | Token został unieważniony i nie może być wykorzystywany do uwierzytelniania. |\n| Failed | Nie udało się aktywować tokena. Należy wygenerować nowy token, obecny nie może być wykorzystywany do uwierzytelniania. |\n',
    )
    statusDetails: list[str] | None = Field(
        None,
        description='Dodatkowe informacje na temat statusu, zwracane w przypadku błędów.',
    )


class Status(BaseModel):
    code: int = Field(
        ...,
        description='Kod statusu HTTP odpowiadający błędowi. Zawsze ma wartość 429.',
    )
    description: str = Field(..., description='Opis błędu zgodny z nazwą statusu HTTP.')
    details: list[str] = Field(
        ...,
        description='Lista szczegółowych informacji opisujących przyczynę przekroczenia limitu żądań oraz wskazówki dotyczące ponowienia żądania.',
    )


class TooManyRequestsResponse(BaseModel):
    status: Status = Field(
        ..., description='Informacje o błędzie związanym z przekroczeniem limitu żądań.'
    )


class UpoPageResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    referenceNumber: ReferenceNumber = Field(
        ..., description='Numer referencyjny strony UPO.'
    )
    downloadUrl: AnyUrl = Field(
        ...,
        description='Adres do pobrania strony UPO. Link generowany jest przy każdym odpytaniu o status. \nDostęp odbywa się metodą `HTTP GET` i <b>nie należy</b> wysyłać tokenu dostępowego. \nLink nie podlega limitom API i wygasa po określonym czasie w `DownloadUrlExpirationDate`.\n\nOdpowiedź HTTP zawiera dodatkowe nagłówki:\n- `x-ms-meta-hash` – skrót SHA-256 dokumentu UPO, zakodowany w formacie Base64.',
    )
    downloadUrlExpirationDate: datetime = Field(
        ...,
        description='Data i godzina wygaśnięcia adresu. Po tej dacie link `DownloadUrl` nie będzie już aktywny.',
    )


class UpoResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    pages: list[UpoPageResponse] = Field(..., description='Lista stron UPO.')


class AttachmentPermissionGrantRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    nip: Nip


class AttachmentPermissionRevokeRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    nip: Nip
    expectedEndDate: date | None = Field(
        None, description='Data wycofania zgody na przesyłanie faktur z załącznikiem.'
    )


class AuthenticationChallengeResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    challenge: Challenge
    timestamp: datetime = Field(..., description='Czas wygenerowania challenge-a.')
    timestampMs: int = Field(
        ...,
        description='Czas wygenerowania challenge-a w milisekundach od 1 stycznia 1970 roku (Unix timestamp).',
    )


class AuthenticationContextIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: AuthenticationContextIdentifierType = Field(
        ..., description='Typ identyfikatora'
    )
    value: str = Field(..., description='Wartość identyfikatora')


class AuthenticationInitResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    referenceNumber: ReferenceNumber = Field(
        ..., description='Numer referencyjny sesji uwierzytelnienia.'
    )
    authenticationToken: TokenInfo = Field(
        ..., description='Token operacji uwierzytelnienia.'
    )


class AuthenticationListItem(BaseModel):
    class Config:
        extra = Extra.forbid

    startDate: datetime = Field(
        ..., description='Data rozpoczęcia operacji uwierzytelnienia.'
    )
    authenticationMethod: AuthenticationMethod = Field(
        ...,
        deprecated=True,
        description='Metoda uwierzytelnienia.\n| Wartość | Opis |\n| --- | --- |\n| Token | Token KSeF. |\n| TrustedProfile | Profil Zaufany. |\n| InternalCertificate | Certyfikat KSeF. |\n| QualifiedSignature | Podpis kwalifikowany. |\n| QualifiedSeal | Pieczęć kwalifikowana. |\n| PersonalSignature | Podpis osobisty. |\n| PeppolSignature | Podpis dostawcy usług Peppol. |\n',
    )
    authenticationMethodInfo: AuthenticationMethodInfo = Field(
        ..., description='Użyta metoda uwierzytelnienia.'
    )
    status: StatusInfo = Field(
        ...,
        description='Informacje o aktualnym statusie.\n| Code | Description | Details |\n| --- | --- | --- |\n| 100 | Uwierzytelnianie w toku | - |\n| 200 | Uwierzytelnianie zakończone sukcesem | - |\n| 415 | Uwierzytelnianie zakończone niepowodzeniem | Brak przypisanych uprawnień |\n| 425 | Uwierzytelnienie unieważnione  | Uwierzytelnienie i powiązane refresh tokeny zostały unieważnione przez użytkownika |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Nieprawidłowe wyzwanie autoryzacyjne |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Nieprawidłowy token |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Nieprawidłowy czas tokena |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Token unieważniony |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Token nieaktywny |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Nieważny certyfikat |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Błąd weryfikacji łańcucha certyfikatów |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Niezaufany łańcuch certyfikatów |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Certyfikat odwołany |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Certyfikat zawieszony |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Niepoprawny certyfikat |\n| 470 | Uwierzytelnianie zakończone niepowodzeniem | Próba wykorzystania metod autoryzacyjnych osoby zmarłej |\n| 480 | Uwierzytelnienie zablokowane | Podejrzenie incydentu bezpieczeństwa. Skontaktuj się z Ministerstwem Finansów przez formularz zgłoszeniowy. |\n| 500 | Nieznany błąd | - |\n| 550 | Operacja została anulowana przez system | Przetwarzanie zostało przerwane z przyczyn wewnętrznych systemu. Spróbuj ponownie |',
    )
    isTokenRedeemed: bool | None = Field(
        None,
        description='Czy został już wydany refresh token powiązany z danym uwierzytelnieniem.',
    )
    lastTokenRefreshDate: datetime | None = Field(
        None, description='Data ostatniego odświeżenia tokena.'
    )
    refreshTokenValidUntil: datetime | None = Field(
        None,
        description='Termin ważności refresh tokena (o ile nie zostanie wcześniej unieważniony).',
    )
    referenceNumber: ReferenceNumber = Field(
        ..., description='Numer referencyjny sesji uwierzytelnienia.'
    )
    isCurrent: bool | None = Field(
        None, description='Czy sesja jest powiązana z aktualnie używanym tokenem.'
    )


class AuthenticationListResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    continuationToken: str | None = Field(
        None,
        description='Token służący do pobrania kolejnej strony wyników. Jeśli jest pusty, to nie ma kolejnych stron.',
    )
    items: list[AuthenticationListItem] = Field(
        ..., description='Lista sesji uwierzytelniania.'
    )


class AuthenticationOperationStatusResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    startDate: datetime = Field(
        ..., description='Data rozpoczęcia operacji uwierzytelnienia.'
    )
    authenticationMethod: AuthenticationMethod = Field(
        ...,
        deprecated=True,
        description='Metoda uwierzytelnienia.\n| Wartość | Opis |\n| --- | --- |\n| Token | Token KSeF. |\n| TrustedProfile | Profil Zaufany. |\n| InternalCertificate | Certyfikat KSeF. |\n| QualifiedSignature | Podpis kwalifikowany. |\n| QualifiedSeal | Pieczęć kwalifikowana. |\n| PersonalSignature | Podpis osobisty. |\n| PeppolSignature | Podpis dostawcy usług Peppol. |\n',
    )
    authenticationMethodInfo: AuthenticationMethodInfo = Field(
        ..., description='Użyta metoda uwierzytelnienia.'
    )
    status: StatusInfo = Field(
        ...,
        description='Informacje o aktualnym statusie.\n| Code | Description | Details |\n| --- | --- | --- |\n| 100 | Uwierzytelnianie w toku | - |\n| 200 | Uwierzytelnianie zakończone sukcesem | - |\n| 415 | Uwierzytelnianie zakończone niepowodzeniem | Brak przypisanych uprawnień |\n| 425 | Uwierzytelnienie unieważnione  | Uwierzytelnienie i powiązane refresh tokeny zostały unieważnione przez użytkownika |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Nieprawidłowe wyzwanie autoryzacyjne |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Nieprawidłowy token |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Nieprawidłowy czas tokena |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Token unieważniony |\n| 450 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędnego tokenu | Token nieaktywny |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Nieważny certyfikat |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Błąd weryfikacji łańcucha certyfikatów |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Niezaufany łańcuch certyfikatów |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Certyfikat odwołany |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Certyfikat zawieszony |\n| 460 | Uwierzytelnianie zakończone niepowodzeniem z powodu błędu certyfikatu | Niepoprawny certyfikat |\n| 470 | Uwierzytelnianie zakończone niepowodzeniem | Próba wykorzystania metod autoryzacyjnych osoby zmarłej |\n| 480 | Uwierzytelnienie zablokowane | Podejrzenie incydentu bezpieczeństwa. Skontaktuj się z Ministerstwem Finansów przez formularz zgłoszeniowy. |\n| 500 | Nieznany błąd | - |\n| 550 | Operacja została anulowana przez system | Przetwarzanie zostało przerwane z przyczyn wewnętrznych systemu. Spróbuj ponownie |',
    )
    isTokenRedeemed: bool | None = Field(
        None,
        description='Czy został już wydany refresh token powiązany z danym uwierzytelnieniem.',
    )
    lastTokenRefreshDate: datetime | None = Field(
        None, description='Data ostatniego odświeżenia tokena.'
    )
    refreshTokenValidUntil: datetime | None = Field(
        None,
        description='Termin ważności refresh tokena (o ile nie zostanie wcześniej unieważniony).',
    )


class AuthenticationTokenRefreshResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    accessToken: TokenInfo = Field(
        ...,
        description='Token dostępu, którego należy używać w wywołaniach chronionych zasobów API.',
    )


class AuthenticationTokensResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    accessToken: TokenInfo = Field(..., description='Token dostępu.')
    refreshToken: TokenInfo = Field(
        ...,
        description='Token umożliwiający odświeżenie tokenu dostępu.\n> Więcej informacji:\n> - [Odświeżanie tokena](https://github.com/CIRFMF/ksef-docs/blob/main/uwierzytelnianie.md#5-od%C5%9Bwie%C5%BCenie-tokena-dost%C4%99powego-accesstoken)',
    )


class BatchFilePartInfo(BaseModel):
    class Config:
        extra = Extra.forbid

    ordinalNumber: conint(ge=1) = Field(
        ..., description='Numer sekwencyjny części pliku paczki.'
    )
    fileSize: conint(ge=1) = Field(
        ..., description='Rozmiar zaszyfrowanej części pliku paczki w bajtach.'
    )
    fileHash: Sha256HashBase64 = Field(
        ...,
        description='Skrót SHA256 zaszyfrowanej części pliku paczki, zakodowany w formacie Base64.',
    )


class CertificateEnrollmentStatusResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    requestDate: datetime = Field(
        ..., description='Data złożenia wniosku certyfikacyjnego.'
    )
    status: StatusInfo = Field(
        ...,
        description='Informacje o aktualnym statusie.\n| Code | Description | Details |\n| --- | --- | --- |\n| 100 | Wniosek przyjęty do realizacji | - |\n| 200 | Wniosek obsłużony (certyfikat wygenerowany) | - |\n| 400 | Wniosek odrzucony | Klucz publiczny został już certyfikowany przez inny podmiot. |\n| 400 | Wniosek odrzucony | Osiągnięto dopuszczalny limit posiadanych certyfikatów. |\n| 500 | Nieznany błąd | - |\n| 550 | Operacja została anulowana przez system | Przetwarzanie zostało przerwane z przyczyn wewnętrznych systemu. Spróbuj ponownie |',
    )
    certificateSerialNumber: str | None = Field(
        None,
        description='Numer seryjny wygenerowanego certyfikatu (w formacie szesnastkowym). \nZwracany w przypadku prawidłowego przeprocesowania wniosku certyfikacyjnego.',
    )


class CertificateSubjectIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: CertificateSubjectIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=64) = Field(
        ..., description='Wartość identyfikatora.'
    )


class EffectiveContextLimits(BaseModel):
    class Config:
        extra = Extra.forbid

    onlineSession: OnlineSessionEffectiveContextLimits = Field(
        ..., description='Limity dla sesji interaktywnych.'
    )
    batchSession: BatchSessionEffectiveContextLimits = Field(
        ..., description='Limity dla sesji wsadowych.'
    )


class EffectiveSubjectLimits(BaseModel):
    class Config:
        extra = Extra.forbid

    enrollment: EnrollmentEffectiveSubjectLimits | None = None
    certificate: CertificateEffectiveSubjectLimits | None = None


class EnrollCertificateRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    certificateName: constr(
        regex=r'^[a-zA-Z0-9_\-\ ąćęłńóśźżĄĆĘŁŃÓŚŹŻ]+$', min_length=5, max_length=100
    ) = Field(..., description='Nazwa własna certyfikatu.')
    certificateType: KsefCertificateType = Field(
        ...,
        description='Typ certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |\n| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |\n',
    )
    csr: str = Field(
        ...,
        description='Wniosek certyfikacyjny PKCS#10 (CSR) w formacie DER, zakodowany w formacie Base64.',
    )
    validFrom: datetime | None = Field(
        None,
        description='Data rozpoczęcia ważności certyfikatu.\nJeśli nie zostanie podana, certyfikat będzie ważny od momentu jego wystawienia.',
    )


class EnrollCertificateResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    referenceNumber: ReferenceNumber = Field(
        ..., description='Numer referencyjny wniosku certyfikacyjnego.'
    )
    timestamp: datetime = Field(
        ..., description='Data złożenia wniosku certyfikacyjnego.'
    )


class EntityAuthorizationPermissionsSubjectIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: EntityAuthorizationPermissionsSubjectIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=9, max_length=10) = Field(
        ..., description='Wartość identyfikatora.'
    )


class EntityAuthorizationsAuthorIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: EntityAuthorizationsAuthorIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=64) = Field(
        ..., description='Wartość identyfikatora.'
    )


class EntityAuthorizationsAuthorizedEntityIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: EntityAuthorizationsAuthorizedEntityIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=9, max_length=10) = Field(
        ..., description='Wartość identyfikatora.'
    )


class EntityAuthorizationsAuthorizingEntityIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: EntityAuthorizationsAuthorizingEntityIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=10) = Field(
        ..., description='Wartość identyfikatora.'
    )


class EntityPermission(BaseModel):
    class Config:
        extra = Extra.forbid

    type: EntityPermissionType = Field(..., description='Rodzaj uprawnienia.')
    canDelegate: bool | None = Field(
        None,
        description='Flaga pozwalająca na pośrednie przekazywanie danego uprawnienia',
    )


class EntityPermissionsSubjectIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: EntityPermissionsSubjectIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=10) = Field(
        ..., description='Wartość identyfikatora.'
    )


class EntityPermissionsSubordinateEntityIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: EntityPermissionsSubordinateEntityIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=10) = Field(
        ..., description='Wartość identyfikatora.'
    )


class EntityRolesParentEntityIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: EntityRolesParentEntityIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=10) = Field(
        ..., description='Wartość identyfikatora.'
    )


class EuEntityAdministrationPermissionsContextIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: EuEntityAdministrationPermissionsContextIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=15, max_length=25) = Field(
        ..., description='Wartość identyfikatora.'
    )


class EuEntityAdministrationPermissionsSubjectIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: EuEntityAdministrationPermissionsSubjectIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=64, max_length=64) = Field(
        ..., description='Wartość identyfikatora.'
    )


class EuEntityPermissionsAuthorIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: EuEntityPermissionsAuthorIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=64) = Field(
        ..., description='Wartość identyfikatora.'
    )


class EuEntityPermissionsSubjectIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: EuEntityPermissionsSubjectIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=64, max_length=64) = Field(
        ..., description='Wartość identyfikatora.'
    )


class ExceptionInfo(BaseModel):
    class Config:
        extra = Extra.forbid

    exceptionDetailList: list[ExceptionDetails] | None = None
    referenceNumber: ReferenceNumber | None = None
    serviceCode: str | None = None
    serviceCtx: str | None = None
    serviceName: str | None = None
    timestamp: datetime | None = None


class ExceptionResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    exception: ExceptionInfo | None = None


class ExportInvoicesResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    referenceNumber: ReferenceNumber = Field(
        ..., description='Numer referencyjny eksportu faktur.'
    )


class GenerateTokenRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    permissions: list[TokenPermissionType] = Field(
        ..., description='Uprawnienia przypisane tokenowi.'
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis tokena.'
    )


class GenerateTokenResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    referenceNumber: ReferenceNumber = Field(
        ..., description='Numer referencyjny tokena KSeF.'
    )
    token: constr(max_length=160) = Field(..., description='Token KSeF.')


class IndirectPermissionsSubjectIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: IndirectPermissionsSubjectIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=64) = Field(
        ..., description='Wartość identyfikatora.'
    )


class IndirectPermissionsTargetIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: IndirectPermissionsTargetIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=16) | None = Field(
        None,
        description='Wartość identyfikatora. W przypadku typu AllPartners należy pozostawić puste. W pozostałych przypadkach pole jest wymagane.',
    )


class InitTokenAuthenticationRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    challenge: Challenge = Field(..., description='Wygenerowany wcześniej challenge.')
    contextIdentifier: AuthenticationContextIdentifier = Field(
        ...,
        description='Identyfikator kontekstu do którego następuje uwierzytelnienie.',
    )
    encryptedToken: str = Field(
        ...,
        description="Zaszyfrowany token wraz z timestampem z challenge'a, w postaci `token|timestamp`, zakodowany w formacie Base64.",
    )
    authorizationPolicy: AuthorizationPolicy | None = Field(
        None,
        description='Polityka autoryzacji żądań przy każdym użyciu tokena dostępu.',
    )


class InvoiceMetadataAuthorizedSubject(BaseModel):
    class Config:
        extra = Extra.forbid

    nip: Nip = Field(..., description='Nip podmiotu upoważnionego')
    name: constr(max_length=512) | None = Field(
        None, description='Nazwa podmiotu upoważnionego.'
    )
    role: int = Field(
        ...,
        description='Rola podmiotu upoważnionego.\n| Wartość | Opis |\n| ---- | --- |\n| 1 | Organ egzekucyjny - w przypadku, o którym mowa w art. 106c pkt 1 ustawy |\n| 2 | Komornik sądowy - w przypadku, o którym mowa w art. 106c pkt 2 ustawy |\n| 3 | Przedstawiciel podatkowy - w przypadku gdy na fakturze występują dane przedstawiciela podatkowego, o którym mowa w art. 18a - 18d ustawy |',
    )


class InvoiceMetadataBuyer(BaseModel):
    class Config:
        extra = Extra.forbid

    identifier: InvoiceMetadataBuyerIdentifier = Field(
        ...,
        description='Identyfikator nabywcy.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| VatUe | Identyfikator VAT UE podmiotu unijnego |\n| Other | Inny identyfikator|\n| None  | Brak identyfikatora nabywcy |',
    )
    name: constr(max_length=512) | None = Field(None, description='Nazwa nabywcy.')


class InvoiceMetadataSeller(BaseModel):
    class Config:
        extra = Extra.forbid

    nip: Nip = Field(..., description='Nip sprzedawcy.')
    name: constr(max_length=512) | None = Field(None, description='Nazwa sprzedawcy.')


class InvoiceMetadataThirdSubjectIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: ThirdSubjectIdentifierType = Field(
        ...,
        description='Typ identyfikatora podmiotu trzeciego.\n| Wartość | Opis |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| InternalId | Identyfikator wewnętrzny, składający się z numeru NIP i 5 cyfr. |\n| VatUe | Identyfikator VAT UE podmiotu unijnego |\n| Other | Inny identyfikator |\n| None | Brak identyfikatora podmiotu trzeciego |\n',
    )
    value: constr(max_length=50) | None = Field(
        None, description='Wartość identyfikatora podmiotu trzeciego.'
    )


class InvoicePackagePart(BaseModel):
    class Config:
        extra = Extra.forbid

    ordinalNumber: conint(ge=1) = Field(
        ..., description='Numer sekwencyjny pliku części paczki.'
    )
    partName: constr(max_length=100) = Field(
        ..., description='Nazwa pliku części paczki.'
    )
    method: str = Field(
        ..., description='Metoda HTTP, której należy użyć przy pobieraniu pliku.'
    )
    url: AnyUrl = Field(
        ...,
        description='Adres URL, pod który należy wysłać żądanie pobrania części paczki.\nLink jest generowany dynamicznie w momencie odpytania o status operacji eksportu.\nNie podlega limitom API i nie wymaga przesyłania tokenu dostępowego przy pobraniu.\n\nOdpowiedź HTTP zawiera dodatkowe nagłówki:\n- `x-ms-meta-hash` – zaszyfrowanej części paczki, zakodowany w formacie Base64.',
    )
    partSize: conint(ge=1) = Field(..., description='Rozmiar części paczki w bajtach.')
    partHash: Sha256HashBase64 = Field(
        ...,
        description='Skrót SHA256 pliku części paczki, zakodowany w formacie Base64.',
    )
    encryptedPartSize: conint(ge=1) = Field(
        ..., description='Rozmiar zaszyfrowanej części paczki w bajtach.'
    )
    encryptedPartHash: Sha256HashBase64 = Field(
        ...,
        description='Skrót SHA256 zaszyfrowanej części paczki, zakodowany w formacie Base64.',
    )
    expirationDate: datetime = Field(
        ...,
        description='Data i godzina wygaśnięcia linku umożliwiającego pobranie części paczki.\nPo upływie tego momentu link przestaje być aktywny.',
    )


class InvoiceQueryDateRange(BaseModel):
    class Config:
        extra = Extra.forbid

    dateType: InvoiceQueryDateType = Field(
        ...,
        description='Typ daty, według której ma być zastosowany zakres.\n| Wartość | Opis |\n| --- | --- |\n| Issue | Data wystawienia faktury. |\n| Invoicing | Data przyjęcia faktury w systemie KSeF (do dalszego przetwarzania). |\n| PermanentStorage | Data trwałego zapisu faktury w repozytorium systemu KSeF. |\n',
    )
    from_: datetime = Field(
        ...,
        alias='from',
        description='Data początkowa zakresu w formacie ISO-8601 np. 2026-01-03T13:45:00+00:00.',
    )
    to: datetime | None = Field(
        None,
        description='Data końcowa zakresu w formacie ISO-8601. Jeśli nie zostanie podana, przyjmowana jest bieżąca data i czas w UTC.',
    )
    restrictToPermanentStorageHwmDate: bool | None = Field(
        None,
        description='Określa, czy system ma ograniczyć filtrowanie (zakres dateRange.to) do wartości `PermanentStorageHwmDate`.\n\n* Dotyczy wyłącznie zapytań z `dateType = PermanentStorage`,  \n* Gdy `true`, system ogranicza filtrowanie tak, aby wartość `dateRange.to` nie przekraczała wartości `PermanentStorageHwmDate`,  \n* Gdy `null` lub `false`, filtrowanie może wykraczać poza `PermanentStorageHwmDate`.',
    )


class InvoiceQueryFilters(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectType: InvoiceQuerySubjectType = Field(
        ...,
        description='Typ podmiotu, którego dotyczą kryteria filtrowania metadanych faktur.\nOkreśla kontekst, w jakim przeszukiwane są dane.\n| Wartość | Opis |\n| --- | --- |\n| Subject1 | Podmiot 1 - sprzedawca |\n| Subject2 | Podmiot 2 - nabywca |\n| Subject3 | Podmiot 3 |\n| SubjectAuthorized | Podmiot upoważniony |\n',
    )
    dateRange: InvoiceQueryDateRange = Field(
        ...,
        description='Typ i zakres dat, według którego filtrowane są faktury.\nMaksymalny dozwolony okres wynosi 3 miesiące w strefie UTC lub w strefie Europe/Warsaw (WAW).\n            \nFormat daty:\n * Daty muszą być przekazane w formacie ISO 8601, np. `yyyy-MM-ddTHH:mm:ss`.\n * Dopuszczalne są następujące warianty:\n   - z sufiksem `Z` (czas UTC),\n   - z jawnym offsetem, np. `+01:00`, `+03:00`,\n   - bez offsetu (interpretowane jako czas lokalny strefy Europe/Warsaw).',
    )
    ksefNumber: KsefNumber | None = Field(
        None, description='Numer KSeF faktury (exact match).'
    )
    invoiceNumber: constr(max_length=256) | None = Field(
        None, description='Numer faktury nadany przez wystawcę (exact match).'
    )
    amount: InvoiceQueryAmount | None = Field(
        None, description='Filtr kwotowy – brutto, netto lub VAT (z wartością).'
    )
    sellerNip: Nip | None = Field(None, description='Nip sprzedawcy (exact match).')
    buyerIdentifier: InvoiceQueryBuyerIdentifier | None = Field(
        None,
        description='Identyfikator nabywcy.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| VatUe | Identyfikator VAT UE podmiotu unijnego. |\n| Other | Inny identyfikator|\n| None  | Brak identyfikatora nabywcy |',
    )
    currencyCodes: list[CurrencyCode] | None = Field(None, description='Kody walut.')
    invoicingMode: InvoicingMode | None = Field(
        None, description='Tryb wystawienia faktury: online lub offline.'
    )
    isSelfInvoicing: bool | None = Field(
        None, description='Czy faktura została wystawiona w trybie samofakturowania.'
    )
    formType: InvoiceQueryFormType | None = Field(
        None,
        description='Typ dokumentu.\n| Wartość | Opis |\n| --- | --- |\n| FA | Faktura VAT |\n| PEF | Faktura PEF |\n| RR | Faktura RR |\n',
    )
    invoiceTypes: list[InvoiceType] | None = Field(
        None,
        description='Rodzaje faktur.\n| Wartość | Opis |\n| --- | --- |\n| Vat | (FA) Podstawowa |\n| Zal | (FA) Zaliczkowa |\n| Kor | (FA) Korygująca |\n| Roz | (FA) Rozliczeniowa |\n| Upr | (FA) Uproszczona |\n| KorZal | (FA) Korygująca fakturę zaliczkową |\n| KorRoz | (FA) Korygująca fakturę rozliczeniową |\n| VatPef | (PEF) Podstawowa |\n| VatPefSp | (PEF) Specjalizowana |\n| KorPef | (PEF) Korygująca |\n| VatRr | (RR) Podstawowa |\n| KorVatRr | (RR) Korygująca |\n',
    )
    hasAttachment: bool | None = Field(None, description='Czy faktura ma załącznik.')


class OpenBatchSessionResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    referenceNumber: ReferenceNumber = Field(
        ..., description='Numer referencyjny sesji.'
    )
    partUploadRequests: list[PartUploadRequest] = Field(
        ...,
        description='Dane wymagane do poprawnego przesłania poszczególnych części pliku paczki faktur.\n\nKażdą część pliku paczki zadeklarowaną w <b>fileParts</b> należy przesłać zgodnie z odpowiadającym jej obiektem w <b>partUploadRequests</b>.\nŁącznikiem pomiędzy deklaracją a instrukcją wysyłki jest pole <b>ordinalNumber</b>.\n\nDla każdej części należy:\n* zastosować metodę HTTP wskazaną w <b>method</b>,\n* ustawić adres z <b>url</b>,\n* dołączyć nagłówki z <b>headers</b>,\n* dołączyć treść części pliku w korpusie żądania.\n\n`Uwaga: nie należy dodawać do nagłówków token dostępu (accessToken).`\n \nKażdą część przesyła się oddzielnym żądaniem HTTP.Zwracane kody odpowiedzi:\n * <b>201</b> – poprawne przyjęcie pliku,\n * <b>400</b> – błędne dane,\n * <b>401</b> – nieprawidłowe uwierzytelnienie,\n * <b>403</b> – brak uprawnień do zapisu (np.upłynął czas na zapis).',
    )


class OpenOnlineSessionResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    referenceNumber: ReferenceNumber = Field(
        ..., description='Numer referencyjny sesji.'
    )
    validUntil: datetime = Field(
        ...,
        description='Termin ważności sesji. Po jego upływie sesja zostanie automatycznie zamknięta.',
    )


class PermissionsOperationResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    referenceNumber: ReferenceNumber = Field(
        ..., description='Numer referencyjny operacji nadania lub odbierania uprawnień.'
    )


class PermissionsOperationStatusResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    status: StatusInfo = Field(
        ...,
        description='Informacje o aktualnym statusie.\n| Code | Description | Details |\n| --- | --- | --- |\n| 100 | Operacja przyjęta do realizacji | - |\n| 200 | Operacja zakończona sukcesem | - |\n| 400 | Operacja zakończona niepowodzeniem | - |\n| 410 | Podane identyfikatory są niezgodne lub pozostają w niewłaściwej relacji | - |\n| 420 | Użyte poświadczenia nie mają uprawnień do wykonania tej operacji | - |\n| 430 | Kontekst identyfikatora nie odpowiada wymaganej roli lub uprawnieniom | - |\n| 440 | Operacja niedozwolona dla wskazanych powiązań identyfikatorów | - |\n| 450 | Operacja niedozwolona dla wskazanego identyfikatora lub jego typu | - |\n| 500 | Nieznany błąd | - |\n| 550 | Operacja została anulowana przez system | Przetwarzanie zostało przerwane z przyczyn wewnętrznych systemu. Spróbuj ponownie później. |',
    )


class PersonCreateRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    nip: Nip
    pesel: Pesel
    isBailiff: bool
    description: constr(min_length=5, max_length=256)
    isDeceased: bool | None = None
    createdDate: datetime | None = Field(
        None,
        description='W przypadku wielokrotnego tworzenia danych testowych z tym samym identyfikatorem nie można podawać daty wcześniejszej ani takiej samej jak poprzednia.',
    )


class PersonIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: PersonIdentifierType = Field(..., description='Typ identyfikatora.')
    value: constr(min_length=10, max_length=11) = Field(
        ..., description='Wartość identyfikatora.'
    )


class PersonPermissionsAuthorIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: PersonPermissionsAuthorIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=64) | None = Field(
        None,
        description='Wartość identyfikatora. W przypadku typu System należy pozostawić puste. W pozostałych przypadkach pole jest wymagane.',
    )


class PersonPermissionsAuthorizedIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: PersonPermissionsAuthorizedIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=64) = Field(
        ..., description='Wartość identyfikatora.'
    )


class PersonPermissionsContextIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: PersonPermissionsContextIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=16) = Field(
        ..., description='Wartość identyfikatora.'
    )


class PersonPermissionsSubjectIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: PersonPermissionsSubjectIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=64) = Field(
        ..., description='Wartość identyfikatora.'
    )


class PersonPermissionsTargetIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: PersonPermissionsTargetIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=16) | None = Field(
        None,
        description='Wartość identyfikatora. W przypadku typu AllPartners należy pozostawić puste. W pozostałych przypadkach pole jest wymagane.',
    )


class PersonalPermissionsAuthorizedIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: PersonalPermissionsAuthorizedIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=64) = Field(
        ..., description='Wartość identyfikatora.'
    )


class PersonalPermissionsContextIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: PersonalPermissionsContextIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=16) = Field(
        ..., description='Wartość identyfikatora.'
    )


class PersonalPermissionsTargetIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: PersonalPermissionsTargetIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=16) | None = Field(
        None,
        description='Wartość identyfikatora. W przypadku typu AllPartners należy pozostawić puste. W pozostałych przypadkach pole jest wymagane.',
    )


class PublicKeyCertificate(BaseModel):
    class Config:
        extra = Extra.forbid

    certificate: str = Field(
        ...,
        description='Certyfikat klucza publicznego w formacie DER, zakodowany w formacie Base64.',
    )
    validFrom: datetime = Field(
        ..., description='Data początku obowiązywania certyfikatu.'
    )
    validTo: datetime = Field(..., description='Data końca obowiązywania certyfikatu.')
    usage: list[PublicKeyCertificateUsage] = Field(
        ...,
        description='Operacje do których może być używany certyfikat.\n| Wartość | Opis |\n| --- | --- |\n| KsefTokenEncryption | Szyfrowanie tokenów KSeF przesyłanych w trakcie procesu uwierzytelniania. |\n| SymmetricKeyEncryption | Szyfrowanie klucza symetrycznego wykorzystywanego do szyfrowania przesyłanych faktur. |\n',
    )


class QueryTokensResponseItem(BaseModel):
    class Config:
        extra = Extra.forbid

    referenceNumber: ReferenceNumber = Field(
        ..., description='Numer referencyjny tokena KSeF.'
    )
    authorIdentifier: TokenAuthorIdentifierTypeIdentifier = Field(
        ..., description='Identyfikator osoby która wygenerowała token.'
    )
    contextIdentifier: TokenContextIdentifierTypeIdentifier = Field(
        ...,
        description='Identyfikator kontekstu, w którym został wygenerowany token i do którego daje dostęp.',
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis tokena.'
    )
    requestedPermissions: list[TokenPermissionType] = Field(
        ..., description='Uprawnienia przypisane tokenowi.'
    )
    dateCreated: datetime = Field(..., description='Data i czas utworzenia tokena.')
    lastUseDate: datetime | None = Field(
        None, description='Data ostatniego użycia tokena.'
    )
    status: AuthenticationTokenStatus = Field(
        ...,
        description='Status tokena.\n| Wartość | Opis |\n| --- | --- |\n| Pending | Token został utworzony ale jest jeszcze w trakcie aktywacji i nadawania uprawnień. Nie może być jeszcze wykorzystywany do uwierzytelniania. |\n| Active | Token jest aktywny i może być wykorzystywany do uwierzytelniania. |\n| Revoking | Token jest w trakcie unieważniania. Nie może już być wykorzystywany do uwierzytelniania. |\n| Revoked | Token został unieważniony i nie może być wykorzystywany do uwierzytelniania. |\n| Failed | Nie udało się aktywować tokena. Należy wygenerować nowy token, obecny nie może być wykorzystywany do uwierzytelniania. |\n',
    )
    statusDetails: list[str] | None = Field(
        None,
        description='Dodatkowe informacje na temat statusu, zwracane w przypadku błędów.',
    )


class SendInvoiceRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    invoiceHash: Sha256HashBase64 = Field(
        ...,
        description='Skrót SHA256 oryginalnej faktury, zakodowany w formacie Base64.',
    )
    invoiceSize: conint(ge=1) = Field(
        ...,
        description='Rozmiar oryginalnej faktury w bajtach. Maksymalny rozmiar zależy od limitów ustawionych dla uwierzytelnionego kontekstu.',
    )
    encryptedInvoiceHash: Sha256HashBase64 = Field(
        ...,
        description='Skrót SHA256 zaszyfrowanej faktury, zakodowany w formacie Base64.',
    )
    encryptedInvoiceSize: conint(ge=1) = Field(
        ..., description='Rozmiar zaszyfrowanej faktury w bajtach.'
    )
    encryptedInvoiceContent: str = Field(
        ...,
        description='Faktura zaszyfrowana algorytmem AES-256-CBC z dopełnianiem PKCS#7 (kluczem przekazanym przy otwarciu sesji), zakodowana w formacie Base64.',
    )
    offlineMode: bool | None = Field(
        False,
        description='Określa, czy podatnik deklaruje tryb fakturowania "offline" dla przesyłanego dokumentu.',
    )
    hashOfCorrectedInvoice: Sha256HashBase64 | None = Field(
        None,
        description='Skrót SHA256 korygowanej faktury, zakodowany w formacie Base64. Wymagany przy wysyłaniu korekty technicznej faktury.',
    )


class SessionInvoiceStatusResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    ordinalNumber: conint(ge=1) = Field(
        ..., description='Numer sekwencyjny faktury w ramach sesji.'
    )
    invoiceNumber: constr(max_length=256) | None = Field(
        None, description='Numer faktury.'
    )
    ksefNumber: KsefNumber | None = Field(None, description='Numer KSeF.')
    referenceNumber: ReferenceNumber = Field(
        ..., description='Numer referencyjny faktury.'
    )
    invoiceHash: Sha256HashBase64 = Field(
        ..., description='Skrót SHA256 faktury, zakodowany w formacie Base64.'
    )
    invoiceFileName: constr(max_length=128) | None = Field(
        None,
        description='Nazwa pliku faktury (zwracana dla faktur wysyłanych wsadowo).',
    )
    acquisitionDate: datetime | None = Field(
        None, description='Data nadania numeru KSeF.'
    )
    invoicingDate: datetime = Field(
        ...,
        description='Data przyjęcia faktury w systemie KSeF (do dalszego przetwarzania).',
    )
    permanentStorageDate: datetime | None = Field(
        None,
        description='Data trwałego zapisu faktury w repozytorium KSeF. Wartość uzupełniana asynchronicznie w momencie trwałego zapisu; zawsze późniejsza niż <b>acquisitionDate</b>. Podczas sprawdzania statusu może być jeszcze niedostępna.',
    )
    upoDownloadUrl: AnyUrl | None = Field(
        None,
        description='Adres do pobrania UPO. Link generowany jest przy każdym odpytaniu o status. \nDostęp odbywa się metodą `HTTP GET` i <b>nie należy</b> wysyłać tokenu dostępowego. \nLink nie podlega limitom API i wygasa po określonym czasie w `UpoDownloadUrlExpirationDate`.\n\nOdpowiedź HTTP zawiera dodatkowe nagłówki:\n- `x-ms-meta-hash` – skrót SHA-256 dokumentu UPO, zakodowany w formacie Base64.',
    )
    upoDownloadUrlExpirationDate: datetime | None = Field(
        None,
        description='Data i godzina wygaśnięcia adresu. Po tej dacie link `UpoDownloadUrl` nie będzie już aktywny.',
    )
    invoicingMode: InvoicingMode | None = Field(
        None, description='Tryb fakturowania (online/offline).'
    )
    status: InvoiceStatusInfo = Field(
        ...,
        description="Status faktury.\n\n| Code | Description | Details | Extensions |\n| --- | --- | --- | ---|\n| 100 | Faktura przyjęta do dalszego przetwarzania | - | - |\n| 150 | Trwa przetwarzanie | - | - |\n| 200 | Sukces | - | - |\n| 405 | Przetwarzanie anulowane z powodu błędu sesji | - | - |\n| 410 | Nieprawidłowy zakres uprawnień | - |  - |\n| 415 | Brak możliwości wysyłania faktury z załącznikiem | - | - |\n| 430 | Błąd weryfikacji pliku faktury | - | -  |\n| 435 | Błąd odszyfrowania pliku | - | - |\n| 440 | Duplikat faktury | - | 'originalSessionReferenceNumber', 'originalKsefNumber'|\n| 450 | Błąd weryfikacji semantyki dokumentu faktury | - | - |\n| 500 | Nieznany błąd ({statusCode}) | - | - |\n| 550 | Operacja została anulowana przez system | Przetwarzanie zostało przerwane z przyczyn wewnętrznych systemu. Spróbuj ponownie |- |",
    )


class SessionInvoicesResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    continuationToken: str | None = Field(
        None,
        description='Token służący do pobrania kolejnej strony wyników. Jeśli jest pusty, to nie ma kolejnych stron.',
    )
    invoices: list[SessionInvoiceStatusResponse] = Field(
        ..., description='Lista pobranych faktur.'
    )


class SessionStatusResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    status: StatusInfo = Field(
        ...,
        description='Informacje o aktualnym statusie.\n            \nSesja wsadowa:\n| Code | Description | Details |\n| --- | --- | --- |\n| 100 | Sesja wsadowa rozpoczęta | - |\n| 150 | Trwa przetwarzanie | - |\n| 200 | Sesja wsadowa przetworzona pomyślnie | - |\n| 405 | Błąd weryfikacji poprawności dostarczonych elementów paczki | - |\n| 415 | Błąd odszyfrowania dostarczonego klucza | - |\n| 420 | Przekroczony limit faktur w sesji | - |\n| 430 | Błąd dekompresji pierwotnego archiwum | - |\n| 435 | Błąd odszyfrowania zaszyfrowanych części archiwum | - |\n| 440 | Sesja anulowana | Przekroczono czas wysyłki |\n| 440 | Sesja anulowana | Nie przesłano faktur |\n| 445 | Błąd weryfikacji, brak poprawnych faktur | - |\n| 500 | Nieznany błąd ({statusCode}) | - |\n\nSesja interaktywna:\n| Code | Description | Details |\n| --- | --- | --- |\n| 100 | Sesja interaktywna otwarta | - |\n| 170 | Sesja interaktywna zamknięta | - |\n| 200 | Sesja interaktywna przetworzona pomyślnie | - |\n| 415 | Błąd odszyfrowania dostarczonego klucza | - |\n| 440 | Sesja anulowana | Nie przesłano faktur |\n| 445 | Błąd weryfikacji, brak poprawnych faktur | - |\n| * | description missing | - |',
    )
    dateCreated: datetime = Field(..., description='Data utworzenia sesji.')
    dateUpdated: datetime = Field(
        ..., description='Data ostatniej aktywności w ramach sesji.'
    )
    validUntil: datetime | None = Field(
        None,
        description='Termin ważności sesji. Po jego upływie sesja zostanie automatycznie zamknięta.',
    )
    upo: UpoResponse | None = Field(
        None,
        description='Informacja o UPO sesyjnym, zwracana gdy sesja została zamknięta i UPO zostało wygenerowane.',
    )
    invoiceCount: conint(ge=0) | None = Field(
        None, description='Liczba przyjętych faktur w ramach sesji.'
    )
    successfulInvoiceCount: conint(ge=0) | None = Field(
        None, description='Liczba faktur przeprocesowanych w ramach sesji z sukcesem .'
    )
    failedInvoiceCount: conint(ge=0) | None = Field(
        None, description='Liczba faktur przeprocesowanych w ramach sesji z błędem.'
    )


class SessionsQueryResponseItem(BaseModel):
    class Config:
        extra = Extra.forbid

    referenceNumber: ReferenceNumber = Field(
        ..., description='Numer referencyjny sesji.'
    )
    status: StatusInfo = Field(..., description='Status sesji.')
    dateCreated: datetime = Field(..., description='Data utworzenia sesji.')
    dateUpdated: datetime = Field(
        ..., description='Data ostatniej aktywności w ramach sesji.'
    )
    validUntil: datetime | None = Field(
        None,
        description='Termin ważności sesji. Po jego upływie sesja interaktywna zostanie automatycznie zamknięta.',
    )
    totalInvoiceCount: conint(ge=0) = Field(
        ...,
        description='Łączna liczba faktur (uwzględnia również te w trakcie przetwarzania).',
    )
    successfulInvoiceCount: conint(ge=0) = Field(
        ..., description='Liczba poprawnie przetworzonych faktur.'
    )
    failedInvoiceCount: conint(ge=0) = Field(
        ..., description='Liczba błędnie przetworzonych faktur.'
    )


class SetSubjectLimitsRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectIdentifierType: SubjectIdentifierType | None = None
    enrollment: EnrollmentSubjectLimitsOverride | None = None
    certificate: CertificateSubjectLimitsOverride | None = None


class SubjectCreateRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectNip: Nip
    subjectType: SubjectType
    subunits: list[Subunit] | None = None
    description: constr(min_length=5, max_length=256)
    createdDate: datetime | None = Field(
        None,
        description='W przypadku wielokrotnego tworzenia danych testowych z tym samym identyfikatorem nie można podawać daty wcześniejszej ani takiej samej jak poprzednia.',
    )


class SubordinateEntityRolesQueryRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    subordinateEntityIdentifier: EntityPermissionsSubordinateEntityIdentifier | None = (
        Field(
            None,
            description='Identyfikator podmiotu podrzędnego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |',
        )
    )


class SubordinateRoleSubordinateEntityIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: SubordinateRoleSubordinateEntityIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=10) = Field(
        ..., description='Wartość identyfikatora.'
    )


class SubunitPermissionsAuthorIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: SubunitPermissionsAuthorIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=64) = Field(
        ..., description='Wartość identyfikatora.'
    )


class SubunitPermissionsAuthorizedIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: SubunitPermissionsSubjectIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=64) = Field(
        ..., description='Wartość identyfikatora.'
    )


class SubunitPermissionsContextIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: SubunitPermissionsContextIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=16) = Field(
        ..., description='Wartość identyfikatora.'
    )


class SubunitPermissionsSubjectIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: SubunitPermissionsSubjectIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=64) = Field(
        ..., description='Wartość identyfikatora.'
    )


class SubunitPermissionsSubunitIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: SubunitPermissionsSubunitIdentifierType = Field(
        ..., description='Typ identyfikatora.'
    )
    value: constr(min_length=10, max_length=16) = Field(
        ..., description='Wartość identyfikatora.'
    )


class TestDataAuthenticationContextIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    value: str
    type: TestDataAuthenticationContextIdentifierType


class TestDataAuthorizedIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: TestDataAuthorizedIdentifierType
    value: constr(min_length=10, max_length=64)


class TestDataContextIdentifier(BaseModel):
    class Config:
        extra = Extra.forbid

    type: TestDataContextIdentifierType
    value: constr(min_length=10, max_length=10)


class TestDataPermission(BaseModel):
    class Config:
        extra = Extra.forbid

    description: constr(min_length=5, max_length=256)
    permissionType: TestDataPermissionType


class TestDataPermissionsGrantRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    contextIdentifier: TestDataContextIdentifier
    authorizedIdentifier: TestDataAuthorizedIdentifier
    permissions: list[TestDataPermission]


class TestDataPermissionsRevokeRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    contextIdentifier: TestDataContextIdentifier
    authorizedIdentifier: TestDataAuthorizedIdentifier


class UnblockContextAuthenticationRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    contextIdentifier: TestDataAuthenticationContextIdentifier | None = None


class BatchFileInfo(BaseModel):
    class Config:
        extra = Extra.forbid

    fileSize: conint(ge=1, le=5000000000) = Field(
        ...,
        description='Rozmiar pliku paczki w bajtach. Maksymalny rozmiar paczki to 5GB.',
    )
    fileHash: Sha256HashBase64 = Field(
        ..., description='Skrót SHA256 pliku paczki, zakodowany w formacie Base64.'
    )
    fileParts: list[BatchFilePartInfo] = Field(
        ...,
        description='Informacje o częściach pliku paczki. Maksymalna liczba części to 50. Maksymalny dozwolony rozmiar części przed zaszyfrowaniem to 100MB.',
        max_items=50,
        min_items=1,
    )


class BlockContextAuthenticationRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    contextIdentifier: TestDataAuthenticationContextIdentifier | None = None


class CertificateListItem(BaseModel):
    class Config:
        extra = Extra.forbid

    certificateSerialNumber: str = Field(
        ..., description='Numer seryjny certyfikatu (w formacie szesnastkowym).'
    )
    name: constr(max_length=100) = Field(..., description='Nazwa własna certyfikatu.')
    type: KsefCertificateType = Field(
        ...,
        description='Typ certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Authentication | Certyfikat używany do uwierzytelnienia w systemie. |\n| Offline | Certyfikat używany wyłącznie do potwierdzania autentyczności wystawcy i integralności faktury w trybie offline |\n',
    )
    commonName: str = Field(
        ...,
        description='Nazwa powszechna (CN) podmiotu, dla którego wystawiono certyfikat.',
    )
    status: CertificateListItemStatus = Field(
        ...,
        description='Status certyfikatu.\n| Wartość | Opis |\n| --- | --- |\n| Active | Certyfikat jest aktywny i może zostać użyty do uwierzytelnienia lub realizacji operacji w trybie offline (w zależności od typu certyfikatu). |\n| Blocked | Certyfikat został zablokowany i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline.            Status przejściowy do czasu zakończenia procesu unieważniania. |\n| Revoked | Certyfikat został unieważniony i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n| Expired | Certyfikat wygasł i nie może zostać użyty do uwierzytelnienia i realizacji operacji w trybie offline. |\n',
    )
    subjectIdentifier: CertificateSubjectIdentifier = Field(
        ..., description='Identyfikator podmiotu, dla którego wystawiono certyfikat.'
    )
    validFrom: datetime = Field(
        ..., description='Data rozpoczęcia ważności certyfikatu.'
    )
    validTo: datetime = Field(..., description='Data wygaśnięcia certyfikatu.')
    lastUseDate: datetime | None = Field(
        None, description='Data ostatniego użycia certyfikatu.'
    )
    requestDate: datetime = Field(
        ..., description='Data złożenia wniosku certyfikacyjnego.'
    )


class EntityAuthorizationGrant(BaseModel):
    class Config:
        extra = Extra.forbid

    id: PermissionId = Field(..., description='Identyfikator uprawnienia.')
    authorIdentifier: EntityAuthorizationsAuthorIdentifier | None = Field(
        None,
        description='Identyfikator osoby nadającej uprawnienie.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |',
    )
    authorizedEntityIdentifier: EntityAuthorizationsAuthorizedEntityIdentifier = Field(
        ...,
        description='Identyfikator podmiotu uprawnionego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| PeppolId | Identyfikator dostawcy usług Peppol |',
    )
    authorizingEntityIdentifier: EntityAuthorizationsAuthorizingEntityIdentifier = (
        Field(
            ...,
            description='Identyfikator podmiotu uprawniającego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |',
        )
    )
    authorizationScope: InvoicePermissionType = Field(
        ..., description='Rodzaj uprawnienia.'
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis uprawnienia.'
    )
    subjectEntityDetails: PermissionsSubjectEntityByIdentifierDetails | None = Field(
        None, description='Dane podmiotu uprawnionego.'
    )
    startDate: datetime = Field(
        ..., description='Data rozpoczęcia obowiązywania uprawnienia.'
    )


class EntityAuthorizationPermissionsGrantRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectIdentifier: EntityAuthorizationPermissionsSubjectIdentifier = Field(
        ...,
        description='Identyfikator podmiotu uprawnianego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| PeppolId | Identyfikator dostawcy usług Peppol |',
    )
    permission: EntityAuthorizationPermissionType = Field(
        ..., description='Rodzaj uprawnienia.'
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis uprawnienia'
    )
    subjectDetails: EntityDetails = Field(
        ..., description='Dane podmiotu, któremu nadawane są uprawnienia.'
    )


class EntityAuthorizationPermissionsQueryRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    authorizingIdentifier: EntityAuthorizationsAuthorizingEntityIdentifier | None = (
        Field(
            None,
            description='Identyfikator podmiotu uprawniającego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |',
        )
    )
    authorizedIdentifier: EntityAuthorizationsAuthorizedEntityIdentifier | None = Field(
        None,
        description='Identyfikator podmiotu uprawnionego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| PeppolId | Identyfikator dostawcy usług Peppol |',
    )
    queryType: QueryType = Field(
        ...,
        description='Typ zapytania.\n| Type | Value |\n| --- | --- |\n| Granted | Uprawnienia nadane innym podmiotom |\n| Received | Uprawnienia otrzymane od innych podmiotów |',
    )
    permissionTypes: list[InvoicePermissionType] | None = Field(
        None, description='Lista rodzajów wyszukiwanych uprawnień.'
    )


class EntityPermissionsGrantRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectIdentifier: EntityPermissionsSubjectIdentifier = Field(
        ...,
        description='Identyfikator podmiotu.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |',
    )
    permissions: list[EntityPermission] = Field(
        ...,
        description='Lista nadawanych uprawnień. Każda wartość może wystąpić tylko raz.',
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis uprawnienia'
    )
    subjectDetails: EntityDetails = Field(
        ..., description='Dane podmiotu, któremu nadawane są uprawnienia.'
    )


class EntityRole(BaseModel):
    class Config:
        extra = Extra.forbid

    parentEntityIdentifier: EntityRolesParentEntityIdentifier | None = Field(
        None,
        description='Identyfikator podmiotu nadrzędnego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |',
    )
    role: EntityRoleType = Field(
        ..., description='Typ roli - powiązania z podmiotem nadrzędnym.'
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis roli.'
    )
    startDate: datetime = Field(..., description='Data rozpoczęcia obowiązywania roli.')


class InvoiceExportRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    encryption: EncryptionInfo = Field(
        ..., description='Informacje wymagane do zaszyfrowania wyniku zapytania.'
    )
    filters: InvoiceQueryFilters = Field(
        ..., description='Zestaw filtrów do wyszukiwania faktur.'
    )


class InvoiceMetadataThirdSubject(BaseModel):
    class Config:
        extra = Extra.forbid

    identifier: InvoiceMetadataThirdSubjectIdentifier
    name: constr(max_length=512) | None = Field(
        None, description='Nazwa podmiotu trzeciego.'
    )
    role: int = Field(
        ...,
        description='Rola podmiotu trzeciego.\n| Wartość | Opis |\n| ---- | --- |\n| 0 | Inna rola |\n| 1 | Faktor - w przypadku gdy na fakturze występują dane faktora |\n| 2 | Odbiorca - w przypadku gdy na fakturze występują dane jednostek wewnętrznych, oddziałów, wyodrębnionych w ramach nabywcy, które same nie stanowią nabywcy w rozumieniu ustawy |\n| 3 | Podmiot pierwotny - w przypadku gdy na fakturze występują dane podmiotu będącego w stosunku do podatnika podmiotem przejętym lub przekształconym, który dokonywał dostawy lub świadczył usługę. Z wyłączeniem przypadków, o których mowa w art. 106j ust.2 pkt 3 ustawy, gdy dane te wykazywane są w części Podmiot1K |\n| 4 | Dodatkowy nabywca - w przypadku gdy na fakturze występują dane kolejnych (innych niż wymieniony w części Podmiot2) nabywców |\n| 5 | Wystawca faktury - w przypadku gdy na fakturze występują dane podmiotu wystawiającego fakturę w imieniu podatnika. Nie dotyczy przypadku, gdy wystawcą faktury jest nabywca |\n| 6 | Dokonujący płatności - w przypadku gdy na fakturze występują dane podmiotu regulującego zobowiązanie w miejsce nabywcy |\n| 7 | Jednostka samorządu terytorialnego - wystawca |\n| 8 | Jednostka samorządu terytorialnego - odbiorca |\n| 9 | Członek grupy VAT - wystawca |\n| 10 | Członek grupy VAT - odbiorca |\n| 11 | Pracownik |',
    )


class InvoicePackage(BaseModel):
    class Config:
        extra = Extra.forbid

    invoiceCount: conint(ge=0, le=10000) = Field(
        ..., description='Łączna liczba faktur w paczce.'
    )
    size: conint(ge=0) = Field(..., description='Rozmiar paczki w bajtach.')
    parts: list[InvoicePackagePart] = Field(
        ..., description='Lista dostępnych części paczki do pobrania.'
    )
    isTruncated: bool = Field(
        ...,
        description='Określa, czy wynik eksportu został ucięty z powodu przekroczenia limitu liczby faktur lub wielkości paczki.',
    )
    lastIssueDate: date | None = Field(
        None,
        description='Data wystawienia ostatniej faktury ujętej w paczce.\nPole występuje wyłącznie wtedy, gdy paczka została ucięta i eksport był filtrowany po typie daty `Issue`.',
    )
    lastInvoicingDate: datetime | None = Field(
        None,
        description='Data przyjęcia ostatniej faktury ujętej w paczce.\nPole występuje wyłącznie wtedy, gdy paczka została ucięta i eksport był filtrowany po typie daty `Invoicing`.',
    )
    lastPermanentStorageDate: datetime | None = Field(
        None,
        description='Data trwałego zapisu ostatniej faktury ujętej w paczce.\nPole występuje wyłącznie wtedy, gdy paczka została ucięta i eksport był filtrowany po typie daty `PermanentStorage`.',
    )
    permanentStorageHwmDate: datetime | None = Field(
        None,
        description='Dotyczy wyłącznie zapytań filtrowanych po typie daty <b>PermanentStorage</b>.\nJeśli zapytanie dotyczyło najnowszego okresu, wartość ta może być wartością nieznacznie skorygowaną względem górnej granicy podanej w warunkach zapytania.\nDla okresów starszych, będzie to zgodne z warunkami zapytania. \n\nSystem gwarantuje, że dane poniżej tej wartości są spójne i kompletne.\nPonowne zapytania obejmujące zakresem dane poniżej tego kroczącego znacznika czasu nie zwrócą w przyszłości innych wyników (np.dodatkowych faktur). \n\nDla dateType = Issue lub Invoicing – null.',
    )


class OpenBatchSessionRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    formCode: FormCode = Field(
        ...,
        description='Schemat faktur wysyłanych w ramach sesji.\n\nObsługiwane schematy:\n| SystemCode | SchemaVersion | Value |\n| --- | --- | --- |\n| [FA (2)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/FA/schemat_FA(2)_v1-0E.xsd) | 1-0E | FA |\n| [FA (3)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/FA/schemat_FA(3)_v1-0E.xsd) | 1-0E | FA |\n',
    )
    batchFile: BatchFileInfo = Field(
        ..., description='Informacje o przesyłanej paczce faktur.'
    )
    encryption: EncryptionInfo = Field(
        ...,
        description='Symetryczny klucz szyfrujący plik paczki, zaszyfrowany kluczem publicznym Ministerstwa Finansów.',
    )
    offlineMode: bool | None = Field(
        False,
        description='Określa, czy podatnik deklaruje tryb fakturowania "offline" dla dokumentów przesyłanych w sesji wsadowej.',
    )


class PermissionsSubjectPersonByFingerprintDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectDetailsType: PersonSubjectByFingerprintDetailsType = Field(
        ...,
        description='Typ danych uprawnionej osoby fizycznej.\n| Wartość | Opis |\n| --- | --- |\n| PersonByFingerprintWithIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL, ale mająca NIP lub PESEL. |\n| PersonByFingerprintWithoutIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL i niemająca NIP ani PESEL. |\n',
    )
    firstName: constr(min_length=2, max_length=30) = Field(
        ..., description='Imię osoby fizycznej.'
    )
    lastName: constr(min_length=2, max_length=81) = Field(
        ..., description='Nazwisko osoby fizycznej.'
    )
    personIdentifier: PersonIdentifier | None = Field(
        None, description='Identyfikator osoby fizycznej.'
    )
    birthDate: date | None = Field(None, description='Data urodzenia osoby fizycznej.')
    idDocument: IdDocument | None = Field(
        None, description='Dane dokumentu tożsamości osoby fizycznej.'
    )


class PermissionsSubjectPersonDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectDetailsType: PersonSubjectDetailsType = Field(
        ...,
        description='Typ danych uprawnionej osoby fizycznej.\n| Wartość | Opis |\n| --- | --- |\n| PersonByIdentifier | Osoba fizyczna posługująca się Profilem Zaufanym lub certyfikatem zawierającym identyfikator NIP lub PESEL. |\n| PersonByFingerprintWithIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL, ale mająca NIP lub PESEL. |\n| PersonByFingerprintWithoutIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL i niemająca NIP ani PESEL. |\n',
    )
    firstName: constr(min_length=2, max_length=30) = Field(
        ..., description='Imię osoby fizycznej.'
    )
    lastName: constr(min_length=2, max_length=81) = Field(
        ..., description='Nazwisko osoby fizycznej.'
    )
    personIdentifier: PersonIdentifier | None = Field(
        None, description='Identyfikator osoby fizycznej.'
    )
    birthDate: date | None = Field(None, description='Data urodzenia osoby fizycznej.')
    idDocument: IdDocument | None = Field(
        None, description='Dane dokumentu tożsamości osoby fizycznej.'
    )


class PersonByFingerprintWithIdentifierDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    firstName: constr(min_length=2, max_length=30) = Field(
        ..., description='Imię osoby fizycznej.'
    )
    lastName: constr(min_length=2, max_length=81) = Field(
        ..., description='Nazwisko osoby fizycznej.'
    )
    identifier: PersonIdentifier = Field(
        ..., description='Identyfikator osoby fizycznej.'
    )


class PersonPermission(BaseModel):
    class Config:
        extra = Extra.forbid

    id: PermissionId = Field(..., description='Identyfikator uprawnienia.')
    authorizedIdentifier: PersonPermissionsAuthorizedIdentifier = Field(
        ...,
        description='Identyfikator osoby lub podmiotu uprawnionego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |',
    )
    contextIdentifier: PersonPermissionsContextIdentifier | None = Field(
        None,
        description='Identyfikator kontekstu uprawnienia (dla uprawnień nadanych administratorom jednostek podrzędnych).\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |',
    )
    targetIdentifier: PersonPermissionsTargetIdentifier | None = Field(
        None,
        description='Identyfikator podmiotu docelowego dla uprawnień nadanych pośrednio.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| AllPartners | Identyfikator oznaczający, że uprawnienie nadane w sposób pośredni jest typu generalnego |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |',
    )
    authorIdentifier: PersonPermissionsAuthorIdentifier = Field(
        ...,
        description='Identyfikator osoby lub podmiotu nadającego uprawnienie.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |\n| System | Identyfikator systemowy KSeF |',
    )
    permissionScope: PersonPermissionScope = Field(
        ..., description='Rodzaj uprawnienia.'
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis uprawnienia.'
    )
    subjectPersonDetails: PermissionsSubjectPersonDetails | None = Field(
        None, description='Dane osoby uprawnionej.'
    )
    subjectEntityDetails: PermissionsSubjectEntityDetails | None = Field(
        None, description='Dane podmiotu uprawnionego.'
    )
    permissionState: PermissionState = Field(..., description='Stan uprawnienia.')
    startDate: datetime = Field(
        ..., description='Data rozpoczęcia obowiązywania uprawnienia.'
    )
    canDelegate: bool = Field(
        ...,
        description='Flaga określająca, czy uprawnienie ma być możliwe do dalszego przekazywania.',
    )


class PersonPermissionSubjectDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectDetailsType: PersonPermissionSubjectDetailsType = Field(
        ...,
        description='Typ danych podmiotu.\n| Wartość | Opis |\n| --- | --- |\n| PersonByIdentifier | Osoba fizyczna posługująca się Profilem Zaufanym lub certyfikatem zawierającym identyfikator NIP lub PESEL. |\n| PersonByFingerprintWithIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL, ale mająca NIP lub PESEL. |\n| PersonByFingerprintWithoutIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL i niemająca NIP ani PESEL. |\n',
    )
    personById: PersonDetails | None = Field(
        None,
        description='Dane podmiotu.\n*Wymagane, gdy subjectDetailsType = PersonByIdentifier.*',
    )
    personByFpWithId: PersonByFingerprintWithIdentifierDetails | None = Field(
        None,
        description='Dane podmiotu.\n*Wymagane, gdy subjectDetailsType = PersonByFingerprintWithIdentifier.*',
    )
    personByFpNoId: PersonByFingerprintWithoutIdentifierDetails | None = Field(
        None,
        description='Dane podmiotu.\n*Wymagane, gdy subjectDetailsType = PersonByFingerprintWithoutIdentifier.*',
    )


class PersonPermissionsGrantRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectIdentifier: PersonPermissionsSubjectIdentifier = Field(
        ...,
        description='Identyfikator osoby fizycznej.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |',
    )
    permissions: list[PersonPermissionType] = Field(
        ...,
        description='Lista nadawanych uprawnień. Każda wartość może wystąpić tylko raz.',
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis uprawnienia'
    )
    subjectDetails: PersonPermissionSubjectDetails = Field(
        ..., description='Dane podmiotu, któremu nadawane są uprawnienia.'
    )


class PersonPermissionsQueryRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    authorIdentifier: PersonPermissionsAuthorIdentifier | None = Field(
        None,
        description='Identyfikator osoby lub podmiotu nadającego uprawnienie.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |\n| System | Identyfikator systemowy KSeF |',
    )
    authorizedIdentifier: PersonPermissionsAuthorizedIdentifier | None = Field(
        None,
        description='Identyfikator osoby lub podmiotu uprawnionego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |',
    )
    contextIdentifier: PersonPermissionsContextIdentifier | None = Field(
        None,
        description='Identyfikator kontekstu uprawnienia (dla uprawnień nadanych administratorom jednostek podrzędnych).\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |',
    )
    targetIdentifier: PersonPermissionsTargetIdentifier | None = Field(
        None,
        description='Identyfikator podmiotu docelowego dla uprawnień nadanych pośrednio.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| AllPartners | Identyfikator oznaczający, że uprawnienie nadane w sposób pośredni jest typu generalnego |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |',
    )
    permissionTypes: list[PersonPermissionType] | None = Field(
        None, description='Lista rodzajów wyszukiwanych uprawnień.'
    )
    permissionState: PermissionState | None = Field(
        None,
        description='Stan uprawnienia. \n| Type | Value |\n| --- | --- |\n| Active | Uprawnienia aktywne |\n| Inactive | Uprawnienia nieaktywne, nadane w sposób pośredni |',
    )
    queryType: PersonPermissionsQueryType = Field(
        ...,
        description='Typ zapytania.\n| Type | Value |\n| --- | --- |\n| PermissionsInCurrentContext | Lista uprawnień obowiązujących w bieżącym kontekście |\n| PermissionsGrantedInCurrentContext | Lista uprawnień nadanych w bieżącym kontekście |',
    )


class PersonalPermission(BaseModel):
    class Config:
        extra = Extra.forbid

    id: PermissionId = Field(..., description='Identyfikator uprawnienia.')
    contextIdentifier: PersonalPermissionsContextIdentifier | None = Field(
        None,
        description='Identyfikator kontekstu podmiotu, który nadał uprawnienia do obsługi faktur.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |',
    )
    authorizedIdentifier: PersonalPermissionsAuthorizedIdentifier | None = Field(
        None,
        description='Identyfikator podmiotu uprawnionego, jeżeli jest inny niż identyfikator uwierzytelnionego klienta API.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |',
    )
    targetIdentifier: PersonalPermissionsTargetIdentifier | None = Field(
        None,
        description='Identyfikator podmiotu docelowego dla uprawnień selektywnych nadanych pośrednio.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| AllPartners | Identyfikator oznaczający, że wyszukiwanie dotyczy uprawnień generalnych nadanych w sposób pośredni |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |',
    )
    permissionScope: PersonalPermissionScope = Field(
        ..., description='Rodzaj uprawnienia.'
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis uprawnienia.'
    )
    subjectPersonDetails: PermissionsSubjectPersonDetails | None = Field(
        None, description='Dane osoby uprawnionej.'
    )
    subjectEntityDetails: PermissionsSubjectEntityDetails | None = Field(
        None, description='Dane podmiotu uprawnionego.'
    )
    permissionState: PermissionState = Field(..., description='Stan uprawnienia.')
    startDate: datetime = Field(
        ..., description='Data rozpoczęcia obowiązywania uprawnienia.'
    )
    canDelegate: bool = Field(
        ...,
        description='Flaga określająca, czy uprawnienie ma być możliwe do dalszego przekazywania.',
    )


class PersonalPermissionsQueryRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    contextIdentifier: PersonalPermissionsContextIdentifier | None = Field(
        None,
        description='Identyfikator kontekstu podmiotu, który nadał uprawnienia do obsługi faktur.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |',
    )
    targetIdentifier: PersonalPermissionsTargetIdentifier | None = Field(
        None,
        description='Identyfikator podmiotu docelowego dla uprawnień selektywnych nadanych pośrednio.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| AllPartners | Identyfikator oznaczający, że wyszukiwanie dotyczy uprawnień generalnych nadanych w sposób pośredni |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |',
    )
    permissionTypes: list[PersonalPermissionType] | None = Field(
        None, description='Lista rodzajów wyszukiwanych uprawnień.'
    )
    permissionState: PermissionState | None = Field(
        None,
        description='Stan uprawnienia. \n| Type | Value |\n| --- | --- |\n| Active | Uprawnienia aktywne |\n| Inactive | Uprawnienia nieaktywne |',
    )


class QueryCertificatesResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    certificates: list[CertificateListItem] = Field(
        ..., description='Lista certyfikatów spełniających kryteria wyszukiwania.'
    )
    hasMore: bool = Field(
        ..., description='Flaga informująca o dostępności kolejnej strony wyników.'
    )


class QueryEntityAuthorizationPermissionsResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    authorizationGrants: list[EntityAuthorizationGrant] = Field(
        ..., description='Lista odczytanych uprawnień.'
    )
    hasMore: bool = Field(
        ..., description='Flaga informująca o dostępności kolejnej strony wyników.'
    )


class QueryEntityRolesResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    roles: list[EntityRole] = Field(..., description='Lista odczytanych ról podmiotu.')
    hasMore: bool = Field(
        ..., description='Flaga informująca o dostępności kolejnej strony wyników.'
    )


class QueryPersonPermissionsResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    permissions: list[PersonPermission] = Field(
        ..., description='Lista odczytanych uprawnień.'
    )
    hasMore: bool = Field(
        ..., description='Flaga informująca o dostępności kolejnej strony wyników.'
    )


class QueryPersonalPermissionsResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    permissions: list[PersonalPermission] = Field(
        ..., description='Lista odczytanych uprawnień.'
    )
    hasMore: bool = Field(
        ..., description='Flaga informująca o dostępności kolejnej strony wyników.'
    )


class QueryTokensResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    continuationToken: str | None = Field(
        None,
        description='Token służący do pobrania kolejnej strony wyników. Jeśli jest pusty, to nie ma kolejnych stron.',
    )
    tokens: list[QueryTokensResponseItem] = Field(
        ..., description='Lista tokenów uwierzytelniających.'
    )


class SessionsQueryResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    continuationToken: str | None = Field(
        None,
        description='Token służący do pobrania kolejnej strony wyników. Jeśli jest pusty, to nie ma kolejnych stron.',
    )
    sessions: list[SessionsQueryResponseItem] = Field(..., description='Lista sesji.')


class SubordinateEntityRole(BaseModel):
    class Config:
        extra = Extra.forbid

    subordinateEntityIdentifier: SubordinateRoleSubordinateEntityIdentifier = Field(
        ...,
        description='Identyfikator podmiotu podrzędnego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |',
    )
    role: SubordinateEntityRoleType = Field(
        ..., description='Typ roli - powiązania z podmiotem nadrzędnym.'
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis powiązania.'
    )
    startDate: datetime = Field(
        ..., description='Data rozpoczęcia obowiązywania powiązania.'
    )


class SubunitPermission(BaseModel):
    class Config:
        extra = Extra.forbid

    id: PermissionId = Field(..., description='Identyfikator uprawnienia.')
    authorizedIdentifier: SubunitPermissionsAuthorizedIdentifier = Field(
        ...,
        description='Identyfikator uprawnionego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |',
    )
    subunitIdentifier: SubunitPermissionsSubunitIdentifier = Field(
        ...,
        description='Identyfikator jednostki lub podmiotu podrzędnego.\n| Type | Value |\n| --- | --- |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |\n| Nip | 10 cyfrowy numer NIP |',
    )
    authorIdentifier: SubunitPermissionsAuthorIdentifier = Field(
        ...,
        description='Identyfikator uprawniającego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |',
    )
    permissionScope: SubunitPermissionScope = Field(
        ..., description='Rodzaj uprawnienia.'
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis uprawnienia.'
    )
    subjectPersonDetails: PermissionsSubjectPersonDetails | None = Field(
        None, description='Dane osoby uprawnionej.'
    )
    subunitName: constr(min_length=5, max_length=256) | None = Field(
        None, description='Nazwa jednostki podrzędnej.'
    )
    startDate: datetime = Field(
        ..., description='Data rozpoczęcia obowiązywania uprawnienia.'
    )


class SubunitPermissionsGrantRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectIdentifier: SubunitPermissionsSubjectIdentifier = Field(
        ...,
        description='Identyfikator podmiotu lub osoby fizycznej.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |',
    )
    contextIdentifier: SubunitPermissionsContextIdentifier = Field(
        ...,
        description='Identyfikator podmiotu podrzędnego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |',
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis uprawnienia'
    )
    subunitName: constr(min_length=5, max_length=256) | None = Field(
        None,
        description='Nazwa jednostki podrzędnej. W przypadku jednostki podrzędnej z identyfikatorem wewnętrznym pole jest wymagane.',
    )
    subjectDetails: PersonPermissionSubjectDetails = Field(
        ..., description='Dane podmiotu, któremu nadawane są uprawnienia.'
    )


class SubunitPermissionsQueryRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    subunitIdentifier: SubunitPermissionsSubunitIdentifier | None = Field(
        None,
        description='Identyfikator jednostki lub podmiotu podrzędnego.\n| Type | Value |\n| --- | --- |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |\n| Nip | 10 cyfrowy numer NIP |',
    )


class EuEntityPermission(BaseModel):
    class Config:
        extra = Extra.forbid

    id: PermissionId = Field(..., description='Identyfikator uprawnienia.')
    authorIdentifier: EuEntityPermissionsAuthorIdentifier = Field(
        ...,
        description='Identyfikator uprawniającego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |',
    )
    vatUeIdentifier: str = Field(..., description='Identyfikator podmiotu unijnego.')
    euEntityName: constr(min_length=5, max_length=256) = Field(
        ..., description='Nazwa podmiotu unijnego.'
    )
    authorizedFingerprintIdentifier: constr(min_length=64, max_length=64) = Field(
        ..., description='Uprawniony odcisk palca certyfikatu.'
    )
    permissionScope: EuEntityPermissionsQueryPermissionType = Field(
        ..., description='Uprawnienie.'
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis uprawnienia.'
    )
    subjectPersonDetails: PermissionsSubjectPersonByFingerprintDetails | None = Field(
        None, description='Dane osoby uprawnionej.'
    )
    subjectEntityDetails: PermissionsSubjectEntityByFingerprintDetails | None = Field(
        None, description='Dane podmiotu uprawnionego.'
    )
    euEntityDetails: PermissionsEuEntityDetails | None = Field(
        None,
        description='Dane podmiotu unijnego, w kontekście którego nadane jest uprawnienie.',
    )
    startDate: datetime = Field(
        ..., description='Data rozpoczęcia obowiązywania uprawnienia.'
    )


class EuEntityPermissionSubjectDetails(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectDetailsType: EuEntityPermissionSubjectDetailsType = Field(
        ...,
        description='Typ danych podmiotu.\n| Wartość | Opis |\n| --- | --- |\n| PersonByFingerprintWithIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL, ale mająca NIP lub PESEL. |\n| PersonByFingerprintWithoutIdentifier | Osoba fizyczna posługująca się certyfikatem niezawierającym identyfikatora NIP ani PESEL i niemająca NIP ani PESEL. |\n| EntityByFingerprint | Podmiot identyfikowany odciskiem palca pieczęci kwalifikowanej. |\n',
    )
    personByFpWithId: PersonByFingerprintWithIdentifierDetails | None = Field(
        None,
        description='Dane podmiotu.\n*Wymagane, gdy subjectDetailsType = PersonByFingerprintWithIdentifier.*',
    )
    personByFpNoId: PersonByFingerprintWithoutIdentifierDetails | None = Field(
        None,
        description='Dane podmiotu.\n*Wymagane, gdy subjectDetailsType = PersonByFingerprintWithoutIdentifier.*',
    )
    entityByFp: EntityByFingerprintDetails | None = Field(
        None,
        description='Dane podmiotu.\n*Wymagane, gdy subjectDetailsType = EntityByFingerprint.*',
    )


class EuEntityPermissionsGrantRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectIdentifier: EuEntityPermissionsSubjectIdentifier = Field(
        ...,
        description='Identyfikator podmiotu uprawnianego.\n| Type | Value |\n| --- | --- |\n| Fingerprint | Odcisk palca certyfikatu |',
    )
    permissions: list[EuEntityPermissionType] = Field(
        ...,
        description='Lista nadawanych uprawnień. Każda wartość może wystąpić tylko raz.',
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis uprawnienia'
    )
    subjectDetails: EuEntityPermissionSubjectDetails = Field(
        ..., description='Dane podmiotu, któremu nadawane są uprawnienia.'
    )


class IndirectPermissionsGrantRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectIdentifier: IndirectPermissionsSubjectIdentifier = Field(
        ...,
        description='Identyfikator osoby fizycznej.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| Pesel | 11 cyfrowy numer PESEL |\n| Fingerprint | Odcisk palca certyfikatu |',
    )
    targetIdentifier: IndirectPermissionsTargetIdentifier | None = Field(
        None,
        description='Identyfikator kontekstu klienta. Nie przekazanie identyfikatora oznacza, że uprawnienie nadane w sposób pośredni jest typu generalnego.\n| Type | Value |\n| --- | --- |\n| Nip | 10 cyfrowy numer NIP |\n| AllPartners | Identyfikator oznaczający, że uprawnienie nadane w sposób pośredni jest typu generalnego |\n| InternalId | Dwuczłonowy identyfikator składający się z numeru NIP i 5 cyfr: `{nip}-{5_cyfr}` |',
    )
    permissions: list[IndirectPermissionType] = Field(
        ...,
        description='Lista nadawanych uprawnień. Każda wartość może wystąpić tylko raz.',
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis uprawnienia'
    )
    subjectDetails: PersonPermissionSubjectDetails = Field(
        ..., description='Dane podmiotu, któremu nadawane są uprawnienia.'
    )


class InvoiceExportStatusResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    status: StatusInfo = Field(
        ...,
        description='Status eksportu.\n\n| Code | Description | Details |\n| --- | --- | --- |\n| 100 | Eksport faktur w toku | - |\n| 200 | Eksport faktur zakończony sukcesem | - |\n| 210 | Eksport faktur wygasł i nie jest już dostępny do pobrania | - |\n| 415 | Błąd odszyfrowania dostarczonego klucza  | - |\n| 420 | Zakres filtrowania wykracza poza dostępny zakres danych | Parametr dateRange.from jest późniejszy niż PermanentStorageHwmDate przy włączonym restrictToPermanentStorageHwmDate. |\n| 500 | Nieznany błąd ({statusCode}) | - |\n| 550 | Operacja została anulowana przez system | Przetwarzanie zostało przerwane z przyczyn wewnętrznych systemu. Spróbuj ponownie |',
    )
    completedDate: datetime | None = Field(
        None, description='Data zakończenia przetwarzania żądania eksportu faktur.'
    )
    packageExpirationDate: datetime | None = Field(
        None,
        description='Data wygaśnięcia paczki faktur przygotowanej do pobrania.\nPo upływie tej daty paczka nie będzie już dostępna do pobrania.',
    )
    package: InvoicePackage | None = Field(
        None, description='Dane paczki faktur przygotowanej do pobrania.'
    )


class InvoiceMetadata(BaseModel):
    class Config:
        extra = Extra.forbid

    ksefNumber: KsefNumber = Field(..., description='Numer KSeF faktury.')
    invoiceNumber: constr(max_length=256) = Field(
        ..., description='Numer faktury nadany przez wystawcę.'
    )
    issueDate: date = Field(..., description='Data wystawienia faktury.')
    invoicingDate: datetime = Field(
        ...,
        description='Data przyjęcia faktury w systemie KSeF (do dalszego przetwarzania).',
    )
    acquisitionDate: datetime = Field(..., description='Data nadania numeru KSeF.')
    permanentStorageDate: datetime = Field(
        ..., description='Data trwałego zapisu faktury w repozytorium systemu KSeF.'
    )
    seller: InvoiceMetadataSeller = Field(
        ..., description='Dane identyfikujące sprzedawcę.'
    )
    buyer: InvoiceMetadataBuyer = Field(..., description='Dane identyfikujące nabywcę.')
    netAmount: float = Field(..., description='Łączna kwota netto.')
    grossAmount: float = Field(..., description='Łączna kwota brutto.')
    vatAmount: float = Field(..., description='Łączna kwota VAT.')
    currency: constr(min_length=3, max_length=3) = Field(..., description='Kod waluty.')
    invoicingMode: InvoicingMode = Field(
        ..., description='Tryb fakturowania (online/offline).'
    )
    invoiceType: InvoiceType = Field(
        ...,
        description='Rodzaj faktury.\n| Wartość | Opis |\n| --- | --- |\n| Vat | (FA) Podstawowa |\n| Zal | (FA) Zaliczkowa |\n| Kor | (FA) Korygująca |\n| Roz | (FA) Rozliczeniowa |\n| Upr | (FA) Uproszczona |\n| KorZal | (FA) Korygująca fakturę zaliczkową |\n| KorRoz | (FA) Korygująca fakturę rozliczeniową |\n| VatPef | (PEF) Podstawowa |\n| VatPefSp | (PEF) Specjalizowana |\n| KorPef | (PEF) Korygująca |\n| VatRr | (RR) Podstawowa |\n| KorVatRr | (RR) Korygująca |\n',
    )
    formCode: FormCode = Field(
        ...,
        description='Struktura dokumentu faktury.\n\nObsługiwane schematy:\n| SystemCode | SchemaVersion | Value |\n| --- | --- | --- |\n| [FA (2)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/FA/schemat_FA(2)_v1-0E.xsd) | 1-0E | FA |\n| [FA (3)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/FA/schemat_FA(3)_v1-0E.xsd) | 1-0E | FA |\n| [PEF (3)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/PEF/Schemat_PEF(3)_v2-1.xsd) | 2-1 | PEF |\n| [PEF_KOR (3)](https://github.com/CIRFMF/ksef-docs/blob/main/faktury/schemy/PEF/Schemat_PEF_KOR(3)_v2-1.xsd) | 2-1 | PEF |\n| FA_RR (1) | 1-0E | RR |\n',
    )
    isSelfInvoicing: bool = Field(
        ..., description='Czy faktura została wystawiona w trybie samofakturowania.'
    )
    hasAttachment: bool = Field(
        ..., description='Określa, czy faktura posiada załącznik.'
    )
    invoiceHash: Sha256HashBase64 = Field(
        ..., description='Skrót SHA256 faktury, zakodowany w formacie Base64.'
    )
    hashOfCorrectedInvoice: Sha256HashBase64 | None = Field(
        None,
        description='Skrót SHA256 korygowanej faktury, zakodowany w formacie Base64.',
    )
    thirdSubjects: list[InvoiceMetadataThirdSubject] | None = Field(
        None, description='Lista podmiotów trzecich.'
    )
    authorizedSubject: InvoiceMetadataAuthorizedSubject | None = Field(
        None, description='Podmiot upoważniony.'
    )


class QueryEuEntityPermissionsResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    permissions: list[EuEntityPermission] = Field(
        ..., description='Lista odczytanych uprawnień.'
    )
    hasMore: bool = Field(
        ..., description='Flaga informująca o dostępności kolejnej strony wyników.'
    )


class QueryInvoicesMetadataResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    hasMore: bool = Field(
        ..., description='Określa, czy istnieją kolejne wyniki zapytania.'
    )
    isTruncated: bool = Field(
        ...,
        description='Określa, czy osiągnięto maksymalny dopuszczalny zakres wyników zapytania (10 000).',
    )
    permanentStorageHwmDate: datetime | None = Field(
        None,
        description='Dotyczy wyłącznie zapytań filtrowanych po typie daty <b>PermanentStorage</b>.\nJeśli zapytanie dotyczyło najnowszego okresu, wartość ta może być wartością nieznacznie skorygowaną względem górnej granicy podanej w warunkach zapytania.\nDla okresów starszych, będzie to zgodne z warunkami zapytania. \n\nWartość jest stała dla wszystkich stron tego samego zapytania\ni nie zależy od paginacji ani sortowania.\n\nSystem gwarantuje, że dane poniżej tej wartości są spójne i kompletne.\nPonowne zapytania obejmujące zakresem dane poniżej tego kroczącego znacznika czasu nie zwrócą w przyszłości innych wyników (np.dodatkowych faktur). \n\nDla dateType = Issue lub Invoicing – null.',
    )
    invoices: list[InvoiceMetadata] = Field(
        ..., description='Lista faktur spełniających kryteria.'
    )


class QuerySubordinateEntityRolesResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    roles: list[SubordinateEntityRole] = Field(
        ..., description='Lista odczytanych podmiotów podrzędnych i ich ról.'
    )
    hasMore: bool = Field(
        ..., description='Flaga informująca o dostępności kolejnej strony wyników.'
    )


class QuerySubunitPermissionsResponse(BaseModel):
    class Config:
        extra = Extra.forbid

    permissions: list[SubunitPermission] = Field(
        ..., description='Lista odczytanych uprawnień.'
    )
    hasMore: bool = Field(
        ..., description='Flaga informująca o dostępności kolejnej strony wyników.'
    )


class EuEntityAdministrationPermissionsGrantRequest(BaseModel):
    class Config:
        extra = Extra.forbid

    subjectIdentifier: EuEntityAdministrationPermissionsSubjectIdentifier = Field(
        ...,
        description='Identyfikator podmiotu uprawnionego.\n| Type | Value |\n| --- | --- |\n| Fingerprint | Odcisk palca certyfikatu |',
    )
    contextIdentifier: EuEntityAdministrationPermissionsContextIdentifier = Field(
        ...,
        description='Identyfikator kontekstu złożonego.\n| Type | Value |\n| --- | --- |\n| NipVatUe | Dwuczłonowy identyfikator składający się z numeru NIP i numeru VAT-UE: `{nip}-{vat_ue}` |',
    )
    description: constr(min_length=5, max_length=256) = Field(
        ..., description='Opis uprawnienia'
    )
    euEntityName: constr(min_length=5, max_length=256) = Field(
        ...,
        description='Nazwa i adres podmiotu unijnego w formacie: \n`{euSubjectName}, {euSubjectAddress}`',
    )
    subjectDetails: EuEntityPermissionSubjectDetails = Field(
        ..., description='Dane podmiotu, któremu nadawane są uprawnienia.'
    )
    euEntityDetails: EuEntityDetails = Field(
        ...,
        description='Dane podmiotu unijnego, w kontekście którego nadawane są uprawnienia.',
    )
